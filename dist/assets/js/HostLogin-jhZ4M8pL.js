import{r as e,u as s,i as t,k as a,j as o,F as r,L as n}from"./react-vendor-Ve3SFwKO.js";import{t as i}from"./form-vendor-Dd1peP4Z.js";import{u as l,a as c,B as m,L as d,C as h,b as x,c as u,d as p,e as f,f as g}from"./index-BnushFQy.js";import{I as j}from"./input-C6C1u0Er.js";import{T as y,a as b,b as w,c as v}from"./tabs-DPlck8m_.js";import{V as N}from"./video-background-DTGZ_twq.js";import{F as S,a as k,b as P,c as C,d as I,e as z,l as V,s as A}from"./validation-BjnjtpVp.js";import{T as G}from"./theme-toggle-C_syTt2a.js";import{s as F,a as D}from"./sanitize-GsD2yBhu.js";import{G as U,z as E}from"./firebase-vendor-BC71bXmb.js";import{A as T,B as O,M as B,c as J,E as W,d as Z}from"./icons-vendor-DD8ZfUKZ.js";import"./utils-vendor-DzY7Ay74.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-D9RGQy8n.js";import"./label-DdT-oWKe.js";import"./dropdown-menu-eYIb6UEc.js";const L=()=>{const[L,M]=e.useState(!1),[Y,_]=e.useState(!1),[q,H]=e.useState(!1),[R,$]=e.useState(!1),[K,Q]=e.useState(null),[X,ee]=e.useState("signin"),{signIn:se,signUp:te,signInWithGoogle:ae}=l(),oe=s(),re=t(),ne=!0===re.state?.showSignup;e.useEffect(()=>{ne&&ee("signup")},[ne]),e.useEffect(()=>{const e=sessionStorage.getItem("hostSignUpData");if(e&&ne)try{const s=JSON.parse(e);le.setValue("fullName",s.fullName||""),le.setValue("email",s.email||""),le.setValue("password",s.password||""),le.setValue("confirmPassword",s.confirmPassword||""),c.success("Your form data has been restored. Please continue creating your account.")}catch(s){}},[ne]);const ie=a({resolver:i(V),defaultValues:{email:"",password:""}}),le=a({resolver:i(A),defaultValues:{fullName:"",email:"",password:"",confirmPassword:""}});return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[o.jsx("div",{className:"fixed inset-0 z-0",style:{width:"100vw",height:"100vh",transform:"translateZ(0)",willChange:"auto",pointerEvents:"none"},children:o.jsx(N,{src:"/videos/landing-hero.mp4",overlay:!0,className:"w-full h-full",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"scale(1) translateZ(0)",willChange:"auto"}})}),o.jsx("header",{className:"relative z-10 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center gap-2 sm:gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0 flex-1",children:[o.jsx(m,{variant:"ghost",size:"icon",onClick:()=>oe("/"),className:"touch-manipulation",children:o.jsx(T,{className:"h-4 w-4"})}),o.jsx(d,{size:"sm"})]}),o.jsx(G,{})]})}),o.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center p-4 sm:p-6",children:o.jsxs(h,{className:"w-full max-w-md shadow-2xl border-2 border-secondary/20 bg-card/95 backdrop-blur-md relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 via-transparent to-primary/5 pointer-events-none"}),o.jsxs(x,{className:"space-y-3 sm:space-y-4 text-center pb-6 sm:pb-8 px-4 sm:px-6 pt-4 sm:pt-6 relative z-10",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto rounded-3xl bg-gradient-to-br from-secondary via-secondary/80 to-primary/60 flex items-center justify-center shadow-lg ring-4 ring-secondary/20 animate-in fade-in zoom-in duration-500",children:o.jsx(O,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(u,{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-secondary to-primary bg-clip-text text-transparent",children:"Host Portal"}),o.jsx(p,{className:"text-sm sm:text-base mt-2 font-medium text-foreground/80 dark:text-muted-foreground",children:"Start hosting and earning today"})]})]}),o.jsxs(f,{className:"relative z-10 px-4 sm:px-6 pb-4 sm:pb-6",children:[o.jsxs(y,{defaultValue:ne?"signup":"signin",onValueChange:e=>ee(e),className:"w-full",children:[o.jsxs(b,{className:"grid w-full grid-cols-2 mb-6 sm:mb-8 bg-muted/50 p-1 rounded-xl relative overflow-hidden h-auto",children:[o.jsx("div",{className:"absolute inset-y-1 bg-gradient-to-r from-secondary to-secondary/80 rounded-lg transition-all duration-300 ease-in-out",style:{left:"signin"===X?"4px":"50%",right:"signin"===X?"50%":"4px",width:"calc(50% - 4px)"}}),o.jsx(w,{value:"signin",className:"!flex !items-center !justify-center text-sm sm:text-base font-semibold text-foreground/90 dark:text-foreground data-[state=active]:bg-transparent data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-300 ease-in-out relative z-10 !h-10 sm:!h-12 touch-manipulation !py-0 !px-4 leading-none",children:o.jsx("span",{className:"flex items-center justify-center h-full",children:"Sign In"})}),o.jsx(w,{value:"signup",className:"!flex !items-center !justify-center text-sm sm:text-base font-semibold text-foreground/90 dark:text-foreground data-[state=active]:bg-transparent data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-300 ease-in-out relative z-10 !h-10 sm:!h-12 touch-manipulation !py-0 !px-4 leading-none",children:o.jsx("span",{className:"flex items-center justify-center h-full",children:"Sign Up"})})]}),o.jsx(v,{value:"signin",children:o.jsx(S,{...ie,children:o.jsxs("form",{onSubmit:ie.handleSubmit(async e=>{H(!0);try{const s=F(e.email),t=D(e.password);await se(s,t,"host"),c.success("Welcome back!"),oe("/host/dashboard")}catch(s){c.error(s.message||"Unable to sign in. Please check your email and password, then try again.")}finally{H(!1)}}),className:"space-y-4 sm:space-y-6",children:[o.jsx(k,{control:ie.control,name:"email",render:({field:e})=>o.jsxs(P,{children:[o.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Email"}),o.jsx(I,{children:o.jsxs("div",{className:"relative group",children:[o.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-secondary group-focus-within:text-secondary transition-colors"}),o.jsx(j,{type:"email",placeholder:"host@example.com",className:"pl-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e})]})}),o.jsx(z,{})]})}),o.jsx(k,{control:ie.control,name:"password",render:({field:e})=>o.jsxs(P,{children:[o.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Password"}),o.jsx(I,{children:o.jsxs("div",{className:"relative group",children:[o.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-secondary group-focus-within:text-secondary transition-colors"}),o.jsx(j,{type:L?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e}),o.jsx("button",{type:"button",onClick:()=>M(!L),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-secondary transition-colors h-8 w-8 sm:h-auto sm:w-auto flex items-center justify-center touch-manipulation",children:L?o.jsx(W,{className:"h-4 w-4 sm:h-5 sm:w-5"}):o.jsx(Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),o.jsx(z,{})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(m,{type:"button",variant:"link",onClick:()=>oe("/forgot-password",{state:{userType:"host"}}),className:"text-sm text-secondary hover:text-secondary/80 p-0 h-auto font-semibold",children:"Forgot Password?"})}),o.jsx(m,{type:"submit",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold bg-gradient-to-r from-secondary to-secondary/90 hover:from-secondary/90 hover:to-secondary text-white shadow-lg hover:shadow-xl transition-all duration-300 touch-manipulation",disabled:q,children:q?"Signing in...":"Sign In"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-card px-2 text-foreground/70 dark:text-muted-foreground",children:"Or continue with"})})]}),o.jsx(m,{type:"button",variant:"outline",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold border-2 hover:bg-muted/50 hover:border-secondary/50 transition-all duration-300 touch-manipulation",onClick:async()=>{if(!R&&!q){$(!0);try{await ae("host"),c.success("Welcome!"),oe("/host/dashboard")}catch(e){e.message?.includes("not registered as a host")||e.message?.includes("sign up for a host account first")?c.info("Please complete your host account registration"):c.error(e.message||"Failed to sign in with Google")}finally{$(!1)}}},disabled:R||q,children:R?"Signing in...":o.jsxs(o.Fragment,{children:[o.jsx(r,{className:"h-5 w-5 mr-2"}),"Sign in with Google"]})})]})})}),o.jsxs(v,{value:"signup",children:[o.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-secondary/10 via-primary/10 to-secondary/10 border-2 border-secondary/30 rounded-xl shadow-md",children:[o.jsxs("p",{className:"text-sm text-foreground font-medium",children:[o.jsx("strong",{className:"text-secondary",children:"Important:"})," Before creating your host account, you must read and accept our policies and compliance terms."]}),o.jsx(m,{type:"button",variant:"outline",className:"mt-3 w-full border-2 border-secondary/50 hover:bg-secondary/10 hover:border-secondary transition-all",onClick:()=>oe("/host/policies"),children:"Review Policies & Terms"})]}),o.jsx(S,{...le,children:o.jsxs("form",{onSubmit:le.handleSubmit(async e=>{if(H(!0),!sessionStorage.getItem("hostPolicyAccepted"))return sessionStorage.setItem("hostSignUpData",JSON.stringify({fullName:e.fullName,email:e.email,password:e.password,confirmPassword:e.confirmPassword})),c.info("Please accept our policies and terms to continue creating your host account."),oe("/host/policies",{state:{returnTo:"/host/login",showSignup:!0}}),void H(!1);try{const s=D(e.fullName),t=F(e.email),a=D(e.password),o=sessionStorage.getItem("hostPolicyAcceptedDate");await te(t,a,s,"host",{policyAccepted:!0,policyAcceptedDate:o||(new Date).toISOString()}),sessionStorage.removeItem("hostPolicyAccepted"),sessionStorage.removeItem("hostPolicyAcceptedDate"),sessionStorage.removeItem("hostSignUpData"),c.success("Account created! Please check your email to verify your account."),oe("/verify-otp")}catch(s){c.error(s.message||"Unable to create account. Please check your information and try again.")}finally{H(!1)}}),className:"space-y-4 sm:space-y-6",children:[o.jsx(k,{control:le.control,name:"fullName",render:({field:e})=>o.jsxs(P,{children:[o.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Full Name"}),o.jsx(I,{children:o.jsxs("div",{className:"relative group",children:[o.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-secondary group-focus-within:text-secondary transition-colors"}),o.jsx(j,{type:"text",placeholder:"Jane Smith",className:"pl-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e})]})}),o.jsx(z,{})]})}),o.jsx(k,{control:le.control,name:"email",render:({field:e})=>o.jsxs(P,{children:[o.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Email"}),o.jsx(I,{children:o.jsxs("div",{className:"relative group",children:[o.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-secondary group-focus-within:text-secondary transition-colors"}),o.jsx(j,{type:"email",placeholder:"host@example.com",className:"pl-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e})]})}),o.jsx(z,{})]})}),o.jsx(k,{control:le.control,name:"password",render:({field:e})=>o.jsxs(P,{children:[o.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Password"}),o.jsx(I,{children:o.jsxs("div",{className:"relative group",children:[o.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-secondary group-focus-within:text-secondary transition-colors"}),o.jsx(j,{type:L?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e}),o.jsx("button",{type:"button",onClick:()=>M(!L),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-secondary transition-colors h-8 w-8 sm:h-auto sm:w-auto flex items-center justify-center touch-manipulation",children:L?o.jsx(W,{className:"h-4 w-4 sm:h-5 sm:w-5"}):o.jsx(Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),o.jsx(z,{}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]})}),o.jsx(k,{control:le.control,name:"confirmPassword",render:({field:e})=>o.jsxs(P,{children:[o.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Confirm Password"}),o.jsx(I,{children:o.jsxs("div",{className:"relative group",children:[o.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-secondary group-focus-within:text-secondary transition-colors"}),o.jsx(j,{type:Y?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e}),o.jsx("button",{type:"button",onClick:()=>_(!Y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-secondary transition-colors h-8 w-8 sm:h-auto sm:w-auto flex items-center justify-center touch-manipulation",children:Y?o.jsx(W,{className:"h-4 w-4 sm:h-5 sm:w-5"}):o.jsx(Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),o.jsx(z,{})]})}),o.jsx(m,{type:"submit",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold bg-gradient-to-r from-secondary to-secondary/90 hover:from-secondary/90 hover:to-secondary text-white shadow-lg hover:shadow-xl transition-all duration-300 touch-manipulation",disabled:q,children:q?"Creating account...":"Create Account"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-card px-2 text-foreground/70 dark:text-muted-foreground",children:"Or continue with"})})]}),o.jsx(m,{type:"button",variant:"outline",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold border-2 hover:bg-muted/50 hover:border-secondary/50 transition-all duration-300 touch-manipulation",onClick:async()=>{if(!R&&!q){$(!0);try{const e=new U;e.setCustomParameters({prompt:"select_account"});const s=(await E(g,e)).user;le.setValue("email",s.email||""),le.setValue("fullName",s.displayName||s.email?.split("@")[0]||""),Q({email:s.email||"",fullName:s.displayName||s.email?.split("@")[0]||""}),c.success("Signed up with Google! Please set a password to complete registration.")}catch(e){"auth/popup-closed-by-user"!==e.code&&"auth/cancelled-popup-request"!==e.code&&c.error(e.message||"Failed to get Google account info")}finally{$(!1)}}},disabled:R||q,children:R?"Signing up...":o.jsxs(o.Fragment,{children:[o.jsx(r,{className:"h-5 w-5 mr-2"}),"Sign up with Google"]})})]})})]})]}),o.jsxs("div",{className:"mt-8 text-center text-sm text-foreground/70 dark:text-muted-foreground space-y-2",children:[o.jsxs("p",{children:["New to hosting? ",o.jsx(n,{to:"/host/register",className:"text-secondary hover:text-secondary/80 hover:underline font-semibold transition-colors",children:"Get Started"})]}),o.jsxs("p",{children:["Not a host? ",o.jsx(n,{to:"/guest/login",className:"text-secondary hover:text-secondary/80 hover:underline font-semibold transition-colors",children:"Browse as Guest"})]})]})]})]})})]})};export{L as default};
