import{u as e,r as s,j as r}from"./react-vendor-DAkY0NgE.js";import{u as t,h as a,L as o,B as i,C as n,a as c,b as d,d as l,i as m,c as h,j as x}from"./index-BbvEjZj9.js";import{N as u}from"./NotificationBell-zOtcMnYS.js";import{B as g}from"./badge-Bdu_tSqo.js";import{T as p}from"./theme-toggle-C3pYvPx7.js";import{k as j,q as f,w as v,c as b}from"./firebase-vendor-CvoiOdvz.js";import{A as N,a as w,b as y,c as k,d as D,e as C,f as S,g as T}from"./alert-dialog-D9Kc0D1X.js";import{H as I,P,i as H,j as L,k as B,l as O,m as E}from"./icons-vendor-3zhgXMYa.js";import"./maps-vendor-CYGXCXz5.js";import"./utils-vendor-yBsXXcRr.js";import"./ui-vendor-CZx_xpmK.js";import"./scroll-area-DiLI9L8b.js";import"./dropdown-menu-BRbzCJvi.js";const M=()=>{const{user:a}=t(),[o,i]=s.useState([]),u=e();return s.useEffect(()=>{if(!a)return;const e=new Date;e.setHours(0,0,0,0);const s=new Date(e);s.setDate(s.getDate()+1);const r=j(f(b(x,"bookings"),v("hostId","==",a.uid)),s=>{const r=s.docs.map(e=>({id:e.id,...e.data()})).filter(s=>{const r=new Date(s.checkIn);r.setHours(0,0,0,0);const t=new Date(s.checkOut);return t.setHours(0,0,0,0),!(r.getTime()!==e.getTime()&&t.getTime()!==e.getTime()||"confirmed"!==s.status&&"pending"!==s.status)}).sort((e,s)=>new Date(e.checkIn).getTime()-new Date(s.checkIn).getTime());i(r)});return()=>r()},[a]),r.jsxs(n,{className:"shadow-medium",children:[r.jsxs(c,{children:[r.jsx(d,{children:"Today's Schedule"}),r.jsx(h,{children:o.length>0?`${o.length} booking${o.length>1?"s":""} today`:"No bookings scheduled for today"})]}),r.jsx(l,{children:0===o.length?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(H,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"You're all set! No check-ins or check-outs today."})]}):r.jsx("div",{className:"space-y-3",children:o.map(e=>{const s=new Date(e.checkIn),t=new Date(e.checkOut),a=s.toDateString()===(new Date).toDateString(),o=t.toDateString()===(new Date).toDateString();return r.jsx("div",{className:"p-4 border rounded-lg hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>u("/host/bookings"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:a&&o?"Check-in & Check-out":a?"Check-in":"Check-out"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.toLocaleDateString()," - ",t.toLocaleDateString()]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.guests," guest",e.guests>1?"s":""," â€¢ ",m(e.totalPrice||0)]})]}),r.jsx(g,{children:e.status})]})},e.id)})})})]})},R=()=>{const{user:g,userRole:R,userProfile:A,signOut:q,hasRole:z}=t(),V=e(),[W,Y]=s.useState({activeListings:0,upcomingBookings:0,totalEarnings:0,rewardPoints:A?.points||0}),[$,G]=s.useState(!1);s.useEffect(()=>{if(!g||!z("host"))return void V("/host/login");Q();const e=j(f(b(x,"listing"),v("hostId","==",g.uid)),e=>{const s=e.docs.filter(e=>"approved"===e.data().status).length;Y(e=>({...e,activeListings:s}))}),s=j(f(b(x,"bookings"),v("hostId","==",g.uid)),e=>{const s=new Date,r=e.docs.filter(e=>{const r=e.data();return new Date(r.checkIn)>=s&&"confirmed"===r.status}).length,t=e.docs.filter(e=>"confirmed"===e.data().status||"completed"===e.data().status).reduce((e,s)=>e+(s.data().totalPrice||0),0);Y(e=>({...e,upcomingBookings:r,totalEarnings:t}))});return()=>{e(),s()}},[g,R,V]);const Q=async()=>{if(g)try{const e=await a({hostId:g.uid}),s=new Date;s.setHours(0,0,0,0),e.filter(e=>{const r=new Date(e.checkIn);return r.setHours(0,0,0,0),r.getTime()===s.getTime()}),A?.points&&Y(e=>({...e,rewardPoints:A.points}))}catch(e){}};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-soft",children:r.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(o,{size:"sm"}),r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(I,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-lg font-bold",children:["Welcome, ",A?.fullName||"Host","!"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage your properties"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(u,{}),r.jsx(p,{}),r.jsx(i,{variant:"outline",onClick:()=>G(!0),children:"Sign Out"})]})]})}),r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8 p-6 rounded-xl bg-gradient-hero text-white",children:[r.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",A?.fullName||"Host","!"]}),r.jsx("p",{className:"text-white/90",children:A?.fullName||"Host"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-secondary to-accent"}),r.jsx(c,{className:"pb-3",children:r.jsx(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Active Listings"})}),r.jsx(l,{children:r.jsx("div",{className:"flex items-baseline justify-between",children:r.jsx("div",{className:"text-4xl font-bold bg-gradient-to-br from-primary to-primary-glow bg-clip-text text-transparent",children:W.activeListings})})})]}),r.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-secondary via-primary to-accent"}),r.jsx(c,{className:"pb-3",children:r.jsx(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Upcoming Bookings"})}),r.jsx(l,{children:r.jsx("div",{className:"flex items-baseline justify-between",children:r.jsx("div",{className:"text-4xl font-bold bg-gradient-to-br from-secondary to-secondary/80 bg-clip-text text-transparent",children:W.upcomingBookings})})})]}),r.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent via-primary to-secondary"}),r.jsx(c,{className:"pb-3",children:r.jsx(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Total Earnings"})}),r.jsx(l,{children:r.jsx("div",{className:"flex items-baseline justify-between",children:r.jsx("div",{className:"text-4xl font-bold",children:m(W.totalEarnings)})})})]}),r.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent via-green-500 to-green-600"}),r.jsx(c,{className:"pb-3",children:r.jsx(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Reward Points"})}),r.jsx(l,{children:r.jsx("div",{className:"flex items-baseline justify-between",children:r.jsx("div",{className:"text-4xl font-bold bg-gradient-accent bg-clip-text text-transparent",children:W.rewardPoints})})})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsx(n,{className:"shadow-medium hover:shadow-hover transition-all duration-300 cursor-pointer border-border/50 hover:border-primary/50 group",onClick:()=>V("/host/create-listing"),children:r.jsxs(c,{className:"space-y-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(P,{className:"w-7 h-7 text-primary"})}),r.jsx(d,{className:"group-hover:text-primary transition-colors",children:"Create New Listing"}),r.jsx(h,{children:"Add a new property, experience, or service"})]})}),r.jsx(n,{className:"shadow-medium hover:shadow-hover transition-all duration-300 cursor-pointer border-border/50 hover:border-primary/50 group",onClick:()=>V("/host/listings"),children:r.jsxs(c,{className:"space-y-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(I,{className:"w-7 h-7 text-primary"})}),r.jsx(d,{className:"group-hover:text-primary transition-colors",children:"My Listings"}),r.jsx(h,{children:"View and manage your active listings"})]})}),r.jsx(n,{className:"shadow-medium hover:shadow-hover transition-all duration-300 cursor-pointer border-border/50 hover:border-secondary/50 group",onClick:()=>V("/host/bookings"),children:r.jsxs(c,{className:"space-y-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-secondary/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(H,{className:"w-7 h-7 text-secondary"})}),r.jsx(d,{className:"group-hover:text-secondary transition-colors",children:"Bookings"}),r.jsx(h,{children:"Manage booking requests"})]})}),r.jsx(n,{className:"shadow-medium hover:shadow-hover transition-all duration-300 cursor-pointer border-border/50 hover:border-secondary/50 group",onClick:()=>V("/host/messages"),children:r.jsxs(c,{className:"space-y-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-secondary/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(L,{className:"w-7 h-7 text-secondary"})}),r.jsx(d,{className:"group-hover:text-secondary transition-colors",children:"Messages"}),r.jsx(h,{children:"Chat with guests and respond to inquiries"})]})}),r.jsx(n,{className:"shadow-medium hover:shadow-hover transition-all duration-300 cursor-pointer border-border/50 hover:border-accent/50 group",onClick:()=>V("/host/payments"),children:r.jsxs(c,{className:"space-y-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-accent/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(B,{className:"w-7 h-7 text-accent"})}),r.jsx(d,{className:"group-hover:text-accent transition-colors",children:"Payments"}),r.jsx(h,{children:"View earnings and payment methods"})]})}),r.jsx(n,{className:"shadow-medium hover:shadow-hover transition-all duration-300 cursor-pointer border-border/50 hover:border-accent/50 group",onClick:()=>V("/host/settings?tab=profile"),children:r.jsxs(c,{className:"space-y-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-accent/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(O,{className:"w-7 h-7 text-accent"})}),r.jsx(d,{className:"group-hover:text-accent transition-colors",children:"Points & Rewards"}),r.jsx(h,{children:"Track your rewards and achievements"})]})}),r.jsx(n,{className:"shadow-medium hover:shadow-hover transition-all duration-300 cursor-pointer border-border/50 hover:border-muted-foreground/50 group",onClick:()=>V("/host/settings"),children:r.jsxs(c,{className:"space-y-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-muted/10 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(E,{className:"w-7 h-7 text-muted-foreground"})}),r.jsx(d,{className:"group-hover:text-muted-foreground transition-colors",children:"Settings"}),r.jsx(h,{children:"Manage your account preferences"})]})})]}),r.jsx(M,{})]}),r.jsx(N,{open:$,onOpenChange:G,children:r.jsxs(w,{children:[r.jsxs(y,{children:[r.jsx(k,{children:"Sign Out"}),r.jsx(D,{children:"Are you sure you want to sign out? You'll need to sign in again to access your account."})]}),r.jsxs(C,{children:[r.jsx(S,{children:"Cancel"}),r.jsx(T,{onClick:async()=>{await q(),V("/")},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})})]})};export{R as default};
