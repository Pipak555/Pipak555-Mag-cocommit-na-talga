import{u as e,l as s,r as a,j as r}from"./react-vendor-BMVo5gto.js";import{u as t,e as i,B as l,C as c,a as n,b as d,d as m,i as o}from"./index-BbQqfVom.js";import{P as x}from"./PayPalButton-BsDK2NsU.js";import{getPlanById as u}from"./billingService-BpXNrE61.js";import{A as h,H as j,X as p,e as f,i as N}from"./icons-vendor-D1YpcxsO.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-Dbp4DHG_.js";import"./firebase-vendor-BtzXZj7S.js";const g=()=>{const g=e(),[v]=s(),{user:y}=t(),[b,w]=a.useState(null),[P,C]=a.useState(!0),k=v.get("planId")||"active-host-monthly";return a.useEffect(()=>{if(!y)return i.error("Please sign in to continue"),void g("/host/login");const e=u(k);if(!e)return i.error("Invalid plan selected"),void g("/host/register");w(e),C(!1)},[k,y,g]),P||!b?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading payment page..."})]})}):r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs(l,{variant:"ghost",onClick:()=>g("/host/register"),className:"gap-2",children:[r.jsx(h,{className:"h-4 w-4"}),"Back to Registration"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(l,{variant:"ghost",onClick:()=>g("/"),className:"gap-2",children:[r.jsx(j,{className:"h-4 w-4"}),"Home"]}),r.jsxs(l,{variant:"ghost",onClick:()=>{window.confirm("Are you sure you want to exit? Your payment progress will not be saved.")&&g("/host/register")},className:"gap-2 text-muted-foreground hover:text-destructive",children:[r.jsx(p,{className:"h-4 w-4"}),"Exit"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(c,{children:[r.jsx(n,{children:r.jsx(d,{className:"text-lg",children:"Registration Progress"})}),r.jsxs(m,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"mt-1",children:r.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:r.jsx(f,{className:"h-4 w-4 text-primary-foreground"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:"1. Choose Plan"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Select your hosting package."})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"mt-1",children:r.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:r.jsx(f,{className:"h-4 w-4 text-primary-foreground"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:"2. Create Account"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Set up your host profile."})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"mt-1",children:r.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:r.jsx(N,{className:"h-4 w-4 text-primary-foreground"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:"3. Payment"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Connect PayPal & pay."})]})]}),r.jsxs("div",{className:"pt-4",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Progress"}),r.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:r.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:"100%"}})}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:"100%"})]})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsx(c,{children:r.jsxs(m,{className:"p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-lg flex items-center justify-center mx-auto mb-4",children:r.jsx(N,{className:"h-8 w-8 text-primary"})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Complete Payment"}),r.jsx("p",{className:"text-muted-foreground",children:"You'll be redirected to PayPal to complete your payment."})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 border rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),r.jsx("span",{className:"font-medium",children:b.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Billing:"}),r.jsx("span",{className:"font-medium capitalize",children:b.billingCycle})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),r.jsx("span",{className:"font-medium",children:o(b.price)})]}),r.jsx("div",{className:"border-t pt-3 mt-3",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-semibold",children:"Total Due:"}),r.jsx("span",{className:"font-bold text-primary text-lg",children:o(b.price)})]})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"border-2 border-primary rounded-lg p-6 bg-primary/5",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-1",children:"PayPal Checkout"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Secure payment with PayPal."})]}),r.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:r.jsx(f,{className:"h-4 w-4 text-primary-foreground"})})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"You'll login to PayPal and can pay with your PayPal balance, bank account, or credit card."}),y&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("span",{className:"text-sm font-medium",children:"Pay with PayPal"}),r.jsx("span",{className:"text-lg font-bold text-primary",children:o(b.price)})]}),r.jsx(x,{amount:b.price,userId:y.uid,description:`Host subscription: ${b.name} (${b.billingCycle}) - planId=${b.id}`,onSuccess:async()=>{if(y&&b)try{i.success("Payment successful! Your subscription is now active."),setTimeout(()=>{g("/host/dashboard")},1500)}catch(e){i.error("Payment processed but there was an error activating your subscription. Please contact support.")}},redirectUrl:`${window.location.origin}/host/payment/success?planId=${b.id}`}),r.jsx("div",{className:"mt-4 text-center",children:r.jsxs(l,{variant:"outline",className:"w-full",onClick:()=>{i.info("Credit card payment coming soon")},children:[r.jsx(N,{className:"h-4 w-4 mr-2"}),"Debit or Credit Card"]})})]})})]}),r.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Powered by PayPal"}),!1]})]})})})]})]})})};export{g as default};
