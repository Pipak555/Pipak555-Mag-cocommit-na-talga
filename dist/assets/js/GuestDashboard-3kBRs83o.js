const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-DaMaslBo.js","assets/js/react-vendor-Ve3SFwKO.js","assets/js/utils-vendor-DzY7Ay74.js","assets/js/maps-vendor-CYGXCXz5.js","assets/maps-vendor-Dgihpmma.css","assets/js/ui-vendor-D9RGQy8n.js","assets/js/icons-vendor-Dhca6XHc.js","assets/js/firebase-vendor-BC71bXmb.js","assets/index-Bo0Pi70j.css"])))=>i.map(i=>d[i]);
import{u as s,j as e,h as t,k as a,L as r,B as i,C as o,a as l,b as n,d as c,i as d,c as m,e as x,_ as h,t as p}from"./index-DaMaslBo.js";import{u as g,r as u,j}from"./react-vendor-Ve3SFwKO.js";import{N as b}from"./NotificationBell-D2XQODdv.js";import{C as v,h as f,e as w,s as N}from"./category-service-Dj__Y3MP.js";import{V as y}from"./video-background-DTGZ_twq.js";import{T as k}from"./theme-toggle-Djm4W2SX.js";import{L as C}from"./ListingCard-qYDZ01KR.js";import{getRecommendations as B}from"./recommendations-DjJW1acq.js";import{l as S,f as W,h as R}from"./firebase-vendor-BC71bXmb.js";import{A,a as I,b as O,c as z,d as D,e as F,f as P,g as T}from"./alert-dialog-DLw-Qa8s.js";import{h as V}from"./hero-home-D5ap7Mum.js";import{o as _,p as E,q as L,j as Y,k as G,r as H,B as M,H as q,b as U,W as X,s as Z,l as J,n as K}from"./icons-vendor-Dhca6XHc.js";import"./ui-vendor-D9RGQy8n.js";import"./utils-vendor-DzY7Ay74.js";import"./maps-vendor-CYGXCXz5.js";import"./input-D5hloL4G.js";import"./scroll-area-Dps723Uf.js";import"./badge-BSgvUoVt.js";import"./select-CXm8ONYg.js";import"./switch-CSe7-F5W.js";import"./label-B2t2XnWQ.js";import"./dropdown-menu-DVnKNEtJ.js";const Q=()=>{const{user:Q,userRole:$,userProfile:ss,signOut:es,hasRole:ts,addRole:as}=s(),rs=g(),[is,os]=u.useState({favorites:0,wishlist:0,upcomingTrips:0,pastBookings:0,walletBalance:0}),[ls,ns]=u.useState([]),[cs,ds]=u.useState([]),[ms,xs]=u.useState([]),[hs,ps]=u.useState(!0),[gs,us]=u.useState(!1);u.useEffect(()=>{if(!Q||!ts("guest"))return void rs("/guest/login");js();const s=S(W(e,"users",Q.uid),s=>{if(s.exists()){const e=s.data();os(s=>({...s,favorites:e.favorites?.length||0,wishlist:e.wishlist?.length||0,walletBalance:e.walletBalance||0})),ds(e.favorites||[]),xs(e.wishlist||[])}});return()=>{s()}},[Q,$,rs]);const js=async()=>{if(Q){ps(!0);try{const s=await t({guestId:Q.uid}),e=new Date,r=s.filter(s=>new Date(s.checkIn)>=e&&"confirmed"===s.status).length,i=s.filter(s=>{const t=new Date(s.checkOut);return e>t||"completed"===s.status}).length;os(s=>({...s,upcomingTrips:r,pastBookings:i}));const o=await B(Q.uid,6);if(o.length>0){const s=o.map(s=>s.id),e=await a(s),t=o.map(s=>{const t=e.get(s.id);return{...s,averageRating:t?.averageRating||0,reviewCount:t?.reviewCount||0}});ns(t)}else ns(o)}catch(s){}finally{ps(!1)}}},bs=async()=>{ts("host")?rs("/host/dashboard"):rs("/host/policies")};return j.jsxs("div",{className:"min-h-screen bg-background",children:[j.jsx("header",{className:"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-soft",children:j.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center gap-2 sm:gap-3",children:[j.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[j.jsx(r,{size:"sm"}),j.jsx("div",{className:"hidden sm:block p-2 rounded-lg bg-secondary/10",children:j.jsx(_,{className:"w-5 h-5 text-secondary"})}),j.jsxs("div",{className:"min-w-0 flex-1",children:[j.jsxs("h1",{className:"text-base sm:text-lg font-bold truncate",children:["Welcome, ",ss?.fullName||"Guest","!"]}),j.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"Discover your next adventure"})]})]}),j.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[j.jsx(b,{}),j.jsx(k,{}),j.jsxs(i,{variant:"outline",onClick:()=>us(!0),className:"h-9 sm:h-auto text-xs sm:text-sm px-2 sm:px-4 touch-manipulation",children:[j.jsx("span",{className:"hidden sm:inline",children:"Sign Out"}),j.jsx("span",{className:"sm:hidden",children:"Out"})]})]})]})}),j.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[j.jsxs("div",{className:"relative mb-8 rounded-xl overflow-hidden h-64 md:h-80 lg:h-96 shadow-lg",children:[j.jsx(y,{src:"/videos/landing-hero.mp4",overlay:!0,fallbackImage:V}),j.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/60 via-black/40 to-black/60 z-10"}),j.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent z-10"}),j.jsxs("div",{className:"relative z-20 h-full flex flex-col items-center justify-center text-center px-6",children:[j.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-white drop-shadow-2xl",children:"Discover Your Next Adventure"}),j.jsxs("p",{className:"text-lg md:text-xl text-white/90 mb-6 max-w-2xl drop-shadow-lg",children:["Welcome back, ",ss?.fullName||"Guest","! Ready to explore amazing places?"]}),j.jsx(i,{size:"lg",className:"h-12 px-8 text-lg bg-primary hover:bg-primary/90 shadow-2xl hover:shadow-2xl hover:scale-105 transition-all",onClick:()=>rs("/guest/browse"),children:"Browse All Listings"})]})]}),j.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3 md:gap-4 lg:gap-6 mb-4 sm:mb-6 md:mb-8 "+(ts("host")?"lg:grid-cols-5":"lg:grid-cols-6"),children:[j.jsxs(o,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer hover:scale-105 active:scale-100",onClick:()=>rs("/guest/favorites"),children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-secondary to-accent"}),j.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:j.jsxs(n,{className:"text-xs sm:text-sm font-medium text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[j.jsx(E,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Favorites"]})}),j.jsx(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:j.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-br from-primary to-primary-glow bg-clip-text text-transparent",children:is.favorites})})]}),j.jsxs(o,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer hover:scale-105 active:scale-100",onClick:()=>rs("/guest/wishlist"),children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-blue-400 to-blue-300"}),j.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:j.jsxs(n,{className:"text-xs sm:text-sm font-medium text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[j.jsx(L,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Wishlist"]})}),j.jsx(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:j.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-br from-blue-500 to-blue-600 bg-clip-text text-transparent",children:is.wishlist})})]}),j.jsxs(o,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer",onClick:()=>rs("/guest/bookings?filter=upcoming"),children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-secondary via-primary to-accent"}),j.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:j.jsxs(n,{className:"text-xs sm:text-sm font-medium text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[j.jsx(Y,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Upcoming Trips"]})}),j.jsx(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:j.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-br from-secondary to-secondary/80 bg-clip-text text-transparent",children:is.upcomingTrips})})]}),j.jsxs(o,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer",onClick:()=>rs("/guest/bookings?filter=past"),children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent via-primary to-secondary"}),j.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:j.jsxs(n,{className:"text-xs sm:text-sm font-medium text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[j.jsx(G,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Past Bookings"]})}),j.jsx(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:j.jsx("div",{className:"text-2xl sm:text-3xl font-bold",children:is.pastBookings})})]}),j.jsxs(o,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group",children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-accent via-green-500 to-green-600"}),j.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:j.jsxs(n,{className:"text-xs sm:text-sm font-medium text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[j.jsx(H,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Wallet Balance"]})}),j.jsx(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:j.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-accent",children:d(is.walletBalance)})})]}),!ts("host")&&j.jsxs(o,{className:"relative overflow-hidden border-2 border-secondary/30 shadow-lg hover:shadow-xl transition-all duration-300 group cursor-pointer bg-gradient-to-br from-secondary/5 to-secondary/10",onClick:bs,children:[j.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-secondary via-secondary/80 to-secondary/60"}),j.jsx(l,{className:"pb-3",children:j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(M,{className:"w-5 h-5 text-secondary"}),j.jsx(n,{className:"text-sm font-medium text-secondary uppercase tracking-wide",children:"Become a Host"})]})}),j.jsxs(c,{children:[j.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Start earning by hosting your property"}),j.jsx(i,{variant:"secondary",className:"w-full",onClick:s=>{s.stopPropagation(),bs()},children:"Get Started"})]})]})]}),j.jsxs("div",{className:"mb-8",children:[j.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Browse Categories"}),j.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[j.jsx(v,{videoSrc:"/videos/category-home.mp4",fallbackImage:f,icon:q,title:"Homes",description:"Find your perfect stay",href:"/guest/browse?category=home",colorClass:"primary"}),j.jsx(v,{videoSrc:"/videos/category-experience.mp4",fallbackImage:w,icon:U,title:"Experiences",description:"Discover unique activities",href:"/guest/browse?category=experience",colorClass:"secondary"}),j.jsx(v,{videoSrc:"/videos/category-service.mp4",fallbackImage:N,icon:X,title:"Services",description:"Professional assistance",href:"/guest/browse?category=service",colorClass:"accent"})]})]}),ls.length>0&&j.jsxs("div",{className:"mb-8",children:[j.jsxs("div",{className:"flex items-center justify-between mb-6",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(Z,{className:"w-6 h-6 text-primary"}),j.jsx("h3",{className:"text-2xl font-bold",children:"Recommended for You"})]}),j.jsx(i,{variant:"outline",onClick:()=>rs("/guest/browse"),children:"View All"})]}),j.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 items-stretch",children:ls.slice(0,3).map(s=>j.jsx(C,{listing:s,onView:()=>rs("/guest/listing/"+s.id),onFavorite:()=>(async s=>{if(Q)try{const e=await p(Q.uid,s,cs);ds(e),x.success(e.includes(s)?"Added to favorites":"Removed from favorites")}catch(e){x.error("Failed to update favorites")}else x.error("Please login to add favorites")})(s.id),onWishlist:()=>(async s=>{if(Q)try{const{toggleWishlist:t}=await h(async()=>{const{toggleWishlist:s}=await import("./index-DaMaslBo.js").then(s=>s.W);return{toggleWishlist:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),a=await R(W(e,"users",Q.uid)),r=a.exists()&&a.data().wishlist||[],i=await t(Q.uid,s,r);xs(i),x.success(i.includes(s)?"Added to wishlist":"Removed from wishlist")}catch(t){x.error("Failed to update wishlist")}else x.error("Please login to add to wishlist")})(s.id),isFavorite:cs.includes(s.id),isInWishlist:ms.includes(s.id)},s.id))})]}),j.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-5 gap-6",children:[j.jsx(o,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>rs("/guest/favorites"),children:j.jsxs(l,{children:[j.jsx(E,{className:"w-8 h-8 text-primary mb-2"}),j.jsx(n,{children:"Favorites"}),j.jsx(m,{children:"Your saved listings"})]})}),j.jsx(o,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>rs("/guest/bookings"),children:j.jsxs(l,{children:[j.jsx(Y,{className:"w-8 h-8 text-secondary mb-2"}),j.jsx(n,{children:"My Bookings"}),j.jsx(m,{children:"View your trips"})]})}),j.jsx(o,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>rs("/guest/messages"),children:j.jsxs(l,{children:[j.jsx(J,{className:"w-8 h-8 text-primary mb-2"}),j.jsx(n,{children:"Messages"}),j.jsx(m,{children:"View your conversations"})]})}),j.jsx(o,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>rs("/guest/wallet"),children:j.jsxs(l,{children:[j.jsx(H,{className:"w-8 h-8 text-accent mb-2"}),j.jsx(n,{children:"E-Wallet"}),j.jsx(m,{children:"Manage your balance"})]})}),j.jsx(o,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>rs("/guest/settings"),children:j.jsxs(l,{children:[j.jsx(K,{className:"w-8 h-8 text-muted-foreground mb-2"}),j.jsx(n,{children:"Settings"}),j.jsx(m,{children:"Account preferences"})]})})]})]}),j.jsx(A,{open:gs,onOpenChange:us,children:j.jsxs(I,{children:[j.jsxs(O,{children:[j.jsx(z,{children:"Sign Out"}),j.jsx(D,{children:"Are you sure you want to sign out? You'll need to sign in again to access your account."})]}),j.jsxs(F,{children:[j.jsx(P,{children:"Cancel"}),j.jsx(T,{onClick:async()=>{await es(),rs("/")},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})})]})};export{Q as default};
