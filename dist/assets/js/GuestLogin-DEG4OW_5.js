import{r as e,u as s,k as a,j as t,F as l,L as r}from"./react-vendor-DAkY0NgE.js";import{t as o}from"./form-vendor-ztDZwZ2b.js";import{u as i,B as n,L as c,C as d,a as m,b as x,c as u,d as h,e as j,f as p}from"./index-BbvEjZj9.js";import{I as f}from"./input-C1fDyqub.js";import{T as g,a as N,b,c as y}from"./tabs-yUgLCPKD.js";import{V as v}from"./video-background-ClFV52Pv.js";import{F as w,a as k,b as S,c as P,d as C,e as G,l as F,s as I}from"./validation-CGxThRcy.js";import{T as E}from"./theme-toggle-C3pYvPx7.js";import{s as V,a as z}from"./sanitize-GsD2yBhu.js";import{G as A,y as U}from"./firebase-vendor-CvoiOdvz.js";import{A as L,U as M,M as W,c as B,E as O,d as T}from"./icons-vendor-3zhgXMYa.js";import"./maps-vendor-CYGXCXz5.js";import"./utils-vendor-yBsXXcRr.js";import"./ui-vendor-CZx_xpmK.js";import"./label-kBNwlYyC.js";import"./dropdown-menu-BRbzCJvi.js";const _=()=>{const[_,D]=e.useState(!1),[H,J]=e.useState(!1),[q,K]=e.useState(!1),[R,Q]=e.useState(!1),[X,Y]=e.useState(null),{signIn:Z,signUp:$,signInWithGoogle:ee}=i(),se=s(),ae=a({resolver:o(F),defaultValues:{email:"",password:""}}),te=a({resolver:o(I),defaultValues:{fullName:"",email:"",password:"",confirmPassword:""}});return t.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[t.jsx(v,{src:"/videos/landing-hero.mp4",overlay:!0,className:"z-0"}),t.jsx("header",{className:"relative z-10 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:t.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(n,{variant:"ghost",onClick:()=>se("/"),children:[t.jsx(L,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),t.jsx(c,{size:"sm"})]}),t.jsx(E,{})]})}),t.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center p-6",children:t.jsxs(d,{className:"w-full max-w-md shadow-2xl border-border/50 bg-card/95 backdrop-blur-md",children:[t.jsxs(m,{className:"space-y-4 text-center pb-8",children:[t.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-primary/10 flex items-center justify-center",children:t.jsx(M,{className:"w-8 h-8 text-primary"})}),t.jsxs("div",{children:[t.jsx(x,{className:"text-3xl font-bold",children:"Guest Portal"}),t.jsx(u,{className:"text-base mt-2",children:"Start your adventure today"})]})]}),t.jsxs(h,{children:[t.jsxs(g,{defaultValue:"signin",className:"w-full",children:[t.jsxs(N,{className:"grid w-full grid-cols-2 mb-8",children:[t.jsx(b,{value:"signin",className:"text-base",children:"Sign In"}),t.jsx(b,{value:"signup",className:"text-base",children:"Sign Up"})]}),t.jsx(y,{value:"signin",children:t.jsx(w,{...ae,children:t.jsxs("form",{onSubmit:ae.handleSubmit(async e=>{K(!0);try{const s=V(e.email),a=z(e.password);await Z(s,a,"guest"),j.success("Welcome back!"),se("/guest/dashboard")}catch(s){if("EMAIL_NOT_VERIFIED"===s.message)return j.info("Please verify your email address to continue."),void se("/verify-otp");j.error(s.message||"Unable to sign in. Please check your email and password, then try again.")}finally{K(!1)}}),className:"space-y-6",children:[t.jsx(k,{control:ae.control,name:"email",render:({field:e})=>t.jsxs(S,{children:[t.jsx(P,{className:"text-base",children:"Email"}),t.jsx(C,{children:t.jsxs("div",{className:"relative",children:[t.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(f,{type:"email",placeholder:"guest@example.com",className:"pl-10 h-12",...e})]})}),t.jsx(G,{})]})}),t.jsx(k,{control:ae.control,name:"password",render:({field:e})=>t.jsxs(S,{children:[t.jsx(P,{className:"text-base",children:"Password"}),t.jsx(C,{children:t.jsxs("div",{className:"relative",children:[t.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(f,{type:_?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12",...e}),t.jsx("button",{type:"button",onClick:()=>D(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:_?t.jsx(O,{className:"h-5 w-5"}):t.jsx(T,{className:"h-5 w-5"})})]})}),t.jsx(G,{})]})}),t.jsx(n,{type:"submit",className:"w-full h-12 text-base",disabled:q,children:q?"Signing in...":"Sign In"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t"})}),t.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:t.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),t.jsx(n,{type:"button",variant:"outline",className:"w-full h-12 text-base",onClick:async()=>{if(!R&&!q){Q(!0);try{await ee("guest"),j.success("Welcome!"),se("/guest/dashboard")}catch(e){e.message?.includes("not registered as a guest")||e.message?.includes("sign up for a guest account first")?j.info("Please complete your guest account registration"):j.error(e.message||"Failed to sign in with Google")}finally{Q(!1)}}},disabled:R||q,children:R?"Signing in...":t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"h-5 w-5 mr-2"}),"Sign in with Google"]})})]})})}),t.jsx(y,{value:"signup",children:t.jsx(w,{...te,children:t.jsxs("form",{onSubmit:te.handleSubmit(async e=>{K(!0);try{const s=z(e.fullName),a=V(e.email),t=z(e.password);await $(a,t,s,"guest"),j.success("Account created! Please check your email to verify your account."),se("/verification-pending")}catch(s){j.error(s.message||"Unable to create account. Please check your information and try again.")}finally{K(!1)}}),className:"space-y-6",children:[t.jsx(k,{control:te.control,name:"fullName",render:({field:e})=>t.jsxs(S,{children:[t.jsx(P,{className:"text-base",children:"Full Name"}),t.jsx(C,{children:t.jsxs("div",{className:"relative",children:[t.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(f,{type:"text",placeholder:"John Doe",className:"pl-10 h-12",...e})]})}),t.jsx(G,{})]})}),t.jsx(k,{control:te.control,name:"email",render:({field:e})=>t.jsxs(S,{children:[t.jsx(P,{className:"text-base",children:"Email"}),t.jsx(C,{children:t.jsxs("div",{className:"relative",children:[t.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(f,{type:"email",placeholder:"guest@example.com",className:"pl-10 h-12",...e})]})}),t.jsx(G,{})]})}),t.jsx(k,{control:te.control,name:"password",render:({field:e})=>t.jsxs(S,{children:[t.jsx(P,{className:"text-base",children:"Password"}),t.jsx(C,{children:t.jsxs("div",{className:"relative",children:[t.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(f,{type:_?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12",...e}),t.jsx("button",{type:"button",onClick:()=>D(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:_?t.jsx(O,{className:"h-5 w-5"}):t.jsx(T,{className:"h-5 w-5"})})]})}),t.jsx(G,{}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Must contain uppercase, lowercase, and number"})]})}),t.jsx(k,{control:te.control,name:"confirmPassword",render:({field:e})=>t.jsxs(S,{children:[t.jsx(P,{className:"text-base",children:"Confirm Password"}),t.jsx(C,{children:t.jsxs("div",{className:"relative",children:[t.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t.jsx(f,{type:H?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12",...e}),t.jsx("button",{type:"button",onClick:()=>J(!H),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:H?t.jsx(O,{className:"h-5 w-5"}):t.jsx(T,{className:"h-5 w-5"})})]})}),t.jsx(G,{})]})}),t.jsx(n,{type:"submit",className:"w-full h-12 text-base",disabled:q,children:q?"Creating account...":"Create Account"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t"})}),t.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:t.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),t.jsx(n,{type:"button",variant:"outline",className:"w-full h-12 text-base",onClick:async()=>{if(!R&&!q){Q(!0);try{const e=new A;e.setCustomParameters({prompt:"select_account"});const s=(await U(p,e)).user;te.setValue("email",s.email||""),te.setValue("fullName",s.displayName||s.email?.split("@")[0]||""),Y({email:s.email||"",fullName:s.displayName||s.email?.split("@")[0]||""}),j.success("Form pre-filled with your Google account! Please set a password to complete registration.")}catch(e){"auth/popup-closed-by-user"!==e.code&&"auth/cancelled-popup-request"!==e.code&&j.error(e.message||"Failed to get Google account info")}finally{Q(!1)}}},disabled:R||q,children:R?"Getting info...":t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"h-5 w-5 mr-2"}),"Autofill with Google"]})})]})})})]}),t.jsx("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:t.jsxs("p",{children:["Want to host? ",t.jsx(r,{to:"/host/login",className:"text-primary hover:underline font-medium",children:"Become a Host"})]})})]})]})})]})};export{_ as default};
