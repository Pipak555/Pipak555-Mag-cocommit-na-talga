import{l as e,r as s,u as t,j as a}from"./react-vendor-DcULH_Au.js";import{u as r,e as i,B as o,C as n,a as c,b as l,c as d,d as m}from"./index-F95ZJi6y.js";import{T as u}from"./theme-toggle-CJqSL7LK.js";import{A as f,R as x,g as p,M as h}from"./icons-vendor-D18eSOBA.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-C9dhA_ey.js";import"./firebase-vendor-BtzXZj7S.js";import"./dropdown-menu-C4xHPRIa.js";const b=()=>{const[b]=e(),[g,j]=s.useState(!1),[y,v]=s.useState("verifying"),{verifyEmail:w,sendVerificationEmail:N,user:k,userRole:E}=r(),T=t(),C=b.get("oobCode"),B=b.get("mode"),V=s.useCallback(async()=>{if(C){j(!0);try{await w(C),v("success"),i.success("Email verified successfully!")}catch(e){v("error"),i.error(e.message||"Failed to verify email")}finally{j(!1)}}},[C,w]);s.useEffect(()=>{C&&"verifyEmail"===B?V():v("error")},[C,B,V]),s.useEffect(()=>{"success"===y&&(async()=>{const e=b.get("continueUrl");if(e)return void setTimeout(()=>T(e),1200);let s=0;const t=async()=>{if(s++,k){if(E)return void setTimeout("guest"===E?()=>T("/guest/dashboard"):"host"===E?()=>T("/host/dashboard"):"admin"===E?()=>T("/admin/dashboard"):()=>T("/"),800);if(5>s)return void setTimeout(t,300)}5>s&&k||setTimeout(()=>T("/guest/login"),800)};setTimeout(t,500)})()},[y,k,E,T,b]);const R="verifying"===y?{icon:a.jsx(x,{className:"w-16 h-16 text-primary animate-spin"}),title:"Verifying Your Email...",description:"Please wait while we verify your email address.",showButton:!1}:"success"===y?{icon:a.jsx(p,{className:"w-16 h-16 text-green-500"}),title:"Email Verified Successfully!",description:"Your email has been verified. Redirecting you now...",showButton:!1}:{icon:a.jsx(h,{className:"w-16 h-16 text-red-500"}),title:"Verification Failed",description:"We couldn't verify your email. The link may have expired or been used already. Please request a new verification email.",showButton:!0,buttonText:"Resend Verification Email",buttonAction:async()=>{j(!0);try{await N(),i.success("Verification email sent! Check your inbox.")}catch(e){i.error(e.message||"Failed to send verification email")}finally{j(!1)}}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex flex-col",children:[a.jsx("header",{className:"border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:a.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[a.jsxs(o,{variant:"ghost",onClick:()=>T("/"),children:[a.jsx(f,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),a.jsx(u,{})]})}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:a.jsxs(n,{className:"w-full max-w-md shadow-2xl border-border/50 bg-card/95 backdrop-blur",children:[a.jsxs(c,{className:"space-y-6 text-center pb-8 pt-12",children:[a.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-primary/10 to-secondary/10 flex items-center justify-center",children:R.icon}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(l,{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 via-blue-500 to-green-500 bg-clip-text text-transparent",children:R.title}),a.jsx(d,{className:"text-base leading-relaxed",children:R.description})]})]}),a.jsxs(m,{className:"space-y-6 pb-12",children:[R.showButton&&a.jsx(o,{onClick:R.buttonAction,className:"w-full h-12 text-base font-semibold",disabled:g,size:"lg",children:g?a.jsxs(a.Fragment,{children:[a.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):R.buttonText}),"success"===y&&a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-border to-transparent"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome to our platform! We're excited to have you on board."})]}),"error"===y&&a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-border to-transparent"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Need help? Contact our support team for assistance."}),a.jsx(o,{variant:"outline",onClick:()=>T("/"),className:"w-full",children:"Return to Home"})]})]})]})})]})};export{b as default};
