const t=async(t,a)=>{const o=new FormData;o.append("file",t),o.append("upload_preset","mojo_dojo_unsigned"),a&&o.append("folder",a);try{const t=await fetch("https://api.cloudinary.com/v1_1/dpctmlqay/image/upload",{method:"POST",body:o});if(!t.ok){const a=await t.json().catch(()=>({}));throw Error(a.error?.message||`Cloudinary upload failed: ${t.status} ${t.statusText}`)}return(await t.json()).secure_url}catch(e){throw Error("Failed to upload image: "+(e.message||"Unknown error"))}},a=async(a,o,e)=>{const r="listings/"+o,n=[],s=a.length;for(let c=0;c<a.length;c++)try{const o=await t(a[c],r);n.push(o),e&&e(Math.round((c+1)/s*100))}catch(d){throw Error(`Failed to upload image ${c+1}: ${d.message}`)}return n};export{t as uploadImageToCloudinary,a as uploadListingImages};
