import{r as e,u as s,k as t,j as a,F as r,L as i}from"./react-vendor-BMVo5gto.js";import{t as o}from"./form-vendor-DoCI05P1.js";import{u as l,B as n,L as m,C as c,a as d,b as x,c as u,d as h,e as p,f}from"./index-Bl4WVUm9.js";import{I as g}from"./input-BUMXIaDj.js";import{T as j,a as b,b as y,c as w}from"./tabs-DCcHsf5T.js";import{V as v}from"./video-background-0x67CGr6.js";import{F as N,a as k,b as S,c as C,d as P,e as z,l as F,s as V}from"./validation-CuaTRHoF.js";import{T as G}from"./theme-toggle-Cc0KLt9y.js";import{s as I,a as E}from"./sanitize-GsD2yBhu.js";import{G as U,y as W}from"./firebase-vendor-BtzXZj7S.js";import{A,U as T,M as B,c as L,E as M,d as O}from"./icons-vendor-BQMxNFbQ.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-Dbp4DHG_.js";import"./label-CNgDwY3J.js";import"./dropdown-menu-CmwzabuV.js";const Z=()=>{const[Z,_]=e.useState(!1),[D,H]=e.useState(!1),[R,q]=e.useState(!1),[J,X]=e.useState(!1),[Y,K]=e.useState(null),[Q,$]=e.useState("signin"),{signIn:ee,signUp:se,signInWithGoogle:te}=l(),ae=s(),re=t({resolver:o(F),defaultValues:{email:"",password:""}}),ie=t({resolver:o(V),defaultValues:{fullName:"",email:"",password:"",confirmPassword:""}});return a.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[a.jsx("div",{className:"fixed inset-0 z-0",style:{width:"100vw",height:"100vh",transform:"translateZ(0)",willChange:"auto",pointerEvents:"none"},children:a.jsx(v,{src:"/videos/landing-hero.mp4",overlay:!0,className:"w-full h-full",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"scale(1) translateZ(0)",willChange:"auto"}})}),a.jsx("header",{className:"relative z-10 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:a.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(n,{variant:"ghost",onClick:()=>ae("/"),children:[a.jsx(A,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),a.jsx(m,{size:"sm"})]}),a.jsx(G,{})]})}),a.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center p-4 sm:p-6",children:a.jsxs(c,{className:"w-full max-w-md shadow-2xl border-2 border-primary/20 bg-card/95 backdrop-blur-md relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 pointer-events-none"}),a.jsxs(d,{className:"space-y-3 sm:space-y-4 text-center pb-6 sm:pb-8 px-4 sm:px-6 pt-4 sm:pt-6 relative z-10",children:[a.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto rounded-3xl bg-gradient-to-br from-primary via-primary/80 to-secondary/60 flex items-center justify-center shadow-lg ring-4 ring-primary/20 animate-in fade-in zoom-in duration-500",children:a.jsx(T,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(x,{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Guest Portal"}),a.jsx(u,{className:"text-sm sm:text-base mt-2 font-medium text-foreground/80 dark:text-muted-foreground",children:"Start your adventure today"})]})]}),a.jsxs(h,{className:"relative z-10 px-4 sm:px-6 pb-4 sm:pb-6",children:[a.jsxs(j,{defaultValue:"signin",onValueChange:e=>$(e),className:"w-full",children:[a.jsxs(b,{className:"grid w-full grid-cols-2 mb-6 sm:mb-8 bg-muted/50 p-1 rounded-xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-y-1 bg-gradient-to-r from-primary to-primary/80 rounded-lg transition-all duration-300 ease-in-out",style:{left:"signin"===Q?"4px":"50%",right:"signin"===Q?"50%":"4px",width:"calc(50% - 4px)"}}),a.jsx(y,{value:"signin",className:"text-sm sm:text-base font-semibold text-foreground/90 dark:text-foreground data-[state=active]:bg-transparent data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-300 ease-in-out relative z-10 h-10 sm:h-auto touch-manipulation",children:"Sign In"}),a.jsx(y,{value:"signup",className:"text-sm sm:text-base font-semibold text-foreground/90 dark:text-foreground data-[state=active]:bg-transparent data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-300 ease-in-out relative z-10 h-10 sm:h-auto touch-manipulation",children:"Sign Up"})]}),a.jsx(w,{value:"signin",children:a.jsx(N,{...re,children:a.jsxs("form",{onSubmit:re.handleSubmit(async e=>{q(!0);try{const s=I(e.email),t=E(e.password);await ee(s,t,"guest"),p.success("Welcome back!"),ae("/guest/dashboard")}catch(s){if("EMAIL_NOT_VERIFIED"===s.message)return p.info("Please verify your email address to continue."),void ae("/verify-otp");p.error(s.message||"Unable to sign in. Please check your email and password, then try again.")}finally{q(!1)}}),className:"space-y-4 sm:space-y-6",children:[a.jsx(k,{control:re.control,name:"email",render:({field:e})=>a.jsxs(S,{children:[a.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Email"}),a.jsx(P,{children:a.jsxs("div",{className:"relative group",children:[a.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(g,{type:"email",placeholder:"guest@example.com",className:"pl-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e})]})}),a.jsx(z,{})]})}),a.jsx(k,{control:re.control,name:"password",render:({field:e})=>a.jsxs(S,{children:[a.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Password"}),a.jsx(P,{children:a.jsxs("div",{className:"relative group",children:[a.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(g,{type:Z?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e}),a.jsx("button",{type:"button",onClick:()=>_(!Z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors h-8 w-8 sm:h-auto sm:w-auto flex items-center justify-center touch-manipulation",children:Z?a.jsx(M,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(O,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),a.jsx(z,{})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx(n,{type:"button",variant:"link",onClick:()=>ae("/forgot-password",{state:{userType:"guest"}}),className:"text-sm text-primary hover:text-primary/80 p-0 h-auto font-semibold",children:"Forgot Password?"})}),a.jsx(n,{type:"submit",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300 touch-manipulation",disabled:R,children:R?"Signing in...":"Sign In"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-card px-2 text-foreground/70 dark:text-muted-foreground",children:"Or continue with"})})]}),a.jsx(n,{type:"button",variant:"outline",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold border-2 hover:bg-muted/50 hover:border-primary/50 transition-all duration-300 touch-manipulation",onClick:async()=>{if(!J&&!R){X(!0);try{await te("guest"),p.success("Welcome!"),ae("/guest/dashboard")}catch(e){e.message?.includes("not registered as a guest")||e.message?.includes("sign up for a guest account first")?p.info("Please complete your guest account registration"):p.error(e.message||"Failed to sign in with Google")}finally{X(!1)}}},disabled:J||R,children:J?"Signing in...":a.jsxs(a.Fragment,{children:[a.jsx(r,{className:"h-5 w-5 mr-2"}),"Sign in with Google"]})})]})})}),a.jsx(w,{value:"signup",children:a.jsx(N,{...ie,children:a.jsxs("form",{onSubmit:ie.handleSubmit(async e=>{q(!0);try{const s=E(e.fullName),t=I(e.email),a=E(e.password);await se(t,a,s,"guest"),p.success("Account created! Please check your email to verify your account."),ae("/verification-pending")}catch(s){p.error(s.message||"Unable to create account. Please check your information and try again.")}finally{q(!1)}}),className:"space-y-4 sm:space-y-6",children:[a.jsx(k,{control:ie.control,name:"fullName",render:({field:e})=>a.jsxs(S,{children:[a.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Full Name"}),a.jsx(P,{children:a.jsxs("div",{className:"relative group",children:[a.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(g,{type:"text",placeholder:"John Doe",className:"pl-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e})]})}),a.jsx(z,{})]})}),a.jsx(k,{control:ie.control,name:"email",render:({field:e})=>a.jsxs(S,{children:[a.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Email"}),a.jsx(P,{children:a.jsxs("div",{className:"relative group",children:[a.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(g,{type:"email",placeholder:"guest@example.com",className:"pl-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e})]})}),a.jsx(z,{})]})}),a.jsx(k,{control:ie.control,name:"password",render:({field:e})=>a.jsxs(S,{children:[a.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Password"}),a.jsx(P,{children:a.jsxs("div",{className:"relative group",children:[a.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(g,{type:Z?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e}),a.jsx("button",{type:"button",onClick:()=>_(!Z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors h-8 w-8 sm:h-auto sm:w-auto flex items-center justify-center touch-manipulation",children:Z?a.jsx(M,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(O,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),a.jsx(z,{}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]})}),a.jsx(k,{control:ie.control,name:"confirmPassword",render:({field:e})=>a.jsxs(S,{children:[a.jsx(C,{className:"text-sm sm:text-base font-semibold",children:"Confirm Password"}),a.jsx(P,{children:a.jsxs("div",{className:"relative group",children:[a.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(g,{type:D?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-11 sm:h-12 border-2 transition-all text-base sm:text-sm",...e}),a.jsx("button",{type:"button",onClick:()=>H(!D),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors h-8 w-8 sm:h-auto sm:w-auto flex items-center justify-center touch-manipulation",children:D?a.jsx(M,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(O,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})}),a.jsx(z,{})]})}),a.jsx(n,{type:"submit",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300 touch-manipulation",disabled:R,children:R?"Creating account...":"Create Account"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-card px-2 text-foreground/70 dark:text-muted-foreground",children:"Or continue with"})})]}),a.jsx(n,{type:"button",variant:"outline",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-semibold border-2 hover:bg-muted/50 hover:border-primary/50 transition-all duration-300 touch-manipulation",onClick:async()=>{if(!J&&!R){X(!0);try{const e=new U;e.setCustomParameters({prompt:"select_account"});const s=(await W(f,e)).user;ie.setValue("email",s.email||""),ie.setValue("fullName",s.displayName||s.email?.split("@")[0]||""),K({email:s.email||"",fullName:s.displayName||s.email?.split("@")[0]||""}),p.success("Signed up with Google! Please set a password to complete registration.")}catch(e){"auth/popup-closed-by-user"!==e.code&&"auth/cancelled-popup-request"!==e.code&&p.error(e.message||"Failed to get Google account info")}finally{X(!1)}}},disabled:J||R,children:J?"Signing up...":a.jsxs(a.Fragment,{children:[a.jsx(r,{className:"h-5 w-5 mr-2"}),"Sign up with Google"]})})]})})})]}),a.jsx("div",{className:"mt-8 text-center text-sm text-foreground/70 dark:text-muted-foreground",children:a.jsxs("p",{children:["Want to host? ",a.jsx(i,{to:"/host/login",className:"text-primary hover:text-primary/80 hover:underline font-semibold transition-colors",children:"Become a Host"})]})})]})]})})]})};export{Z as default};
