import{u as e,r as s,j as a}from"./react-vendor-BMVo5gto.js";import{o as l,e as i,B as t,v as r,i as n,y as o,m as c}from"./index-BbQqfVom.js";import{L as d}from"./ListingCard-D16etiEA.js";import{A as m,a as h,b as x,c as g,d as p,e as u,f as j,g as f}from"./alert-dialog-Biqv9se3.js";import{D as b,a as v,b as N,c as w,d as y}from"./dialog-COz4G8V2.js";import{B as k}from"./badge-0vFpitRp.js";import{S as C}from"./separator-DgEd-SMQ.js";import{A,$ as z,a0 as S,a1 as L,o as F,M as I,u as P,m as R,U as $,w as B,x as E,H as O,X as U}from"./icons-vendor-D1YpcxsO.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-Dbp4DHG_.js";import"./firebase-vendor-BtzXZj7S.js";const D=()=>{const D=e(),[T,G]=s.useState([]),[H,M]=s.useState(!0),[V,X]=s.useState(!1),[q,J]=s.useState(!1),[K,Q]=s.useState(null),[W,Y]=s.useState(null),[Z,_]=s.useState(null),[ee,se]=s.useState(!1),[ae,le]=s.useState(!1),[ie,te]=s.useState(0),[re,ne]=s.useState(!1),[oe,ce]=s.useState(0);s.useEffect(()=>{de()},[]);const de=async()=>{try{M(!0);const e=await l({status:"pending"});G(e)}catch(e){i.error("Failed to load pending listings: "+(e.message||"Unknown error"))}finally{M(!1)}},me=e=>{Q(e),X(!0)},he=e=>{Q(e),J(!0)};return a.jsxs("div",{className:"min-h-screen bg-background p-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(t,{variant:"ghost",onClick:()=>D("/admin/dashboard"),className:"mb-6",children:[a.jsx(A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Review Pending Listings"}),H?a.jsx(r,{}):0===T.length?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No pending listings"})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(e=>a.jsxs("div",{className:"cursor-pointer",onClick:()=>(async e=>{if(Y(e),se(!0),te(0),le(!0),e.hostId)try{const s=await o(e.hostId);_(s?{fullName:s.fullName||"N/A",email:s.email||"N/A"}:{fullName:"N/A",email:"N/A"})}catch(s){_({fullName:"Error loading",email:"Error loading"})}finally{le(!1)}else _({fullName:"N/A",email:"N/A"}),le(!1)})(e),children:[a.jsx(d,{listing:e}),a.jsxs("div",{className:"mt-2 flex gap-2",onClick:e=>e.stopPropagation(),children:[a.jsx(t,{variant:"default",size:"sm",className:"flex-1",onClick:()=>me(e.id),children:"Approve"}),a.jsx(t,{variant:"destructive",size:"sm",className:"flex-1",onClick:()=>he(e.id),children:"Reject"})]})]},e.id))})]}),a.jsx(m,{open:V,onOpenChange:X,children:a.jsxs(h,{children:[a.jsxs(x,{children:[a.jsx(g,{children:"Approve Listing?"}),a.jsx(p,{children:"Are you sure you want to approve this listing? It will be published and visible to all users."})]}),a.jsxs(u,{children:[a.jsx(j,{onClick:()=>Q(null),children:"Cancel"}),a.jsx(f,{onClick:async()=>{if(K)try{await c(K,{status:"approved"}),i.success("Listing approved"),de(),Q(null)}catch(e){i.error("Failed to approve listing: "+(e.message||"Unknown error"))}finally{X(!1)}},children:"Approve"})]})]})}),a.jsx(m,{open:q,onOpenChange:J,children:a.jsxs(h,{children:[a.jsxs(x,{children:[a.jsx(g,{children:"Reject Listing?"}),a.jsx(p,{children:"Are you sure you want to reject this listing? The host will be notified and the listing will not be published."})]}),a.jsxs(u,{children:[a.jsx(j,{onClick:()=>Q(null),children:"Cancel"}),a.jsx(f,{onClick:async()=>{if(K)try{await c(K,{status:"rejected"}),i.success("Listing rejected"),de(),Q(null)}catch(e){i.error("Failed to reject listing: "+(e.message||"Unknown error"))}finally{J(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Reject"})]})]})}),a.jsx(b,{open:ee,onOpenChange:se,children:a.jsxs(v,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(N,{children:[a.jsx(w,{className:"text-2xl",children:W?.title}),a.jsx(y,{children:"Review full listing details and host information"})]}),W&&a.jsxs("div",{className:"space-y-6",children:[W.images&&W.images.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative w-full h-[400px] rounded-lg overflow-hidden group bg-muted cursor-pointer",onClick:()=>{ce(ie),ne(!0)},children:[a.jsx("div",{className:"flex transition-transform duration-500 ease-in-out h-full",style:{transform:`translateX(-${100*ie}%)`},children:W.images.map((e,s)=>a.jsx("div",{className:"min-w-full h-full flex-shrink-0 relative",children:a.jsx("img",{src:e||"/placeholder.svg",alt:`${W.title} - Image ${s+1}`,className:"w-full h-full object-cover"})},s))}),W.images.length>1&&a.jsxs(a.Fragment,{children:[a.jsx(t,{variant:"secondary",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 opacity-80 hover:opacity-100 transition-opacity bg-black/70 hover:bg-black/90 text-white border-none z-10 shadow-lg backdrop-blur-sm h-10 w-10",onClick:e=>{e.stopPropagation(),te(e=>0===e?W.images.length-1:e-1)},"aria-label":"Previous image",children:a.jsx(z,{className:"h-5 w-5"})}),a.jsx(t,{variant:"secondary",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-80 hover:opacity-100 transition-opacity bg-black/70 hover:bg-black/90 text-white border-none z-10 shadow-lg backdrop-blur-sm h-10 w-10",onClick:e=>{e.stopPropagation(),te(e=>e===W.images.length-1?0:e+1)},"aria-label":"Next image",children:a.jsx(S,{className:"h-5 w-5"})}),a.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-sm z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx(L,{className:"h-3 w-3 inline mr-1"}),"Click to zoom"]}),a.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white px-4 py-1.5 rounded-full text-sm font-medium backdrop-blur-sm z-10",children:[ie+1," / ",W.images.length]})]})]}),W.images.length>1&&a.jsx("div",{className:"relative",children:a.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2 snap-x snap-mandatory",children:W.images.map((e,s)=>a.jsx("button",{onClick:()=>te(s),className:"relative flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all snap-start "+(ie===s?"border-primary ring-2 ring-primary/50 scale-105":"border-transparent hover:border-border opacity-70 hover:opacity-100"),children:a.jsx("img",{src:e,alt:"Thumbnail "+(s+1),className:"w-full h-full object-cover"})},s))})})]}),a.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[a.jsx(F,{className:"h-5 w-5"}),"Host Information"]}),ae?a.jsx("p",{className:"text-muted-foreground",children:"Loading host information..."}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(F,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium",children:"Name:"}),a.jsx("span",{children:Z?.fullName||"N/A"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium",children:"Email:"}),a.jsx("a",{href:"mailto:"+(Z?.email||""),className:"text-primary hover:underline",children:Z?.email||"N/A"})]})]})]}),a.jsx(C,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[a.jsx(P,{className:"h-5 w-5"}),"Location"]}),a.jsx("p",{className:"text-muted-foreground",children:W.location})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),a.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:W.description})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(R,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),a.jsxs("p",{className:"font-semibold",children:[n(W.price),"/night"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Max Guests"}),a.jsx("p",{className:"font-semibold",children:W.maxGuests})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Bedrooms"}),a.jsx("p",{className:"font-semibold",children:W.bedrooms||"N/A"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(E,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Bathrooms"}),a.jsx("p",{className:"font-semibold",children:void 0!==W.bathrooms?W.bathrooms:"N/A"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),a.jsx(k,{variant:"secondary",children:W.category})]})]}),W.amenities&&W.amenities.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:W.amenities.map((e,s)=>a.jsx(k,{variant:"outline",children:e},s))})]})]}),a.jsx(C,{}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(t,{variant:"outline",onClick:()=>se(!1),children:"Close"}),a.jsx(t,{variant:"destructive",onClick:()=>{se(!1),he(W.id)},children:"Reject"}),a.jsx(t,{onClick:()=>{se(!1),me(W.id)},children:"Approve"})]})]})]})}),a.jsx(b,{open:re,onOpenChange:ne,children:a.jsxs(v,{className:"max-w-[98vw] max-h-[98vh] w-auto h-auto p-0 bg-black/95 border-none m-1",children:[a.jsx(w,{className:"sr-only",children:"View Full Size Image"}),a.jsxs(y,{className:"sr-only",children:["Viewing image ",oe+1," of ",W?.images?.length||0," for ",W?.title]}),a.jsx("div",{className:"relative w-full h-full flex items-center justify-center min-h-[400px]",children:W?.images&&W.images.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(t,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-50 bg-black/70 hover:bg-black/90 text-white border-none h-8 w-8 sm:h-10 sm:w-10",onClick:()=>ne(!1),children:a.jsx(U,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),a.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-black/70 text-white px-3 py-1.5 rounded-full text-xs sm:text-sm font-medium backdrop-blur-sm z-50",children:[oe+1," / ",W.images.length]}),a.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 sm:p-4 pt-12 pb-20 sm:pb-24",children:a.jsx("img",{src:W.images[oe]||"/placeholder.svg",alt:`${W.title} - Image ${oe+1}`,className:"max-w-full max-h-[calc(98vh-160px)] object-contain"})}),W.images.length>1&&a.jsxs(a.Fragment,{children:[a.jsx(t,{variant:"ghost",size:"icon",className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-50 bg-black/70 hover:bg-black/90 text-white border-none h-8 w-8 sm:h-12 sm:w-12",onClick:()=>ce(e=>0===e?W.images.length-1:e-1),children:a.jsx(z,{className:"h-4 w-4 sm:h-6 sm:w-6"})}),a.jsx(t,{variant:"ghost",size:"icon",className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-50 bg-black/70 hover:bg-black/90 text-white border-none h-8 w-8 sm:h-12 sm:w-12",onClick:()=>ce(e=>e===W.images.length-1?0:e+1),children:a.jsx(S,{className:"h-4 w-4 sm:h-6 sm:w-6"})})]}),W.images.length>1&&a.jsx("div",{className:"absolute bottom-2 sm:bottom-4 left-1/2 -translate-x-1/2 bg-black/70 backdrop-blur-sm rounded-lg p-2 sm:p-3 z-50 max-w-[calc(98vw-32px)]",children:a.jsx("div",{className:"flex gap-2 sm:gap-3 overflow-x-auto scrollbar-hide px-1",children:W.images.map((e,s)=>a.jsx("button",{onClick:()=>ce(s),className:"relative flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 rounded transition-all "+(oe===s?"scale-110 shadow-lg shadow-primary/50":"opacity-70 hover:opacity-100"),children:a.jsx("div",{className:"absolute inset-0 rounded overflow-hidden border-2 "+(oe===s?"border-primary ring-2 ring-primary/50 ring-offset-2 ring-offset-black/70":"border-transparent hover:border-white/50"),children:a.jsx("img",{src:e,alt:"Thumbnail "+(s+1),className:"w-full h-full object-cover transition-opacity "+(oe===s?"opacity-100":"opacity-70")})})},s))})})]})})]})})]})};export{D as default};
