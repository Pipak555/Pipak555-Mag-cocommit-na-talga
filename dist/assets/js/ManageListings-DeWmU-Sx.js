import{u as s,r as e,j as a}from"./react-vendor-BMVo5gto.js";import{u as t,o as i,e as r,B as l,i as n,l as d,p as c}from"./index-BbQqfVom.js";import{B as o}from"./badge-0vFpitRp.js";import{L as m}from"./ListingCard-D16etiEA.js";import{T as x}from"./theme-toggle-DFp1ra6v.js";import{A as h,a as u,b as j,c as p,d as g,e as f,f as N,g as v}from"./alert-dialog-Biqv9se3.js";import{D as b,a as y,b as w,c as C,d as k}from"./dialog-COz4G8V2.js";import{S as L}from"./separator-DgEd-SMQ.js";import{A,H as S,P as D,L as z,u as U,m as B,U as F,w as P,x as E,y as M}from"./icons-vendor-D1YpcxsO.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-Dbp4DHG_.js";import"./firebase-vendor-BtzXZj7S.js";import"./dropdown-menu-DES5sCK6.js";const T=()=>{const T=s(),{user:G}=t(),[I,O]=e.useState([]),[$,H]=e.useState(!0),[Q,R]=e.useState(!1),[V,Y]=e.useState(null),[q,J]=e.useState(!1),[K,W]=e.useState(null),[X,Z]=e.useState(!1);e.useEffect(()=>{G&&_()},[G]);const _=async()=>{if(G)try{H(!0);const s=(await i({hostId:G.uid})).filter(s=>"draft"!==s.status);O(s)}catch(s){r.error("Failed to load listings: "+(s.message||"Unknown error"))}finally{H(!1)}},ss=s=>{J(!1),T("/host/create-listing?edit="+s)};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("header",{className:"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-soft",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[a.jsx(l,{variant:"ghost",size:"icon",onClick:()=>T("/host/dashboard"),className:"h-9 w-9 sm:h-10 sm:w-10 touch-manipulation",children:a.jsx(A,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),a.jsx("div",{className:"hidden sm:block p-2 rounded-lg bg-primary/10",children:a.jsx(S,{className:"w-5 h-5 text-primary"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h1",{className:"text-base sm:text-lg font-bold truncate",children:"My Listings"}),a.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"Manage your properties"})]})]}),a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[a.jsx(x,{}),a.jsxs(l,{onClick:()=>T("/host/create-listing"),className:"h-9 sm:h-auto text-xs sm:text-sm px-3 sm:px-4 touch-manipulation",children:[a.jsx(D,{className:"h-4 w-4 mr-1.5 sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Listing"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:$?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):0===I.length?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:a.jsx(S,{className:"w-10 h-10 text-muted-foreground"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No listings yet"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first listing to start hosting"}),a.jsxs(l,{size:"lg",onClick:()=>T("/host/create-listing"),children:[a.jsx(D,{className:"h-4 w-4 mr-2"}),"Create Your First Listing"]})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:I.map(s=>a.jsxs("div",{className:"group",children:[a.jsx("div",{className:"cursor-pointer",onClick:()=>(async s=>{Z(!0),J(!0);try{const e=await d(s);e?W(e):(r.error("Listing not found"),J(!1))}catch(e){r.error("Failed to load listing: "+(e.message||"Unknown error")),J(!1)}finally{Z(!1)}})(s.id),children:a.jsx(m,{listing:s})}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx(o,{variant:"draft"===s.status?"secondary":"default",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),a.jsx("span",{className:"text-sm text-muted-foreground",children:s.category})]}),a.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row gap-2",children:[a.jsx(l,{variant:"outline",size:"sm",className:"flex-1 h-11 sm:h-auto text-sm sm:text-base hover:bg-primary hover:text-primary-foreground touch-manipulation",onClick:e=>{e.stopPropagation(),ss(s.id)},children:"draft"===s.status?"Resume":"Edit"}),a.jsx(l,{variant:"destructive",size:"sm",className:"flex-1 h-11 sm:h-auto text-sm sm:text-base touch-manipulation",onClick:e=>{var a;e.stopPropagation(),a=s.id,Y(a),R(!0)},children:"Delete"})]})]},s.id))})}),a.jsx(h,{open:Q,onOpenChange:R,children:a.jsxs(u,{children:[a.jsxs(j,{children:[a.jsx(p,{children:"Delete Listing?"}),a.jsx(g,{children:"Are you sure you want to delete this listing? This action cannot be undone. Any associated bookings and reviews will be affected."})]}),a.jsxs(f,{children:[a.jsx(N,{onClick:()=>Y(null),children:"Cancel"}),a.jsx(v,{onClick:async()=>{if(V)try{await c(V),r.success("Listing deleted"),_(),Y(null),K?.id===V&&(J(!1),W(null))}catch(s){r.error("Failed to delete listing")}finally{R(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),a.jsx(b,{open:q,onOpenChange:J,children:a.jsxs(y,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(w,{children:[a.jsx(C,{className:"text-2xl",children:K?.title||"Listing Details"}),a.jsx(k,{children:"View and manage your listing details"})]}),X?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(z,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("p",{className:"ml-3 text-muted-foreground",children:"Loading listing details..."})]}):K?a.jsxs("div",{className:"space-y-6",children:[K.images&&K.images.length>0&&a.jsx("div",{className:"grid grid-cols-2 gap-2",children:K.images.slice(0,4).map((s,e)=>a.jsx("img",{src:s,alt:`${K.title} - Image ${e+1}`,className:"w-full h-48 object-cover rounded-lg"},e))}),a.jsx(L,{}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[a.jsx(U,{className:"h-5 w-5"}),"Location"]}),a.jsx("p",{className:"text-muted-foreground",children:K.location})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),a.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:K.description})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),a.jsxs("p",{className:"font-semibold",children:[n(K.price),"/night"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(F,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Max Guests"}),a.jsx("p",{className:"font-semibold",children:K.maxGuests})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(P,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Bedrooms"}),a.jsx("p",{className:"font-semibold",children:K.bedrooms||"N/A"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(E,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Bathrooms"}),a.jsx("p",{className:"font-semibold",children:void 0!==K.bathrooms?K.bathrooms:"N/A"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(S,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),a.jsx(o,{variant:"secondary",children:K.category})]})]}),K.amenities&&K.amenities.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:K.amenities.map((s,e)=>a.jsx(o,{variant:"outline",children:s},e))})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Status:"}),a.jsx(o,{variant:"approved"===K.status?"default":"pending"===K.status?"secondary":"outline",children:K.status.charAt(0).toUpperCase()+K.status.slice(1)})]})]}),a.jsx(L,{}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(l,{variant:"outline",onClick:()=>J(!1),children:"Close"}),a.jsxs(l,{onClick:()=>ss(K.id),className:"gap-2",children:[a.jsx(M,{className:"h-4 w-4"}),"Edit Listing"]})]})]}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No listing selected"})})]})})]})};export{T as default};
