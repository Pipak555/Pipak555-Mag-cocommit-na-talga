import{r as e,j as t}from"./react-vendor-BMVo5gto.js";const r=({src:r,className:n="",overlay:o=!0,fallbackImage:a,style:s})=>{const i=e.useRef(null),c=e.useRef(null),[l,d]=e.useState(!1),[u,b]=e.useState(!1),[g,m]=e.useState(!1),[v,f]=e.useState(!1);return e.useEffect(()=>{const e=()=>{d(768>window.innerWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e.useEffect(()=>{if(l||u)return;if(!c.current){const e=setTimeout(()=>{if(c.current){const e=c.current.getBoundingClientRect();e.top<window.innerHeight+50&&e.bottom>-50&&m(!0)}},100);return()=>clearTimeout(e)}const e=c.current.getBoundingClientRect();if(e.top<window.innerHeight+50&&e.bottom>-50)return void m(!0);const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(m(!0),t.disconnect())})},{rootMargin:"50px"});return t.observe(c.current),()=>t.disconnect()},[l,u]),e.useEffect(()=>{if(i.current&&!l&&!u&&g){const e=i.current;e.playbackRate=.8,e.load();const t=()=>{e.play().catch(()=>{}),f(!0)};return e.addEventListener("canplay",t,{once:!0}),()=>{e.removeEventListener("canplay",t)}}},[l,u,g]),l||u?t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat "+n,style:{backgroundImage:a?`url(${a})`:void 0,backgroundColor:a?void 0:"hsl(var(--background))"},children:o&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/50 via-black/30 to-black/50"})}):t.jsxs("div",{ref:c,className:"absolute inset-0 overflow-hidden "+n,style:s,children:[!v&&a&&t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-500",style:{backgroundImage:`url(${a})`,opacity:v?0:1,zIndex:1}}),g&&t.jsxs("video",{ref:i,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"scale(1) translateZ(0)",willChange:"auto",objectFit:"cover",objectPosition:"center center",minWidth:"100%",minHeight:"100%",maxWidth:"100%",maxHeight:"100%",pointerEvents:"none",opacity:v?1:0,zIndex:2},preload:"metadata",poster:a,onError:()=>{b(!0)},children:[t.jsx("source",{src:r,type:"video/mp4"}),"Your browser does not support the video tag."]}),o&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/30 dark:from-black/50 via-background/15 dark:via-black/30 to-background/30 dark:to-black/50 z-10"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/40 dark:from-black/60 via-transparent to-transparent z-10"})]})]})};export{r as V};
