const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-BbQqfVom.js","assets/js/react-vendor-BMVo5gto.js","assets/js/utils-vendor-yBsXXcRr.js","assets/js/maps-vendor-CYGXCXz5.js","assets/maps-vendor-Dgihpmma.css","assets/js/ui-vendor-Dbp4DHG_.js","assets/js/icons-vendor-D1YpcxsO.js","assets/js/firebase-vendor-BtzXZj7S.js","assets/index-C-vb7LoQ.css"])))=>i.map(i=>d[i]);
import{u as s,j as e,_ as i,h as t,v as a,B as l,C as n,a as r,b as o,c,d,i as h,e as u,q as x,t as m}from"./index-BbQqfVom.js";import{u as j,l as g,r as f,j as p}from"./react-vendor-BMVo5gto.js";import{f as v,e as y,u as w}from"./firebase-vendor-BtzXZj7S.js";import{I as N}from"./input-B93J7yYR.js";import{T as b,a as S,b as k,c as L}from"./tabs-CPhJH8Ta.js";import{L as C}from"./label-CE6eI_XB.js";import{B as F}from"./badge-0vFpitRp.js";import{L as P}from"./ListingCard-D16etiEA.js";import{E as B}from"./empty-state-Fqt3Rb73.js";import{C as _}from"./CouponManager-7m7oVs-H.js";import{A as E,o as I,q as A,a2 as M,j as D,a3 as R,a8 as V,S as W}from"./icons-vendor-D1YpcxsO.js";import"./ui-vendor-Dbp4DHG_.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";const q=()=>{const q=j(),[O]=g(),{user:T,userRole:U,refreshUserProfile:Y}=s(),[z,H]=f.useState(null),[$,G]=f.useState(!1),[J,K]=f.useState([]),[Q,X]=f.useState([]),[Z,ss]=f.useState([]),[es,is]=f.useState([]),[ts,as]=f.useState([]),[ls,ns]=f.useState([]),[rs,os]=f.useState(O.get("tab")||"profile");f.useEffect(()=>{T&&cs()},[T,U]),f.useEffect(()=>{const s=O.get("tab");s&&os(s)},[O]),f.useEffect(()=>{T&&z&&"guest"===U?(ds(),hs(),us()):T&&"host"===U&&us()},[T,z,U]);const cs=async()=>{if(T)try{const s=await v(y(e,"users",T.uid));if(s.exists()){const e=s.data();H(e),is(e.favorites||[]),as(e.wishlist||[]),ns(e.coupons||[])}}catch(s){}},ds=async()=>{if(T&&z?.favorites?.length)try{const{getListing:s}=await i(async()=>{const{getListing:s}=await import("./index-BbQqfVom.js").then(s=>s.S);return{getListing:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),e=await Promise.all(z.favorites.map(e=>s(e)));K(e.filter(s=>null!==s))}catch(s){K([])}else K([])},hs=async()=>{if(T&&z?.wishlist?.length)try{const{getListing:s}=await i(async()=>{const{getListing:s}=await import("./index-BbQqfVom.js").then(s=>s.S);return{getListing:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),e=await Promise.all(z.wishlist.map(e=>s(e)));X(e.filter(s=>null!==s))}catch(s){X([])}else X([])},us=async()=>{if(T)try{const s=await t("guest"===U?{guestId:T.uid}:{hostId:T.uid});ss(s)}catch(s){}},xs=async s=>{if(T)try{const e=await m(T.uid,s,es);is(e),H(s=>s?{...s,favorites:e}:null),"guest"===U&&ds(),u.success(e.includes(s)?"Added to favorites":"Removed from favorites")}catch(e){u.error("Failed to update favorites")}else u.error("Please login to manage favorites")},ms=async s=>{if(T)try{const e=await x(T.uid,s,ts);as(e),H(s=>s?{...s,wishlist:e}:null),"guest"===U&&hs(),u.success(e.includes(s)?"Added to wishlist":"Removed from wishlist")}catch(e){u.error("Failed to update wishlist")}else u.error("Please login to manage wishlist")};return z?p.jsx("div",{className:"min-h-screen bg-background",children:p.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-4xl",children:[p.jsxs(l,{variant:"ghost",onClick:()=>{q("host"===U?"/host/dashboard":"guest"===U?"/guest/dashboard":"/admin/dashboard")},className:"mb-6",children:[p.jsx(E,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),p.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Account Settings"}),p.jsxs(b,{value:rs,onValueChange:os,className:"space-y-6",children:[p.jsxs(S,{className:"grid w-full "+("guest"===U?"grid-cols-6":"host"===U?"grid-cols-5":"grid-cols-4"),children:[p.jsxs(k,{value:"profile",children:[p.jsx(I,{className:"h-4 w-4 mr-2"}),"Profile"]}),"guest"===U&&p.jsxs(p.Fragment,{children:[p.jsxs(k,{value:"favorites",children:[p.jsx(A,{className:"h-4 w-4 mr-2"}),"Favorites"]}),p.jsxs(k,{value:"wishlist",children:[p.jsx(M,{className:"h-4 w-4 mr-2"}),"Wishlist"]})]}),p.jsxs(k,{value:"bookings",children:[p.jsx(D,{className:"h-4 w-4 mr-2"}),"Bookings"]}),"host"===U&&p.jsxs(k,{value:"coupons",children:[p.jsx(R,{className:"h-4 w-4 mr-2"}),"Coupons"]}),p.jsxs(k,{value:"notifications",children:[p.jsx(V,{className:"h-4 w-4 mr-2"}),"Notifications"]}),p.jsxs(k,{value:"security",children:[p.jsx(W,{className:"h-4 w-4 mr-2"}),"Security"]})]}),p.jsx(L,{value:"profile",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"Profile Information"}),p.jsx(c,{children:"Update your account details"})]}),p.jsxs(d,{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(C,{htmlFor:"fullName",children:"Full Name"}),p.jsx(N,{id:"fullName",type:"text",value:z.fullName,onChange:s=>H({...z,fullName:s.target.value}),placeholder:"Enter your full name"})]}),p.jsxs("div",{children:[p.jsx(C,{htmlFor:"email",children:"Email"}),p.jsx(N,{id:"email",type:"email",value:z.email,disabled:!0})]}),p.jsxs("div",{children:[p.jsx(C,{htmlFor:"role",children:"Role"}),p.jsx(N,{id:"role",value:z.role,disabled:!0})]}),p.jsxs("div",{children:[p.jsx(C,{htmlFor:"points",children:"Reward Points"}),p.jsx(N,{id:"points",value:z.points,disabled:!0})]}),p.jsxs("div",{children:[p.jsx(C,{htmlFor:"balance",children:"Wallet Balance"}),p.jsx(N,{id:"balance",value:h(z.walletBalance),disabled:!0})]}),p.jsx(l,{onClick:async()=>{if(T&&z){G(!0);try{await w(y(e,"users",T.uid),{fullName:z.fullName}),await cs(),await Y(),u.success("Profile updated successfully!")}catch(s){u.error("Failed to update profile")}finally{G(!1)}}},disabled:$,children:$?"Saving...":"Save Changes"})]})]})}),"guest"===U&&p.jsx(L,{value:"favorites",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"Your Favorites"}),p.jsx(c,{children:"Listings you've liked and saved"})]}),p.jsx(d,{children:0===J.length?p.jsx(B,{icon:p.jsx(A,{className:"h-10 w-10"}),title:"No favorites yet",description:"Start exploring and add listings to your favorites!",action:p.jsx(l,{onClick:()=>q("/guest/browse"),children:"Browse Listings"})}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(s=>p.jsx(P,{listing:s,onView:()=>q("/guest/listing/"+s.id),onFavorite:()=>xs(s.id),onWishlist:()=>ms(s.id),isFavorite:es.includes(s.id),isInWishlist:ts.includes(s.id)},s.id))})})]})}),"guest"===U&&p.jsx(L,{value:"wishlist",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"Your Wishlist"}),p.jsx(c,{children:"Listings you're planning to book in the future"})]}),p.jsx(d,{children:0===Q.length?p.jsx(B,{icon:p.jsx(M,{className:"h-10 w-10"}),title:"No wishlist items yet",description:"Add listings to your wishlist for future trips!",action:p.jsx(l,{onClick:()=>q("/guest/browse"),children:"Browse Listings"})}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(s=>p.jsx(P,{listing:s,onView:()=>q("/guest/listing/"+s.id),onFavorite:()=>xs(s.id),onWishlist:()=>ms(s.id),isFavorite:es.includes(s.id),isInWishlist:ts.includes(s.id)},s.id))})})]})}),p.jsx(L,{value:"bookings",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"guest"===U?"My Bookings":"Host Bookings"}),p.jsx(c,{children:"guest"===U?"View your booking history":"Manage your property bookings"})]}),p.jsx(d,{children:0===Z.length?p.jsx(B,{icon:p.jsx(D,{className:"h-10 w-10"}),title:"No bookings yet",description:"guest"===U?"Start exploring amazing places to stay!":"No booking requests at this time.",action:"guest"===U?p.jsx(l,{onClick:()=>q("/guest/browse"),children:"Browse Listings"}):void 0}):p.jsx("div",{className:"space-y-4",children:Z.map(s=>p.jsxs("div",{className:"p-4 border rounded-lg",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"font-medium",children:["Booking #",s.id.slice(0,8)]}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(s.checkIn).toLocaleDateString()," - ",new Date(s.checkOut).toLocaleDateString()]})]}),p.jsx(F,{children:s.status})]}),p.jsxs("div",{className:"flex items-center justify-between mt-2",children:[p.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.guests," guest",s.guests>1?"s":""]}),p.jsx("p",{className:"font-semibold",children:h(s.totalPrice||0)})]})]},s.id))})})]})}),"host"===U&&p.jsx(L,{value:"coupons",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"Coupons"}),p.jsx(c,{children:"Manage your promotional coupons"})]}),p.jsx(d,{children:p.jsx(_,{coupons:ls,onApplyCoupon:s=>u.info(`Coupon ${s} applied`)})})]})}),p.jsx(L,{value:"notifications",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"Notification Preferences"}),p.jsx(c,{children:"Manage how you receive updates"})]}),p.jsx(d,{children:p.jsx("p",{className:"text-muted-foreground",children:"Notification settings coming soon"})})]})}),p.jsx(L,{value:"payments",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"Payment Methods"}),p.jsx(c,{children:"Manage your payment options"})]}),p.jsx(d,{children:p.jsx("p",{className:"text-muted-foreground",children:"Payment method management coming soon"})})]})}),p.jsx(L,{value:"security",children:p.jsxs(n,{children:[p.jsxs(r,{children:[p.jsx(o,{children:"Security Settings"}),p.jsx(c,{children:"Manage your account security"})]}),p.jsx(d,{children:p.jsx("p",{className:"text-muted-foreground",children:"Security settings coming soon"})})]})})]})]})}):p.jsx(a,{})};export{q as default};
