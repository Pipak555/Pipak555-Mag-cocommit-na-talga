const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-F95ZJi6y.js","assets/js/react-vendor-DcULH_Au.js","assets/js/utils-vendor-yBsXXcRr.js","assets/js/maps-vendor-CYGXCXz5.js","assets/maps-vendor-Dgihpmma.css","assets/js/ui-vendor-C9dhA_ey.js","assets/js/icons-vendor-D18eSOBA.js","assets/js/firebase-vendor-BtzXZj7S.js","assets/index-jZhKPZKM.css"])))=>i.map(i=>d[i]);
import{u as s,j as e,_ as i,h as t,s as a,B as l,C as n,a as r,b as o,c,d,i as h,e as u,o as x,t as m}from"./index-F95ZJi6y.js";import{u as j,l as g,r as p,j as f}from"./react-vendor-DcULH_Au.js";import{f as v,e as y,u as w}from"./firebase-vendor-BtzXZj7S.js";import{I as N}from"./input-CGAn_-_v.js";import{T as b,a as k,b as S,c as L}from"./tabs-nf6BJST9.js";import{L as C}from"./label-BX6RxrV3.js";import{B as F}from"./badge-BPytCQbI.js";import{L as P}from"./ListingCard-D08Qz4_k.js";import{E as B}from"./empty-state-DNlvimib.js";import{C as _}from"./CouponManager-UwYMzc3U.js";import{A as E,o as I,q as R,Y as A,i as M,a3 as W,a4 as D,S as V}from"./icons-vendor-D18eSOBA.js";import"./ui-vendor-C9dhA_ey.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";const T=()=>{const T=j(),[O]=g(),{user:Y,userRole:q,refreshUserProfile:U}=s(),[z,H]=p.useState(null),[Q,Z]=p.useState(!1),[$,G]=p.useState([]),[J,K]=p.useState([]),[X,ss]=p.useState([]),[es,is]=p.useState([]),[ts,as]=p.useState([]),[ls,ns]=p.useState([]),[rs,os]=p.useState(O.get("tab")||"profile");p.useEffect(()=>{Y&&cs()},[Y,q]),p.useEffect(()=>{const s=O.get("tab");s&&os(s)},[O]),p.useEffect(()=>{Y&&z&&"guest"===q?(ds(),hs(),us()):Y&&"host"===q&&us()},[Y,z,q]);const cs=async()=>{if(Y)try{const s=await v(y(e,"users",Y.uid));if(s.exists()){const e=s.data();H(e),is(e.favorites||[]),as(e.wishlist||[]),ns(e.coupons||[])}}catch(s){}},ds=async()=>{if(Y&&z?.favorites?.length)try{const{getListing:s}=await i(async()=>{const{getListing:s}=await import("./index-F95ZJi6y.js").then(s=>s.R);return{getListing:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),e=await Promise.all(z.favorites.map(e=>s(e)));G(e.filter(s=>null!==s))}catch(s){G([])}else G([])},hs=async()=>{if(Y&&z?.wishlist?.length)try{const{getListing:s}=await i(async()=>{const{getListing:s}=await import("./index-F95ZJi6y.js").then(s=>s.R);return{getListing:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),e=await Promise.all(z.wishlist.map(e=>s(e)));K(e.filter(s=>null!==s))}catch(s){K([])}else K([])},us=async()=>{if(Y)try{const s=await t("guest"===q?{guestId:Y.uid}:{hostId:Y.uid});ss(s)}catch(s){}},xs=async s=>{if(Y)try{const e=await m(Y.uid,s,es);is(e),H(s=>s?{...s,favorites:e}:null),"guest"===q&&ds(),u.success(e.includes(s)?"Added to favorites":"Removed from favorites")}catch(e){u.error("Failed to update favorites")}else u.error("Please login to manage favorites")},ms=async s=>{if(Y)try{const e=await x(Y.uid,s,ts);as(e),H(s=>s?{...s,wishlist:e}:null),"guest"===q&&hs(),u.success(e.includes(s)?"Added to wishlist":"Removed from wishlist")}catch(e){u.error("Failed to update wishlist")}else u.error("Please login to manage wishlist")};return z?f.jsx("div",{className:"min-h-screen bg-background",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-4xl",children:[f.jsxs(l,{variant:"ghost",onClick:()=>{T("host"===q?"/host/dashboard":"guest"===q?"/guest/dashboard":"/admin/dashboard")},className:"mb-6",children:[f.jsx(E,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),f.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Account Settings"}),f.jsxs(b,{value:rs,onValueChange:os,className:"space-y-6",children:[f.jsxs(k,{className:"grid w-full "+("guest"===q?"grid-cols-6":"host"===q?"grid-cols-5":"grid-cols-4"),children:[f.jsxs(S,{value:"profile",children:[f.jsx(I,{className:"h-4 w-4 mr-2"}),"Profile"]}),"guest"===q&&f.jsxs(f.Fragment,{children:[f.jsxs(S,{value:"favorites",children:[f.jsx(R,{className:"h-4 w-4 mr-2"}),"Favorites"]}),f.jsxs(S,{value:"wishlist",children:[f.jsx(A,{className:"h-4 w-4 mr-2"}),"Wishlist"]})]}),f.jsxs(S,{value:"bookings",children:[f.jsx(M,{className:"h-4 w-4 mr-2"}),"Bookings"]}),"host"===q&&f.jsxs(S,{value:"coupons",children:[f.jsx(W,{className:"h-4 w-4 mr-2"}),"Coupons"]}),f.jsxs(S,{value:"notifications",children:[f.jsx(D,{className:"h-4 w-4 mr-2"}),"Notifications"]}),f.jsxs(S,{value:"security",children:[f.jsx(V,{className:"h-4 w-4 mr-2"}),"Security"]})]}),f.jsx(L,{value:"profile",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"Profile Information"}),f.jsx(c,{children:"Update your account details"})]}),f.jsxs(d,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(C,{htmlFor:"fullName",children:"Full Name"}),f.jsx(N,{id:"fullName",type:"text",value:z.fullName,onChange:s=>H({...z,fullName:s.target.value}),placeholder:"Enter your full name"})]}),f.jsxs("div",{children:[f.jsx(C,{htmlFor:"email",children:"Email"}),f.jsx(N,{id:"email",type:"email",value:z.email,disabled:!0})]}),f.jsxs("div",{children:[f.jsx(C,{htmlFor:"role",children:"Role"}),f.jsx(N,{id:"role",value:z.role,disabled:!0})]}),f.jsxs("div",{children:[f.jsx(C,{htmlFor:"points",children:"Reward Points"}),f.jsx(N,{id:"points",value:z.points,disabled:!0})]}),f.jsxs("div",{children:[f.jsx(C,{htmlFor:"balance",children:"Wallet Balance"}),f.jsx(N,{id:"balance",value:h(z.walletBalance),disabled:!0})]}),f.jsx(l,{onClick:async()=>{if(Y&&z){Z(!0);try{await w(y(e,"users",Y.uid),{fullName:z.fullName}),await cs(),await U(),u.success("Profile updated successfully!")}catch(s){u.error("Failed to update profile")}finally{Z(!1)}}},disabled:Q,children:Q?"Saving...":"Save Changes"})]})]})}),"guest"===q&&f.jsx(L,{value:"favorites",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"Your Favorites"}),f.jsx(c,{children:"Listings you've liked and saved"})]}),f.jsx(d,{children:0===$.length?f.jsx(B,{icon:f.jsx(R,{className:"h-10 w-10"}),title:"No favorites yet",description:"Start exploring and add listings to your favorites!",action:f.jsx(l,{onClick:()=>T("/guest/browse"),children:"Browse Listings"})}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(s=>f.jsx(P,{listing:s,onView:()=>T("/guest/listing/"+s.id),onFavorite:()=>xs(s.id),onWishlist:()=>ms(s.id),isFavorite:es.includes(s.id),isInWishlist:ts.includes(s.id)},s.id))})})]})}),"guest"===q&&f.jsx(L,{value:"wishlist",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"Your Wishlist"}),f.jsx(c,{children:"Listings you're planning to book in the future"})]}),f.jsx(d,{children:0===J.length?f.jsx(B,{icon:f.jsx(A,{className:"h-10 w-10"}),title:"No wishlist items yet",description:"Add listings to your wishlist for future trips!",action:f.jsx(l,{onClick:()=>T("/guest/browse"),children:"Browse Listings"})}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(s=>f.jsx(P,{listing:s,onView:()=>T("/guest/listing/"+s.id),onFavorite:()=>xs(s.id),onWishlist:()=>ms(s.id),isFavorite:es.includes(s.id),isInWishlist:ts.includes(s.id)},s.id))})})]})}),f.jsx(L,{value:"bookings",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"guest"===q?"My Bookings":"Host Bookings"}),f.jsx(c,{children:"guest"===q?"View your booking history":"Manage your property bookings"})]}),f.jsx(d,{children:0===X.length?f.jsx(B,{icon:f.jsx(M,{className:"h-10 w-10"}),title:"No bookings yet",description:"guest"===q?"Start exploring amazing places to stay!":"No booking requests at this time.",action:"guest"===q?f.jsx(l,{onClick:()=>T("/guest/browse"),children:"Browse Listings"}):void 0}):f.jsx("div",{className:"space-y-4",children:X.map(s=>f.jsxs("div",{className:"p-4 border rounded-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"font-medium",children:["Booking #",s.id.slice(0,8)]}),f.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(s.checkIn).toLocaleDateString()," - ",new Date(s.checkOut).toLocaleDateString()]})]}),f.jsx(F,{children:s.status})]}),f.jsxs("div",{className:"flex items-center justify-between mt-2",children:[f.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.guests," guest",s.guests>1?"s":""]}),f.jsx("p",{className:"font-semibold",children:h(s.totalPrice||0)})]})]},s.id))})})]})}),"host"===q&&f.jsx(L,{value:"coupons",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"Coupons"}),f.jsx(c,{children:"Manage your promotional coupons"})]}),f.jsx(d,{children:f.jsx(_,{coupons:ls,onApplyCoupon:s=>u.info(`Coupon ${s} applied`)})})]})}),f.jsx(L,{value:"notifications",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"Notification Preferences"}),f.jsx(c,{children:"Manage how you receive updates"})]}),f.jsx(d,{children:f.jsx("p",{className:"text-muted-foreground",children:"Notification settings coming soon"})})]})}),f.jsx(L,{value:"payments",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"Payment Methods"}),f.jsx(c,{children:"Manage your payment options"})]}),f.jsx(d,{children:f.jsx("p",{className:"text-muted-foreground",children:"Payment method management coming soon"})})]})}),f.jsx(L,{value:"security",children:f.jsxs(n,{children:[f.jsxs(r,{children:[f.jsx(o,{children:"Security Settings"}),f.jsx(c,{children:"Manage your account security"})]}),f.jsx(d,{children:f.jsx("p",{className:"text-muted-foreground",children:"Security settings coming soon"})})]})})]})]})}):f.jsx(a,{})};export{T as default};
