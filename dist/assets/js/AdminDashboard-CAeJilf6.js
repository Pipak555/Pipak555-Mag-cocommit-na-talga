import{u as s,r as e,j as t}from"./react-vendor-Ve3SFwKO.js";import{u as a,L as i,B as n,C as r,a as l,b as m,d as c,i as o,c as d,j as x,e as p}from"./index-DaMaslBo.js";import{N as h}from"./NotificationBell-D2XQODdv.js";import{D as u,a as j,b as g,c as N,d as b}from"./dialog-GBvfaobK.js";import{T as f,a as v,b as w,c as y,d as k,e as A}from"./table-D8ee0DX1.js";import{B as C}from"./badge-BSgvUoVt.js";import{T as S}from"./theme-toggle-Djm4W2SX.js";import{l as T,d as E,q as I,w as L,e as D,h as F,f as B}from"./firebase-vendor-BC71bXmb.js";import{g as P}from"./eventService-CgRnQu3Z.js";import{A as R,a as U,b as M,c as O,d as H,e as z,f as _,g as G}from"./alert-dialog-DLw-Qa8s.js";import{S as V,U as Y,H as W,m as $,h as q,t as Z,F as J,n as K,l as Q,u as X,L as ss,C as es,G as ts}from"./icons-vendor-Dhca6XHc.js";import"./utils-vendor-DzY7Ay74.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-D9RGQy8n.js";import"./input-D5hloL4G.js";import"./scroll-area-Dps723Uf.js";import"./select-CXm8ONYg.js";import"./switch-CSe7-F5W.js";import"./label-B2t2XnWQ.js";import"./dropdown-menu-DVnKNEtJ.js";const as=()=>{const{user:as,userRole:is,userProfile:ns,signOut:rs}=a(),ls=s(),[ms,cs]=e.useState({totalUsers:0,totalHosts:0,totalGuests:0,totalAdmins:0,activeListings:0,totalBookings:0,cancelledBookings:0,totalEarnings:0,subscriptionRevenue:0,serviceFees:0}),[os,ds]=e.useState(!1),[xs,ps]=e.useState(!1),[hs,us]=e.useState([]),[js,gs]=e.useState(!1),[Ns,bs]=e.useState([]),[fs,vs]=e.useState(!1);e.useEffect(()=>{if(!as||"admin"!==is)return void ls("/admin/login");let s=null,e=null,t=null;return s=T(E(x,"users"),s=>{const e=s.docs.map(s=>{const e=s.data();return{id:s.id,email:e.email,role:e.role,fullName:e.fullName,...e}});let t=0,a=0,i=0;e.forEach(s=>{const e=s.roles&&Array.isArray(s.roles)&&s.roles.length>0?s.roles:s.role?[s.role]:[];Array.from(new Set(e)).forEach(s=>{"host"===s&&t++,"guest"===s&&a++,"admin"===s&&i++})}),cs(e=>({...e,totalUsers:s.size,totalHosts:t,totalGuests:a,totalAdmins:i}))},s=>{p.error("Failed to load users: "+s.message)}),e=T(E(x,"listing"),s=>{const e=s.docs.filter(s=>"approved"===s.data().status).length;cs(s=>({...s,activeListings:e}))},s=>{p.error("Failed to load listings: "+s.message)}),t=T(E(x,"bookings"),s=>{const e=s.docs.map(s=>s.data()),t=e.filter(s=>"confirmed"===s.status||"completed"===s.status),a=e.filter(s=>"cancelled"===s.status);t.reduce((s,e)=>s+(e.totalPrice||0),0),cs(e=>({...e,totalBookings:s.size,cancelledBookings:a.length}))},s=>{p.error("Failed to load bookings: "+s.message)}),(async()=>{try{const s=I(E(x,"transactions"),L("userId","==","platform"),L("paymentMethod","==","service_fee")),e=(await D(s)).docs.reduce((s,e)=>s+(e.data().amount||0),0),t=(await D(E(x,"transactions"))).docs.map(s=>s.data()).filter(s=>(s.description?.toLowerCase().includes("host subscription")||s.description?.toLowerCase().includes("subscription"))&&"completed"===s.status).reduce((s,e)=>s+(e.amount||0),0),a=e+t;cs(s=>({...s,totalEarnings:a,subscriptionRevenue:t,serviceFees:e}))}catch(s){}})(),(async()=>{try{vs(!0);const s=await P();bs(s.slice(0,10))}catch(s){}finally{vs(!1)}})(),()=>{s&&s(),e&&e(),t&&t()}},[as,is,ls]);const ws=()=>fs?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(ss,{className:"w-8 h-8 mx-auto mb-4 animate-spin text-primary"}),t.jsx("p",{className:"text-muted-foreground",children:"Loading events..."})]}):0===Ns.length?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(es,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No recent activity to display"}),t.jsxs(n,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>ls("/admin/create-event"),children:[t.jsx(X,{className:"h-4 w-4 mr-2"}),"Create Your First Event"]})]}):t.jsx("div",{className:"space-y-3",children:Ns.map(s=>t.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[t.jsx("div",{className:"p-2 rounded-lg "+("coupon"===s.type?"bg-green-100 dark:bg-green-900/20":"announcement"===s.type?"bg-blue-100 dark:bg-blue-900/20":"bg-purple-100 dark:bg-purple-900/20"),children:"coupon"===s.type?t.jsx(ts,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):t.jsx(X,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-sm mb-1",children:s.title}),t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[t.jsx(C,{variant:"outline",className:"text-xs",children:s.type}),"coupon"===s.type&&s.couponCode&&t.jsx(C,{variant:"secondary",className:"text-xs font-mono",children:s.couponCode}),t.jsx("span",{className:"text-xs text-muted-foreground",children:s.targetRoles.join(", ")}),s.notificationSent&&t.jsx(C,{variant:"outline",className:"text-xs bg-green-50 dark:bg-green-900/20",children:"Sent"})]})]}),t.jsx("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(s.createdAt).toLocaleDateString()})]})})]},s.id))});return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-soft",children:t.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 py-3 sm:py-4 flex justify-between items-center gap-2 sm:gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[t.jsx(i,{size:"sm"}),t.jsx("div",{className:"hidden sm:block p-2 rounded-lg bg-accent/10",children:t.jsx(V,{className:"w-5 h-5 text-accent"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("h1",{className:"text-sm sm:text-base md:text-lg font-bold truncate",children:["Welcome, ",ns?.fullName||"Admin","!"]}),t.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"Platform management"})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[t.jsx(h,{}),t.jsx(S,{}),t.jsxs(n,{variant:"outline",onClick:()=>ds(!0),className:"h-9 sm:h-auto text-xs sm:text-sm px-2 sm:px-4 touch-manipulation",children:[t.jsx("span",{className:"hidden sm:inline",children:"Sign Out"}),t.jsx("span",{className:"sm:hidden",children:"Out"})]})]})]})}),t.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[t.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8 p-4 sm:p-5 md:p-6 rounded-xl bg-gradient-accent text-white",children:[t.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:"Platform Overview"}),t.jsxs("p",{className:"text-sm sm:text-base text-white/90",children:["Welcome back, ",ns?.fullName||"Admin","!"]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-4 sm:mb-6 md:mb-8",children:[t.jsxs(r,{className:"shadow-soft",children:[t.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:t.jsx(m,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Total Users"})}),t.jsxs(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:[t.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ms.totalUsers}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[ms.totalHosts," hosts, ",ms.totalGuests," guests",ms.totalAdmins>0?`, ${ms.totalAdmins} admin${ms.totalAdmins>1?"s":""}`:""]})]})]}),t.jsxs(r,{className:"shadow-soft cursor-pointer hover:shadow-medium transition-shadow touch-manipulation",onClick:()=>ls("/admin/active-listings"),children:[t.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:t.jsx(m,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Active Listings"})}),t.jsxs(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:[t.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ms.activeListings}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Click to manage"})]})]}),t.jsxs(r,{className:"shadow-soft",children:[t.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:t.jsx(m,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Total Bookings"})}),t.jsx(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:t.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ms.totalBookings})})]}),t.jsxs(r,{className:"shadow-soft cursor-pointer hover:shadow-medium transition-shadow touch-manipulation",onClick:async()=>{ps(!0),gs(!0);try{const s=(await D(E(x,"transactions"))).docs.map(s=>({id:s.id,...s.data()})).filter(s=>"service_fee"===s.paymentMethod&&"platform"===s.userId||(s.description?.toLowerCase().includes("host subscription")||s.description?.toLowerCase().includes("subscription"))&&"completed"===s.status),e=await Promise.all(s.map(async s=>{const e={...s,earningsType:"service_fee"===s.paymentMethod?"service_fee":"subscription"};if(s.hostId)try{const t=await F(B(x,"users",s.hostId));if(t.exists()){const s=t.data();e.hostName=s.fullName||"N/A",e.hostEmail=s.email||"N/A"}}catch(t){}if("subscription"===e.earningsType&&!e.hostId&&s.userId&&"platform"!==s.userId)try{const t=await F(B(x,"users",s.userId));if(t.exists()){const s=t.data();e.hostName=s.fullName||"N/A",e.hostEmail=s.email||"N/A"}}catch(t){}if(s.bookingId&&"service_fee"===e.earningsType)try{const a=await F(B(x,"bookings",s.bookingId));if(a.exists()){const i=a.data();if(e.bookingId=s.bookingId,i.listingId)try{const s=await F(B(x,"listing",i.listingId));if(s.exists()){const t=s.data();e.listingTitle=t.title||"N/A"}}catch(t){}}}catch(t){}return e}));e.sort((s,e)=>{const t=new Date(s.createdAt||0).getTime();return new Date(e.createdAt||0).getTime()-t}),us(e)}catch(s){p.error("Failed to load earnings breakdown: "+(s.message||"Unknown error"))}finally{gs(!1)}},children:[t.jsx(l,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:t.jsx(m,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Total Earnings"})}),t.jsxs(c,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:[t.jsx("div",{className:"text-xl sm:text-2xl font-bold text-accent",children:o(ms.totalEarnings)}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Subscriptions: ",o(ms.subscriptionRevenue)," • Service Fees: ",o(ms.serviceFees)]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Click to view breakdown"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 mb-4 sm:mb-6 md:mb-8",children:[t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/users"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx(Y,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"User Management"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"Manage hosts, guests, and permissions"})]})}),t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/listings"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx(W,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"Listings Review"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"Approve and moderate listings"})]})}),t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/payments"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx($,{className:"w-6 h-6 sm:w-8 sm:h-8 text-accent mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"Payment Management"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"Review and confirm payments"})]})}),t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/paypal-settings"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx(q,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"PayPal Settings"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"Configure PayPal account for subscriptions"})]})}),t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/analytics"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx(Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-secondary mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"Analytics"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"View platform performance metrics"})]})}),t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/reports"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx(J,{className:"w-6 h-6 sm:w-8 sm:h-8 text-secondary mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"Reports"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"Generate platform reports"})]})}),t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/policies"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx(K,{className:"w-6 h-6 sm:w-8 sm:h-8 text-muted-foreground mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"Policies & Settings"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"Manage platform policies"})]})}),t.jsx(r,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer touch-manipulation",onClick:()=>ls("/admin/messages"),children:t.jsxs(l,{className:"px-4 sm:px-6 pt-4 sm:pt-6 pb-3 sm:pb-4",children:[t.jsx(Q,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary mb-2"}),t.jsx(m,{className:"text-base sm:text-lg",children:"Messages"}),t.jsx(d,{className:"text-xs sm:text-sm",children:"View and respond to messages"})]})})]}),t.jsxs(r,{className:"shadow-medium",children:[t.jsx(l,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(m,{children:"Recent Activity"}),t.jsx(d,{children:"Latest platform events"})]}),t.jsxs(n,{onClick:()=>ls("/admin/create-event"),size:"sm",children:[t.jsx(X,{className:"h-4 w-4 mr-2"}),"Create Event"]})]})}),t.jsx(c,{children:t.jsx(ws,{})})]})]}),t.jsx(u,{open:xs,onOpenChange:ps,children:t.jsxs(j,{className:"max-w-[95vw] sm:max-w-6xl max-h-[90vh] overflow-y-auto p-3 sm:p-6",children:[t.jsxs(g,{className:"px-0 sm:px-0",children:[t.jsxs(N,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[t.jsx($,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Total Earnings Breakdown"]}),t.jsx(b,{className:"text-xs sm:text-sm",children:"Detailed breakdown of all platform earnings (subscription payments + service fees)"})]}),js?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(ss,{className:"h-8 w-8 animate-spin text-primary"}),t.jsx("p",{className:"ml-3 text-muted-foreground",children:"Loading breakdown..."})]}):0===hs.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(es,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),t.jsx("p",{className:"text-muted-foreground",children:"No earnings recorded yet"})]}):t.jsxs("div",{className:"space-y-3 sm:space-y-4 px-0 sm:px-0",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[t.jsx(r,{children:t.jsxs(c,{className:"pt-4 sm:pt-6 px-3 sm:px-6 pb-3 sm:pb-6",children:[t.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total Earnings"}),t.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-accent",children:o(hs.reduce((s,e)=>s+(e.amount||0),0))})]})}),t.jsx(r,{children:t.jsxs(c,{className:"pt-4 sm:pt-6 px-3 sm:px-6 pb-3 sm:pb-6",children:[t.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Subscription Revenue"}),t.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-primary",children:o(hs.filter(s=>"subscription"===s.earningsType).reduce((s,e)=>s+(e.amount||0),0))})]})}),t.jsx(r,{children:t.jsxs(c,{className:"pt-4 sm:pt-6 px-3 sm:px-6 pb-3 sm:pb-6",children:[t.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Service Fees"}),t.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:o(hs.filter(s=>"service_fee"===s.earningsType).reduce((s,e)=>s+(e.amount||0),0))})]})}),t.jsx(r,{children:t.jsxs(c,{className:"pt-4 sm:pt-6 px-3 sm:px-6 pb-3 sm:pb-6",children:[t.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total Transactions"}),t.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:hs.length})]})})]}),t.jsxs("div",{className:"border rounded-lg overflow-x-auto",children:[t.jsx("div",{className:"block md:hidden divide-y",children:hs.map(s=>t.jsxs("div",{className:"p-3 sm:p-4 space-y-2",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("p",{className:"text-xs text-muted-foreground",children:s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})}),t.jsx(C,{variant:"subscription"===s.earningsType?"default":"secondary",className:"subscription"===s.earningsType?"bg-primary text-xs":"bg-green-500 text-xs",children:"subscription"===s.earningsType?"Subscription":"Service Fee"})]}),t.jsxs("div",{className:"space-y-1 text-xs",children:[s.bookingId&&t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Booking ID: "}),t.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-xs",children:s.bookingId.slice(0,8)})]}),s.listingTitle&&t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Listing: "}),t.jsx("span",{className:"truncate block",children:s.listingTitle})]}),s.hostName&&t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Host: "}),t.jsx("span",{children:s.hostName})]}),s.hostEmail&&t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Email: "}),t.jsx("a",{href:"mailto:"+s.hostEmail,className:"text-primary hover:underline truncate block",children:s.hostEmail})]})]}),t.jsx("div",{className:"pt-1",children:t.jsx("p",{className:"text-base font-semibold text-accent",children:o(s.amount||0)})})]},s.id))}),t.jsx("div",{className:"hidden md:block",children:t.jsxs(f,{children:[t.jsx(v,{children:t.jsxs(w,{children:[t.jsx(y,{children:"Date"}),t.jsx(y,{children:"Type"}),t.jsx(y,{children:"Booking ID"}),t.jsx(y,{children:"Listing"}),t.jsx(y,{children:"Host Name"}),t.jsx(y,{children:"Host Email"}),t.jsx(y,{className:"text-right",children:"Amount"})]})}),t.jsx(k,{children:hs.map(s=>t.jsxs(w,{children:[t.jsx(A,{children:s.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}),t.jsx(A,{children:t.jsx(C,{variant:"subscription"===s.earningsType?"default":"secondary",className:"subscription"===s.earningsType?"bg-primary":"bg-green-500",children:"subscription"===s.earningsType?"Subscription":"Service Fee"})}),t.jsx(A,{children:s.bookingId?t.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:s.bookingId.slice(0,8)}):t.jsx("span",{className:"text-muted-foreground",children:"—"})}),t.jsx(A,{className:"max-w-[200px] truncate",children:s.listingTitle||"—"}),t.jsx(A,{children:s.hostName||"—"}),t.jsx(A,{children:s.hostEmail?t.jsx("a",{href:"mailto:"+s.hostEmail,className:"text-primary hover:underline text-sm",children:s.hostEmail}):"—"}),t.jsx(A,{className:"text-right font-semibold text-accent",children:o(s.amount||0)})]},s.id))})]})})]})]})]})}),t.jsx(R,{open:os,onOpenChange:ds,children:t.jsxs(U,{children:[t.jsxs(M,{children:[t.jsx(O,{children:"Sign Out"}),t.jsx(H,{children:"Are you sure you want to sign out? You'll need to sign in again to access your account."})]}),t.jsxs(z,{children:[t.jsx(_,{children:"Cancel"}),t.jsx(G,{onClick:async()=>{await rs(),ls("/")},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})})]})};export{as as default};
