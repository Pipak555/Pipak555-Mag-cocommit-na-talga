import{r as e,u as s,i as a,k as t,j as r,F as l,L as o}from"./react-vendor-DAkY0NgE.js";import{t as i}from"./form-vendor-ztDZwZ2b.js";import{u as n,B as c,L as d,C as m,a as x,b as u,c as h,d as p,e as j,f}from"./index-BbvEjZj9.js";import{I as g}from"./input-C1fDyqub.js";import{T as b,a as N,b as y,c as v}from"./tabs-yUgLCPKD.js";import{V as w}from"./video-background-ClFV52Pv.js";import{F as S,a as P,b as k,c as I,d as C,e as A,l as G,s as F}from"./validation-CGxThRcy.js";import{T as E}from"./theme-toggle-C3pYvPx7.js";import{s as V,a as z}from"./sanitize-GsD2yBhu.js";import{G as B,y as D}from"./firebase-vendor-CvoiOdvz.js";import{A as T,B as L,M,c as O,E as U,d as W}from"./icons-vendor-3zhgXMYa.js";import"./maps-vendor-CYGXCXz5.js";import"./utils-vendor-yBsXXcRr.js";import"./ui-vendor-CZx_xpmK.js";import"./label-kBNwlYyC.js";import"./dropdown-menu-BRbzCJvi.js";const _=()=>{const[_,H]=e.useState(!1),[J,R]=e.useState(!1),[q,K]=e.useState(!1),[Q,X]=e.useState(!1),[Y,Z]=e.useState(null),{signIn:$,signUp:ee,signInWithGoogle:se}=n(),ae=s(),te=a(),re=!0===te.state?.showSignup,le=t({resolver:i(G),defaultValues:{email:"",password:""}}),oe=t({resolver:i(F),defaultValues:{fullName:"",email:"",password:"",confirmPassword:""}});return r.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[r.jsx(w,{src:"/videos/landing-hero.mp4",overlay:!0,className:"z-0"}),r.jsx("header",{className:"relative z-10 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:r.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(c,{variant:"ghost",onClick:()=>ae("/"),children:[r.jsx(T,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),r.jsx(d,{size:"sm"})]}),r.jsx(E,{})]})}),r.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center p-6",children:r.jsxs(m,{className:"w-full max-w-md shadow-2xl border-border/50 bg-card/95 backdrop-blur-md",children:[r.jsxs(x,{className:"space-y-4 text-center pb-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-secondary/10 flex items-center justify-center",children:r.jsx(L,{className:"w-8 h-8 text-secondary"})}),r.jsxs("div",{children:[r.jsx(u,{className:"text-3xl font-bold",children:"Host Portal"}),r.jsx(h,{className:"text-base mt-2",children:"Start hosting and earning today"})]})]}),r.jsxs(p,{children:[r.jsxs(b,{defaultValue:re?"signup":"signin",className:"w-full",children:[r.jsxs(N,{className:"grid w-full grid-cols-2 mb-8",children:[r.jsx(y,{value:"signin",className:"text-base",children:"Sign In"}),r.jsx(y,{value:"signup",className:"text-base",children:"Sign Up"})]}),r.jsx(v,{value:"signin",children:r.jsx(S,{...le,children:r.jsxs("form",{onSubmit:le.handleSubmit(async e=>{K(!0);try{const s=V(e.email),a=z(e.password);await $(s,a,"host"),j.success("Welcome back!"),ae("/host/dashboard")}catch(s){if("EMAIL_NOT_VERIFIED"===s.message)return j.info("Please verify your email address to continue."),void ae("/verify-otp");j.error(s.message||"Unable to sign in. Please check your email and password, then try again.")}finally{K(!1)}}),className:"space-y-6",children:[r.jsx(P,{control:le.control,name:"email",render:({field:e})=>r.jsxs(k,{children:[r.jsx(I,{className:"text-base",children:"Email"}),r.jsx(C,{children:r.jsxs("div",{className:"relative",children:[r.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(g,{type:"email",placeholder:"host@example.com",className:"pl-10 h-12",...e})]})}),r.jsx(A,{})]})}),r.jsx(P,{control:le.control,name:"password",render:({field:e})=>r.jsxs(k,{children:[r.jsx(I,{className:"text-base",children:"Password"}),r.jsx(C,{children:r.jsxs("div",{className:"relative",children:[r.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(g,{type:_?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12",...e}),r.jsx("button",{type:"button",onClick:()=>H(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:_?r.jsx(U,{className:"h-5 w-5"}):r.jsx(W,{className:"h-5 w-5"})})]})}),r.jsx(A,{})]})}),r.jsx(c,{type:"submit",className:"w-full h-12 text-base",disabled:q,variant:"secondary",children:q?"Signing in...":"Sign In"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),r.jsx(c,{type:"button",variant:"outline",className:"w-full h-12 text-base",onClick:async()=>{if(!Q&&!q){X(!0);try{await se("host"),j.success("Welcome!"),ae("/host/dashboard")}catch(e){e.message?.includes("not registered as a host")||e.message?.includes("sign up for a host account first")?j.info("Please complete your host account registration"):j.error(e.message||"Failed to sign in with Google")}finally{X(!1)}}},disabled:Q||q,children:Q?"Signing in...":r.jsxs(r.Fragment,{children:[r.jsx(l,{className:"h-5 w-5 mr-2"}),"Sign in with Google"]})})]})})}),r.jsxs(v,{value:"signup",children:[r.jsxs("div",{className:"mb-6 p-4 bg-primary/10 border border-primary/20 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-foreground",children:[r.jsx("strong",{children:"Important:"})," Before creating your host account, you must read and accept our policies and compliance terms."]}),r.jsx(c,{type:"button",variant:"outline",className:"mt-3 w-full",onClick:()=>ae("/host/policies"),children:"Review Policies & Terms"})]}),r.jsx(S,{...oe,children:r.jsxs("form",{onSubmit:oe.handleSubmit(async e=>{if(K(!0),!sessionStorage.getItem("hostPolicyAccepted"))return j.error("To create a host account, you must first read and accept our policies and compliance terms. Please review them and accept before continuing."),ae("/host/policies"),void K(!1);try{const s=z(e.fullName),a=V(e.email),t=z(e.password),r=sessionStorage.getItem("hostPolicyAcceptedDate");await ee(a,t,s,"host",{policyAccepted:!0,policyAcceptedDate:r||(new Date).toISOString()}),sessionStorage.removeItem("hostPolicyAccepted"),sessionStorage.removeItem("hostPolicyAcceptedDate"),j.success("Account created! Please check your email to verify your account."),ae("/verification-pending")}catch(s){j.error(s.message||"Unable to create account. Please check your information and try again.")}finally{K(!1)}}),className:"space-y-6",children:[r.jsx(P,{control:oe.control,name:"fullName",render:({field:e})=>r.jsxs(k,{children:[r.jsx(I,{className:"text-base",children:"Full Name"}),r.jsx(C,{children:r.jsxs("div",{className:"relative",children:[r.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(g,{type:"text",placeholder:"Jane Smith",className:"pl-10 h-12",...e})]})}),r.jsx(A,{})]})}),r.jsx(P,{control:oe.control,name:"email",render:({field:e})=>r.jsxs(k,{children:[r.jsx(I,{className:"text-base",children:"Email"}),r.jsx(C,{children:r.jsxs("div",{className:"relative",children:[r.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(g,{type:"email",placeholder:"host@example.com",className:"pl-10 h-12",...e})]})}),r.jsx(A,{})]})}),r.jsx(P,{control:oe.control,name:"password",render:({field:e})=>r.jsxs(k,{children:[r.jsx(I,{className:"text-base",children:"Password"}),r.jsx(C,{children:r.jsxs("div",{className:"relative",children:[r.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(g,{type:_?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12",...e}),r.jsx("button",{type:"button",onClick:()=>H(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:_?r.jsx(U,{className:"h-5 w-5"}):r.jsx(W,{className:"h-5 w-5"})})]})}),r.jsx(A,{}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Must contain uppercase, lowercase, and number"})]})}),r.jsx(P,{control:oe.control,name:"confirmPassword",render:({field:e})=>r.jsxs(k,{children:[r.jsx(I,{className:"text-base",children:"Confirm Password"}),r.jsx(C,{children:r.jsxs("div",{className:"relative",children:[r.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),r.jsx(g,{type:J?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12",...e}),r.jsx("button",{type:"button",onClick:()=>R(!J),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:J?r.jsx(U,{className:"h-5 w-5"}):r.jsx(W,{className:"h-5 w-5"})})]})}),r.jsx(A,{})]})}),r.jsx(c,{type:"submit",className:"w-full h-12 text-base",disabled:q,variant:"secondary",children:q?"Creating account...":"Create Account"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),r.jsx(c,{type:"button",variant:"outline",className:"w-full h-12 text-base",onClick:async()=>{if(!Q&&!q){X(!0);try{const e=new B;e.setCustomParameters({prompt:"select_account"});const s=(await D(f,e)).user;oe.setValue("email",s.email||""),oe.setValue("fullName",s.displayName||s.email?.split("@")[0]||""),Z({email:s.email||"",fullName:s.displayName||s.email?.split("@")[0]||""}),j.success("Form pre-filled with your Google account! Please set a password to complete registration.")}catch(e){"auth/popup-closed-by-user"!==e.code&&"auth/cancelled-popup-request"!==e.code&&j.error(e.message||"Failed to get Google account info")}finally{X(!1)}}},disabled:Q||q,children:Q?"Getting info...":r.jsxs(r.Fragment,{children:[r.jsx(l,{className:"h-5 w-5 mr-2"}),"Autofill with Google"]})})]})})]})]}),r.jsx("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:r.jsxs("p",{children:["Not a host? ",r.jsx(o,{to:"/guest/login",className:"text-primary hover:underline font-medium",children:"Browse as Guest"})]})})]})]})})]})};export{_ as default};
