import{u as e,l as s,r as a,j as i}from"./react-vendor-Ve3SFwKO.js";import{u as n,j as t,h as l,v as r,B as c,C as d,a as o,b as m,c as x,d as h,i as u,e as j}from"./index-DaMaslBo.js";import{h as p,f,u as g}from"./firebase-vendor-BC71bXmb.js";import{I as b}from"./input-D5hloL4G.js";import{T as N,a as v,b as y,c as w}from"./tabs-C4BuYc9E.js";import{L as k}from"./label-B2t2XnWQ.js";import{B as C}from"./badge-BSgvUoVt.js";import{S}from"./switch-CSe7-F5W.js";import{E as D}from"./empty-state-BDfunuWx.js";import{C as A}from"./CouponManager-BpsyJxa1.js";import{hasActiveSubscription as F,getUserSubscription as R,getPlanById as P,cancelSubscription as U}from"./billingService-fa-KtGBm.js";import{A as B,a as E,b as M,c as O,d as L,e as I,f as Y,g as z}from"./alert-dialog-DLw-Qa8s.js";import{A as G,o as T,j as V,a6 as q,ab as H,h as K,M as W,ac as Z,T as $,ad as _,L as J}from"./icons-vendor-Dhca6XHc.js";import"./utils-vendor-DzY7Ay74.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-D9RGQy8n.js";const Q=()=>{const Q=e(),[X]=s(),{user:ee,userRole:se,refreshUserProfile:ae,signOut:ie,hasRole:ne}=n(),[te,le]=a.useState(null),[re,ce]=a.useState(!1),[de,oe]=a.useState([]),[me,xe]=a.useState([]),[he,ue]=a.useState(X.get("tab")||"profile"),[je,pe]=a.useState(!1),[fe,ge]=a.useState(!1),[be,Ne]=a.useState(!1),[ve,ye]=a.useState(null),[we,ke]=a.useState(null),[Ce,Se]=a.useState({email:{bookingConfirmations:!0,bookingCancellations:!0,bookingReminders:!0,newMessages:!0,paymentUpdates:!0,promotionalOffers:!0},inApp:{bookingUpdates:!0,newMessages:!0,paymentNotifications:!0,systemAlerts:!0}});a.useEffect(()=>{!ee||ne("host")?ee&&Ae():Q("/host/login")},[ee,se,Q]),a.useEffect(()=>{const e=X.get("tab");e&&ue(e)},[X]),a.useEffect(()=>{ee&&ne("host")&&(Fe(),De(),te?.notifications&&Se(te.notifications))},[ee,se,te]);const De=async()=>{if(ee)try{const e=await F(ee.uid);if(ke(e),e){const e=await R(ee.uid);ye(e)}}catch(e){ke(!1)}},Ae=async()=>{if(ee)try{const e=await p(f(t,"users",ee.uid));if(e.exists()){const s=e.data();le(s),xe(s.coupons||[])}}catch(e){}},Fe=async()=>{if(ee)try{const e=await l({hostId:ee.uid});oe(e)}catch(e){}};return te?i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-4xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs(c,{variant:"ghost",onClick:()=>{Q("/host/dashboard")},children:[i.jsx(G,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),i.jsx(c,{variant:"outline",onClick:()=>pe(!0),children:"Sign Out"})]}),i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Account Settings"}),i.jsxs(N,{value:he,onValueChange:ue,className:"space-y-6",children:[i.jsxs(v,{className:"grid w-full grid-cols-5",children:[i.jsxs(y,{value:"profile",children:[i.jsx(T,{className:"h-4 w-4 mr-2"}),"Profile"]}),i.jsxs(y,{value:"bookings",children:[i.jsx(V,{className:"h-4 w-4 mr-2"}),"Bookings"]}),i.jsxs(y,{value:"coupons",children:[i.jsx(q,{className:"h-4 w-4 mr-2"}),"Coupons"]}),i.jsxs(y,{value:"notifications",children:[i.jsx(H,{className:"h-4 w-4 mr-2"}),"Notifications"]}),i.jsxs(y,{value:"subscription",children:[i.jsx(K,{className:"h-4 w-4 mr-2"}),"Subscription"]})]}),i.jsx(w,{value:"profile",children:i.jsxs(d,{children:[i.jsxs(o,{children:[i.jsx(m,{children:"Profile Information"}),i.jsx(x,{children:"Update your account details"})]}),i.jsxs(h,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"fullName",children:"Full Name"}),i.jsx(b,{id:"fullName",type:"text",value:te.fullName,onChange:e=>le({...te,fullName:e.target.value}),placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx(k,{htmlFor:"email",children:"Email"}),i.jsx(b,{id:"email",type:"email",value:te.email,disabled:!0})]}),i.jsxs("div",{children:[i.jsx(k,{htmlFor:"role",children:"Role"}),i.jsx(b,{id:"role",value:te.role,disabled:!0})]}),i.jsxs("div",{children:[i.jsx(k,{htmlFor:"points",children:"Reward Points"}),i.jsx(b,{id:"points",value:te.points,disabled:!0})]}),i.jsxs("div",{children:[i.jsx(k,{htmlFor:"balance",children:"Wallet Balance"}),i.jsx(b,{id:"balance",value:u(te.walletBalance),disabled:!0})]}),i.jsx(c,{onClick:async()=>{if(ee&&te){ce(!0);try{await g(f(t,"users",ee.uid),{fullName:te.fullName}),await Ae(),await ae(),j.success("Profile updated successfully!")}catch(e){j.error("Failed to update profile")}finally{ce(!1)}}},disabled:re,children:re?"Saving...":"Save Changes"})]})]})}),i.jsx(w,{value:"bookings",children:i.jsxs(d,{children:[i.jsxs(o,{children:[i.jsx(m,{children:"Host Bookings"}),i.jsx(x,{children:"Manage your property bookings"})]}),i.jsx(h,{children:0===de.length?i.jsx(D,{icon:i.jsx(V,{className:"h-10 w-10"}),title:"No bookings yet",description:"No booking requests at this time."}):i.jsx("div",{className:"space-y-4",children:de.map(e=>i.jsxs("div",{className:"p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["Booking #",e.id.slice(0,8)]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(e.checkIn).toLocaleDateString()," - ",new Date(e.checkOut).toLocaleDateString()]})]}),i.jsx(C,{variant:"confirmed"===e.status?"default":"pending"===e.status?"secondary":"cancelled"===e.status?"destructive":"completed"===e.status?"outline":"secondary",children:e.status})]}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.guests," guest",e.guests>1?"s":""]}),i.jsx("p",{className:"font-semibold",children:u(e.totalPrice||0)})]})]},e.id))})})]})}),i.jsx(w,{value:"coupons",children:i.jsxs(d,{children:[i.jsxs(o,{children:[i.jsx(m,{children:"Coupons"}),i.jsx(x,{children:"Manage your promotional coupons"})]}),i.jsx(h,{children:i.jsx(A,{coupons:me,onApplyCoupon:e=>j.info(`Coupon ${e} applied`)})})]})}),i.jsx(w,{value:"notifications",children:i.jsxs(d,{children:[i.jsxs(o,{children:[i.jsx(m,{children:"Notification Preferences"}),i.jsx(x,{children:"Manage how you receive updates"})]}),i.jsxs(h,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[i.jsx(W,{className:"h-5 w-5 text-primary"}),i.jsx("h3",{className:"text-lg font-semibold",children:"Email Notifications"})]}),i.jsxs("div",{className:"space-y-3 pl-7",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"email-booking-confirmations",children:"Booking Confirmations"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive emails when bookings are confirmed"})]}),i.jsx(S,{id:"email-booking-confirmations",checked:Ce.email.bookingConfirmations,onCheckedChange:e=>Se(s=>({...s,email:{...s.email,bookingConfirmations:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"email-booking-cancellations",children:"Booking Cancellations"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive emails when bookings are cancelled"})]}),i.jsx(S,{id:"email-booking-cancellations",checked:Ce.email.bookingCancellations,onCheckedChange:e=>Se(s=>({...s,email:{...s.email,bookingCancellations:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"email-booking-reminders",children:"Booking Reminders"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive reminders about upcoming bookings"})]}),i.jsx(S,{id:"email-booking-reminders",checked:Ce.email.bookingReminders,onCheckedChange:e=>Se(s=>({...s,email:{...s.email,bookingReminders:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"email-new-messages",children:"New Messages"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive emails for new messages"})]}),i.jsx(S,{id:"email-new-messages",checked:Ce.email.newMessages,onCheckedChange:e=>Se(s=>({...s,email:{...s.email,newMessages:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"email-payment-updates",children:"Payment Updates"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive emails about payment transactions"})]}),i.jsx(S,{id:"email-payment-updates",checked:Ce.email.paymentUpdates,onCheckedChange:e=>Se(s=>({...s,email:{...s.email,paymentUpdates:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"email-promotional-offers",children:"Promotional Offers"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive promotional emails and special offers"})]}),i.jsx(S,{id:"email-promotional-offers",checked:Ce.email.promotionalOffers,onCheckedChange:e=>Se(s=>({...s,email:{...s.email,promotionalOffers:e}}))})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[i.jsx(Z,{className:"h-5 w-5 text-secondary"}),i.jsx("h3",{className:"text-lg font-semibold",children:"In-App Notifications"})]}),i.jsxs("div",{className:"space-y-3 pl-7",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"inapp-booking-updates",children:"Booking Updates"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified about booking status changes"})]}),i.jsx(S,{id:"inapp-booking-updates",checked:Ce.inApp.bookingUpdates,onCheckedChange:e=>Se(s=>({...s,inApp:{...s.inApp,bookingUpdates:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"inapp-new-messages",children:"New Messages"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified about new messages"})]}),i.jsx(S,{id:"inapp-new-messages",checked:Ce.inApp.newMessages,onCheckedChange:e=>Se(s=>({...s,inApp:{...s.inApp,newMessages:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"inapp-payment-notifications",children:"Payment Notifications"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified about payment activities"})]}),i.jsx(S,{id:"inapp-payment-notifications",checked:Ce.inApp.paymentNotifications,onCheckedChange:e=>Se(s=>({...s,inApp:{...s.inApp,paymentNotifications:e}}))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(k,{htmlFor:"inapp-system-alerts",children:"System Alerts"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive important system notifications"})]}),i.jsx(S,{id:"inapp-system-alerts",checked:Ce.inApp.systemAlerts,onCheckedChange:e=>Se(s=>({...s,inApp:{...s.inApp,systemAlerts:e}}))})]})]})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsx(c,{onClick:async()=>{if(ee){ce(!0);try{await g(f(t,"users",ee.uid),{notifications:Ce}),await ae(),j.success("Notification preferences saved!")}catch(e){j.error("Failed to save notification preferences")}finally{ce(!1)}}},disabled:re,children:re?"Saving...":"Save Preferences"})})]})]})}),i.jsx(w,{value:"subscription",children:i.jsxs(d,{children:[i.jsxs(o,{children:[i.jsx(m,{children:"Subscription Management"}),i.jsx(x,{children:"View and manage your host subscription"})]}),i.jsx(h,{className:"space-y-6",children:null===we?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading subscription..."})]}):!1!==we&&ve?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"border rounded-lg p-6 bg-green-500/10 border-green-500/50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center",children:i.jsx(K,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:ve.planName}),i.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[ve.billingCycle," billing"]})]})]}),i.jsx(C,{variant:"outline",className:"cancelled"===ve.status?"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/50":"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/50",children:"cancelled"===ve.status?"Cancelled (Active Until End)":"Active"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount"}),i.jsxs("p",{className:"text-lg font-semibold",children:[u(ve.amount),"/",ve.billingCycle]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Payment Method"}),i.jsx("p",{className:"text-lg font-semibold capitalize",children:ve.paymentMethod})]}),ve.startDate&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Start Date"}),i.jsx("p",{className:"text-lg font-semibold",children:new Date(ve.startDate).toLocaleDateString()})]}),ve.endDate&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Expires"}),i.jsx("p",{className:"text-lg font-semibold",children:new Date(ve.endDate).toLocaleDateString()})]}),ve.nextBillingDate&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Next Billing"}),i.jsx("p",{className:"text-lg font-semibold",children:new Date(ve.nextBillingDate).toLocaleDateString()})]})]}),(()=>{const e=P(ve.planId);return e&&e.features?i.jsxs("div",{className:"mt-6 pt-6 border-t",children:[i.jsx("h4",{className:"font-semibold mb-3",children:"Plan Features"}),i.jsx("ul",{className:"space-y-2",children:e.features.map((e,s)=>i.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-600 dark:bg-green-400"}),e]},s))})]}):null})()]}),"cancelled"===ve.status&&i.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/30 dark:to-orange-900/30 border-2 border-yellow-300 dark:border-yellow-700 rounded-lg p-4 mb-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx($,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-100 mb-1",children:"Subscription Cancelled"}),i.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Your subscription has been cancelled. You'll continue to have full access to all features until"," ",i.jsx("strong",{children:ve.endDate?new Date(ve.endDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"the end of your billing period"}),"."]})]})]})}),i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 border-2 border-blue-300 dark:border-blue-700 rounded-lg p-5 shadow-md",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center",children:i.jsx(_,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-base font-bold text-blue-900 dark:text-blue-100 mb-3",children:"Cancellation & Refund Policy"}),i.jsxs("div",{className:"space-y-2.5 text-sm text-blue-800 dark:text-blue-200",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"Non-Refundable:"})," Subscriptions are non-refundable. Once payment is processed, refunds will not be available under any circumstances."]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"Active Until End Date:"})," If you cancel your subscription, your plan will remain ",i.jsx("strong",{children:"fully active"})," until"," ",i.jsx("strong",{className:"font-bold text-blue-900 dark:text-blue-100",children:ve.endDate?new Date(ve.endDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"the end of your billing period"}),"."]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"Full Access:"})," You'll continue to have access to all features, can create and manage listings, and receive bookings until your subscription expires."]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"After Expiration:"})," Once your subscription ends, you'll need to resubscribe to continue using host features and managing your listings."]})]})]})]})]})}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs(c,{variant:"outline",onClick:()=>Q("/host/register"),className:"flex-1",children:[i.jsx(K,{className:"h-4 w-4 mr-2"}),"Change Plan"]}),i.jsx(c,{variant:"outline",onClick:()=>ge(!0),disabled:"cancelled"===ve.status,className:"flex-1",children:"cancelled"===ve.status?"Already Cancelled":"Cancel Subscription"})]})]}):i.jsxs("div",{className:"text-center py-8 space-y-4",children:[i.jsx(K,{className:"h-16 w-16 text-muted-foreground mx-auto opacity-50"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Active Subscription"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"You need an active subscription to create and manage listings."}),i.jsxs(c,{onClick:()=>Q("/host/register"),children:[i.jsx(K,{className:"h-4 w-4 mr-2"}),"Subscribe Now"]})]})]})})]})})]})]}),i.jsx(B,{open:je,onOpenChange:pe,children:i.jsxs(E,{children:[i.jsxs(M,{children:[i.jsx(O,{children:"Sign Out"}),i.jsx(L,{children:"Are you sure you want to sign out? You'll need to sign in again to access your account."})]}),i.jsxs(I,{children:[i.jsx(Y,{children:"Cancel"}),i.jsx(z,{onClick:async()=>{await ie(),Q("/")},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})}),i.jsx(B,{open:fe,onOpenChange:ge,children:i.jsxs(E,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(M,{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center flex-shrink-0",children:i.jsx($,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsx(O,{className:"text-xl",children:"Cancel Subscription"})]}),i.jsx(L,{className:"text-base pt-2",children:"Are you sure you want to cancel your subscription?"})]}),i.jsxs("div",{className:"my-6 space-y-4",children:[i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-red-900 dark:text-red-100 mb-3 flex items-center gap-2",children:[i.jsx($,{className:"h-5 w-5"}),"Important: Non-Refundable Subscription Policy"]}),i.jsxs("div",{className:"space-y-2.5 text-sm text-red-800 dark:text-red-200",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold mt-0.5",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"NON-REFUNDABLE:"})," This subscription is non-refundable. Once payment is processed, refunds will not be available under any circumstances."]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold mt-0.5",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"Active Until End Date:"})," If you cancel, your plan will remain"," ",i.jsx("strong",{className:"font-bold",children:"fully active"})," until"," ",i.jsx("strong",{className:"font-bold text-red-900 dark:text-red-100",children:ve?.endDate?new Date(ve.endDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"the end of your billing period"}),"."]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold mt-0.5",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"Full Access:"})," You'll continue to have access to all features, can create and manage listings, and receive bookings until your subscription expires."]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold mt-0.5",children:"•"}),i.jsxs("span",{children:[i.jsx("strong",{className:"font-bold",children:"After Expiration:"})," Once your subscription ends, you'll lose access to host features and will need to resubscribe to continue."]})]})]})]}),ve&&i.jsxs("div",{className:"bg-muted/50 border border-border rounded-lg p-4",children:[i.jsx("h5",{className:"font-semibold mb-2",children:"Current Subscription Details:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),i.jsx("p",{className:"font-medium",children:ve.planName})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle:"}),i.jsx("p",{className:"font-medium capitalize",children:ve.billingCycle})]}),ve.endDate&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),i.jsx("p",{className:"font-medium",children:new Date(ve.endDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]})]}),i.jsxs(I,{className:"flex-col sm:flex-row gap-2",children:[i.jsx(Y,{className:"w-full sm:w-auto",disabled:be,children:"Keep Subscription"}),i.jsx(z,{onClick:async()=>{if(ve&&ee){Ne(!0);try{await U(ve.id),j.success("Subscription cancelled successfully. Your plan will remain active until the end of the billing period."),await De(),ge(!1)}catch(e){j.error(e.message||"Failed to cancel subscription. Please try again or contact support.")}finally{Ne(!1)}}else j.error("Subscription information not available")},disabled:be,className:"w-full sm:w-auto bg-destructive text-destructive-foreground hover:bg-destructive/90 disabled:opacity-50",children:be?i.jsxs(i.Fragment,{children:[i.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Cancelling..."]}):"Yes, Cancel Subscription"})]})]})})]}):i.jsx(r,{})};export{Q as default};
