import{r as e,u as s,k as a,j as t,F as r,L as i}from"./react-vendor-DcULH_Au.js";import{t as l}from"./form-vendor-B9GYGFCT.js";import{u as o,B as n,L as c,C as d,a as m,b as x,c as u,d as p,e as h,f as j}from"./index-F95ZJi6y.js";import{I as f}from"./input-CGAn_-_v.js";import{T as g,a as b,b as y,c as v}from"./tabs-nf6BJST9.js";import{V as N}from"./video-background-D2BJi4ly.js";import{F as w,a as S,b as k,c as P,d as C,e as F,l as z,s as G}from"./validation-5uF669uT.js";import{T as I}from"./theme-toggle-CJqSL7LK.js";import{s as V,a as E}from"./sanitize-GsD2yBhu.js";import{G as T,y as U}from"./firebase-vendor-BtzXZj7S.js";import{A,U as M,M as O,c as W,E as B,d as L}from"./icons-vendor-D18eSOBA.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-C9dhA_ey.js";import"./label-BX6RxrV3.js";import"./dropdown-menu-C4xHPRIa.js";const _=()=>{const[_,D]=e.useState(!1),[H,R]=e.useState(!1),[q,J]=e.useState(!1),[K,Q]=e.useState(!1),[X,Y]=e.useState(null),{signIn:Z,signUp:$,signInWithGoogle:ee}=o(),se=s(),ae=a({resolver:l(z),defaultValues:{email:"",password:""}}),te=a({resolver:l(G),defaultValues:{fullName:"",email:"",password:"",confirmPassword:""}});return t.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[t.jsx(N,{src:"/videos/landing-hero.mp4",overlay:!0,className:"z-0"}),t.jsx("header",{className:"relative z-10 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:t.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(n,{variant:"ghost",onClick:()=>se("/"),children:[t.jsx(A,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),t.jsx(c,{size:"sm"})]}),t.jsx(I,{})]})}),t.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center p-6",children:t.jsxs(d,{className:"w-full max-w-md shadow-2xl border-2 border-primary/20 bg-card/95 backdrop-blur-md relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 pointer-events-none"}),t.jsxs(m,{className:"space-y-4 text-center pb-8 relative z-10",children:[t.jsx("div",{className:"w-20 h-20 mx-auto rounded-3xl bg-gradient-to-br from-primary via-primary/80 to-secondary/60 flex items-center justify-center shadow-lg ring-4 ring-primary/20 animate-in fade-in zoom-in duration-500",children:t.jsx(M,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(x,{className:"text-4xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Guest Portal"}),t.jsx(u,{className:"text-base mt-2 font-medium",children:"Start your adventure today"})]})]}),t.jsxs(p,{className:"relative z-10",children:[t.jsxs(g,{defaultValue:"signin",className:"w-full",children:[t.jsxs(b,{className:"grid w-full grid-cols-2 mb-8 bg-muted/50 p-1 rounded-xl",children:[t.jsx(y,{value:"signin",className:"text-base font-semibold data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/80 data-[state=active]:text-white data-[state=active]:shadow-md transition-all",children:"Sign In"}),t.jsx(y,{value:"signup",className:"text-base font-semibold data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-primary/80 data-[state=active]:text-white data-[state=active]:shadow-md transition-all",children:"Sign Up"})]}),t.jsx(v,{value:"signin",children:t.jsx(w,{...ae,children:t.jsxs("form",{onSubmit:ae.handleSubmit(async e=>{J(!0);try{const s=V(e.email),a=E(e.password);await Z(s,a,"guest"),h.success("Welcome back!"),se("/guest/dashboard")}catch(s){if("EMAIL_NOT_VERIFIED"===s.message)return h.info("Please verify your email address to continue."),void se("/verify-otp");h.error(s.message||"Unable to sign in. Please check your email and password, then try again.")}finally{J(!1)}}),className:"space-y-6",children:[t.jsx(S,{control:ae.control,name:"email",render:({field:e})=>t.jsxs(k,{children:[t.jsx(P,{className:"text-base font-semibold",children:"Email"}),t.jsx(C,{children:t.jsxs("div",{className:"relative group",children:[t.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),t.jsx(f,{type:"email",placeholder:"guest@example.com",className:"pl-10 h-12 border-2 transition-all",...e})]})}),t.jsx(F,{})]})}),t.jsx(S,{control:ae.control,name:"password",render:({field:e})=>t.jsxs(k,{children:[t.jsx(P,{className:"text-base font-semibold",children:"Password"}),t.jsx(C,{children:t.jsxs("div",{className:"relative group",children:[t.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),t.jsx(f,{type:_?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12 border-2 transition-all",...e}),t.jsx("button",{type:"button",onClick:()=>D(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:_?t.jsx(B,{className:"h-5 w-5"}):t.jsx(L,{className:"h-5 w-5"})})]})}),t.jsx(F,{})]})}),t.jsx("div",{className:"flex justify-end",children:t.jsx(n,{type:"button",variant:"link",onClick:()=>se("/forgot-password",{state:{userType:"guest"}}),className:"text-sm text-primary hover:text-primary/80 p-0 h-auto font-semibold",children:"Forgot Password?"})}),t.jsx(n,{type:"submit",className:"w-full h-12 text-base font-semibold bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300",disabled:q,children:q?"Signing in...":"Sign In"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t"})}),t.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:t.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),t.jsx(n,{type:"button",variant:"outline",className:"w-full h-12 text-base font-semibold border-2 hover:bg-muted/50 hover:border-primary/50 transition-all duration-300",onClick:async()=>{if(!K&&!q){Q(!0);try{await ee("guest"),h.success("Welcome!"),se("/guest/dashboard")}catch(e){e.message?.includes("not registered as a guest")||e.message?.includes("sign up for a guest account first")?h.info("Please complete your guest account registration"):h.error(e.message||"Failed to sign in with Google")}finally{Q(!1)}}},disabled:K||q,children:K?"Signing in...":t.jsxs(t.Fragment,{children:[t.jsx(r,{className:"h-5 w-5 mr-2"}),"Sign in with Google"]})})]})})}),t.jsx(v,{value:"signup",children:t.jsx(w,{...te,children:t.jsxs("form",{onSubmit:te.handleSubmit(async e=>{J(!0);try{const s=E(e.fullName),a=V(e.email),t=E(e.password);await $(a,t,s,"guest"),h.success("Account created! Please check your email to verify your account."),se("/verification-pending")}catch(s){h.error(s.message||"Unable to create account. Please check your information and try again.")}finally{J(!1)}}),className:"space-y-6",children:[t.jsx(S,{control:te.control,name:"fullName",render:({field:e})=>t.jsxs(k,{children:[t.jsx(P,{className:"text-base font-semibold",children:"Full Name"}),t.jsx(C,{children:t.jsxs("div",{className:"relative group",children:[t.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),t.jsx(f,{type:"text",placeholder:"John Doe",className:"pl-10 h-12 border-2 transition-all",...e})]})}),t.jsx(F,{})]})}),t.jsx(S,{control:te.control,name:"email",render:({field:e})=>t.jsxs(k,{children:[t.jsx(P,{className:"text-base font-semibold",children:"Email"}),t.jsx(C,{children:t.jsxs("div",{className:"relative group",children:[t.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),t.jsx(f,{type:"email",placeholder:"guest@example.com",className:"pl-10 h-12 border-2 transition-all",...e})]})}),t.jsx(F,{})]})}),t.jsx(S,{control:te.control,name:"password",render:({field:e})=>t.jsxs(k,{children:[t.jsx(P,{className:"text-base font-semibold",children:"Password"}),t.jsx(C,{children:t.jsxs("div",{className:"relative group",children:[t.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),t.jsx(f,{type:_?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12 border-2 transition-all",...e}),t.jsx("button",{type:"button",onClick:()=>D(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:_?t.jsx(B,{className:"h-5 w-5"}):t.jsx(L,{className:"h-5 w-5"})})]})}),t.jsx(F,{}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]})}),t.jsx(S,{control:te.control,name:"confirmPassword",render:({field:e})=>t.jsxs(k,{children:[t.jsx(P,{className:"text-base font-semibold",children:"Confirm Password"}),t.jsx(C,{children:t.jsxs("div",{className:"relative group",children:[t.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),t.jsx(f,{type:H?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 h-12 border-2 transition-all",...e}),t.jsx("button",{type:"button",onClick:()=>R(!H),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:H?t.jsx(B,{className:"h-5 w-5"}):t.jsx(L,{className:"h-5 w-5"})})]})}),t.jsx(F,{})]})}),t.jsx(n,{type:"submit",className:"w-full h-12 text-base font-semibold bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300",disabled:q,children:q?"Creating account...":"Create Account"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t"})}),t.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:t.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),t.jsx(n,{type:"button",variant:"outline",className:"w-full h-12 text-base font-semibold border-2 hover:bg-muted/50 hover:border-primary/50 transition-all duration-300",onClick:async()=>{if(!K&&!q){Q(!0);try{const e=new T;e.setCustomParameters({prompt:"select_account"});const s=(await U(j,e)).user;te.setValue("email",s.email||""),te.setValue("fullName",s.displayName||s.email?.split("@")[0]||""),Y({email:s.email||"",fullName:s.displayName||s.email?.split("@")[0]||""}),h.success("Signed up with Google! Please set a password to complete registration.")}catch(e){"auth/popup-closed-by-user"!==e.code&&"auth/cancelled-popup-request"!==e.code&&h.error(e.message||"Failed to get Google account info")}finally{Q(!1)}}},disabled:K||q,children:K?"Signing up...":t.jsxs(t.Fragment,{children:[t.jsx(r,{className:"h-5 w-5 mr-2"}),"Sign up with Google"]})})]})})})]}),t.jsx("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:t.jsxs("p",{children:["Want to host? ",t.jsx(i,{to:"/host/login",className:"text-primary hover:text-primary/80 hover:underline font-semibold transition-colors",children:"Become a Host"})]})})]})]})})]})};export{_ as default};
