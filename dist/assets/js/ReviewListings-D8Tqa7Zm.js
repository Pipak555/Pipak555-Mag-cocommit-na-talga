import{u as s,r as e,j as i}from"./react-vendor-DAkY0NgE.js";import{p as r,e as a,B as t,x as n,F as l}from"./index-BbvEjZj9.js";import{L as c}from"./ListingCard-YDL4intN.js";import{A as d,a as o,b as h,c as j,d as x,e as m,f as u,g as p}from"./alert-dialog-D9Kc0D1X.js";import{A as g}from"./icons-vendor-3zhgXMYa.js";import"./maps-vendor-CYGXCXz5.js";import"./utils-vendor-yBsXXcRr.js";import"./ui-vendor-CZx_xpmK.js";import"./firebase-vendor-CvoiOdvz.js";import"./badge-Bdu_tSqo.js";const v=()=>{const v=s(),[f,b]=e.useState([]),[y,N]=e.useState(!0),[w,C]=e.useState(!1),[k,A]=e.useState(!1),[L,R]=e.useState(null);e.useEffect(()=>{S()},[]);const S=async()=>{try{N(!0);const s=await r({status:"pending"});b(s),s.length}catch(s){a.error("Failed to load listings: "+(s.message||"Unknown error"))}finally{N(!1)}};return i.jsxs("div",{className:"min-h-screen bg-background p-6",children:[i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs(t,{variant:"ghost",onClick:()=>v("/admin/dashboard"),className:"mb-6",children:[i.jsx(g,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Review Pending Listings"}),y?i.jsx(n,{}):0===f.length?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-muted-foreground",children:"No pending listings"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(s=>i.jsxs("div",{children:[i.jsx(c,{listing:s}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx(t,{variant:"default",size:"sm",className:"flex-1",onClick:()=>{return e=s.id,R(e),void C(!0);var e},children:"Approve"}),i.jsx(t,{variant:"destructive",size:"sm",className:"flex-1",onClick:()=>{return e=s.id,R(e),void A(!0);var e},children:"Reject"})]})]},s.id))})]}),i.jsx(d,{open:w,onOpenChange:C,children:i.jsxs(o,{children:[i.jsxs(h,{children:[i.jsx(j,{children:"Approve Listing?"}),i.jsx(x,{children:"Are you sure you want to approve this listing? It will be published and visible to all users."})]}),i.jsxs(m,{children:[i.jsx(u,{onClick:()=>R(null),children:"Cancel"}),i.jsx(p,{onClick:async()=>{if(L)try{await l(L,{status:"approved"}),a.success("Listing approved"),S(),R(null)}catch(s){a.error("Failed to approve listing")}finally{C(!1)}},children:"Approve"})]})]})}),i.jsx(d,{open:k,onOpenChange:A,children:i.jsxs(o,{children:[i.jsxs(h,{children:[i.jsx(j,{children:"Reject Listing?"}),i.jsx(x,{children:"Are you sure you want to reject this listing? The host will be notified and the listing will not be published."})]}),i.jsxs(m,{children:[i.jsx(u,{onClick:()=>R(null),children:"Cancel"}),i.jsx(p,{onClick:async()=>{if(L)try{await l(L,{status:"rejected"}),a.success("Listing rejected"),S(),R(null)}catch(s){a.error("Failed to reject listing")}finally{A(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Reject"})]})]})})]})};export{v as default};
