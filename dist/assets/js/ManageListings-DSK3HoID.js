import{u as e,r as s,j as t}from"./react-vendor-DcULH_Au.js";import{u as r,m as a,e as i,B as n,n as l}from"./index-F95ZJi6y.js";import{B as d}from"./badge-BPytCQbI.js";import{L as c}from"./ListingCard-D08Qz4_k.js";import{T as o}from"./theme-toggle-CJqSL7LK.js";import{A as m,a as x,b as h,c as u,d as j,e as g,f,g as p}from"./alert-dialog-Ce5W9-KF.js";import{A as v,H as b,P as N}from"./icons-vendor-D18eSOBA.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-C9dhA_ey.js";import"./firebase-vendor-BtzXZj7S.js";import"./dropdown-menu-C4xHPRIa.js";const y=()=>{const y=e(),{user:w}=r(),[C,k]=s.useState([]),[L,z]=s.useState(!0),[A,S]=s.useState(!1),[D,F]=s.useState(null);s.useEffect(()=>{w&&M()},[w]);const M=async()=>{if(w)try{z(!0);const e=await a({hostId:w.uid});k(e)}catch(e){i.error("Failed to load listings: "+(e.message||"Unknown error"))}finally{z(!1)}};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-soft",children:t.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(n,{variant:"ghost",size:"icon",onClick:()=>y("/host/dashboard"),children:t.jsx(v,{className:"h-5 w-5"})}),t.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:t.jsx(b,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold",children:"My Listings"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage your properties"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(o,{}),t.jsxs(n,{onClick:()=>y("/host/create-listing"),children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),"Create Listing"]})]})]})}),t.jsx("div",{className:"max-w-7xl mx-auto p-6",children:L?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):0===C.length?t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:t.jsx(b,{className:"w-10 h-10 text-muted-foreground"})}),t.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No listings yet"}),t.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first listing to start hosting"}),t.jsxs(n,{size:"lg",onClick:()=>y("/host/create-listing"),children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),"Create Your First Listing"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(e=>t.jsxs("div",{className:"group",children:[t.jsx(c,{listing:e}),t.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[t.jsx(d,{variant:"draft"===e.status?"secondary":"default",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),t.jsx("span",{className:"text-sm text-muted-foreground",children:e.category})]}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx(n,{variant:"outline",size:"sm",className:"flex-1 hover:bg-primary hover:text-primary-foreground",onClick:()=>y("/host/create-listing?edit="+e.id),children:"draft"===e.status?"Resume":"Edit"}),t.jsx(n,{variant:"destructive",size:"sm",className:"flex-1",onClick:()=>{return s=e.id,F(s),void S(!0);var s},children:"Delete"})]})]},e.id))})}),t.jsx(m,{open:A,onOpenChange:S,children:t.jsxs(x,{children:[t.jsxs(h,{children:[t.jsx(u,{children:"Delete Listing?"}),t.jsx(j,{children:"Are you sure you want to delete this listing? This action cannot be undone. Any associated bookings and reviews will be affected."})]}),t.jsxs(g,{children:[t.jsx(f,{onClick:()=>F(null),children:"Cancel"}),t.jsx(p,{onClick:async()=>{if(D)try{await l(D),i.success("Listing deleted"),M(),F(null)}catch(e){i.error("Failed to delete listing")}finally{S(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})};export{y as default};
