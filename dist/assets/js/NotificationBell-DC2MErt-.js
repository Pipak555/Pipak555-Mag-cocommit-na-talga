import{r as e,j as s,u as a}from"./react-vendor-BMVo5gto.js";import{J as t,C as r,a as i,b as l,B as c,d as n}from"./index-BbQqfVom.js";import{S as d}from"./scroll-area-BZ9Ss1y2.js";import{B as o}from"./badge-0vFpitRp.js";import{H as m}from"./utils-vendor-yBsXXcRr.js";import{a8 as x,af as h,X as p,L as u,C as j,I as g,m as N,l as f,j as v}from"./icons-vendor-D1YpcxsO.js";const w=e=>{switch(e){case"booking":return s.jsx(v,{className:"h-4 w-4"});case"message":return s.jsx(f,{className:"h-4 w-4"});case"payment":return s.jsx(N,{className:"h-4 w-4"});case"review":return s.jsx(g,{className:"h-4 w-4"});case"system":return s.jsx(j,{className:"h-4 w-4"});default:return s.jsx(x,{className:"h-4 w-4"})}},y=e=>{switch(e){case"booking":return"bg-blue-500/10 text-blue-600 dark:text-blue-400";case"message":return"bg-green-500/10 text-green-600 dark:text-green-400";case"payment":return"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400";case"review":return"bg-purple-500/10 text-purple-600 dark:text-purple-400";case"system":return"bg-gray-500/10 text-gray-600 dark:text-gray-400";default:return"bg-primary/10 text-primary"}},b=({onClose:a,onNavigate:j})=>{const{notifications:g,unreadCount:N,loading:f,markAsRead:v,markAllAsRead:b,removeNotification:k}=t(),C=e.useMemo(()=>g.filter(e=>!e.read),[g]),z=e.useMemo(()=>g.filter(e=>e.read),[g]),A=async e=>{e.read||await v(e.id),e.actionUrl&&j(e.actionUrl)},S=async(e,s)=>{e.stopPropagation(),await k(s)};return s.jsxs(r,{className:"absolute right-0 top-12 w-96 max-w-[calc(100vw-2rem)] max-h-[600px] z-50 shadow-xl border",children:[s.jsx(i,{className:"pb-3 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(l,{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(x,{className:"h-5 w-5"}),"Notifications",N>0&&s.jsx(o,{variant:"destructive",className:"ml-2",children:N})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[N>0&&s.jsxs(c,{variant:"ghost",size:"sm",onClick:async()=>{await b()},className:"text-xs",children:[s.jsx(h,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),s.jsx(c,{variant:"ghost",size:"icon",onClick:a,className:"h-8 w-8",children:s.jsx(p,{className:"h-4 w-4"})})]})]})}),s.jsx(n,{className:"p-0",children:f?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(u,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===g.length?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[s.jsx(x,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No notifications"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You're all caught up!"})]}):s.jsx(d,{className:"h-[500px]",children:s.jsxs("div",{className:"divide-y",children:[C.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"px-4 py-2 bg-muted/50",children:s.jsxs("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:["Unread (",C.length,")"]})}),C.map(e=>s.jsx("div",{className:"px-4 py-3 hover:bg-accent transition-colors cursor-pointer relative group",onClick:()=>A(e),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg "+y(e.type),children:w(e.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("p",{className:"text-sm font-semibold line-clamp-1",children:e.title}),s.jsx(c,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>S(s,e.id),children:s.jsx(p,{className:"h-3 w-3"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:m(new Date(e.createdAt),{addSuffix:!0})})]}),s.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-1 flex-shrink-0"})]})},e.id))]}),z.length>0&&s.jsxs("div",{children:[C.length>0&&s.jsx("div",{className:"px-4 py-2 bg-muted/30",children:s.jsxs("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:["Earlier (",z.length,")"]})}),z.map(e=>s.jsx("div",{className:"px-4 py-3 hover:bg-accent transition-colors cursor-pointer relative group opacity-75",onClick:()=>A(e),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg "+y(e.type),children:w(e.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("p",{className:"text-sm font-medium line-clamp-1",children:e.title}),s.jsx(c,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>S(s,e.id),children:s.jsx(p,{className:"h-3 w-3"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:m(new Date(e.createdAt),{addSuffix:!0})})]})]})},e.id))]})]})})})]})},k=()=>{const{unreadCount:r}=t(),[i,l]=e.useState(!1),n=a(),d=r>0;return s.jsxs("div",{className:"relative",children:[s.jsxs(c,{variant:"ghost",size:"icon",className:"relative",onClick:()=>l(!i),"aria-label":"Notifications",children:[s.jsx(x,{className:"h-5 w-5"}),d&&s.jsx(o,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs bg-destructive hover:bg-destructive",variant:"destructive",children:r>9?"9+":r})]}),i&&s.jsx(b,{onClose:()=>l(!1),onNavigate:e=>{l(!1),n(e)}})]})};export{k as N};
