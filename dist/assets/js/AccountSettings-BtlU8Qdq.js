const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-BnushFQy.js","assets/js/react-vendor-Ve3SFwKO.js","assets/js/utils-vendor-DzY7Ay74.js","assets/js/maps-vendor-CYGXCXz5.js","assets/maps-vendor-Dgihpmma.css","assets/js/ui-vendor-D9RGQy8n.js","assets/js/icons-vendor-DD8ZfUKZ.js","assets/js/firebase-vendor-BC71bXmb.js","assets/index-CZT-s-DH.css"])))=>i.map(i=>d[i]);
import{u as s,j as e,_ as i,h as a,v as t,B as l,C as r,b as n,c as o,d as c,e as d,i as h,a as u,t as x}from"./index-BnushFQy.js";import{u as j,l as m,r as g,j as p}from"./react-vendor-Ve3SFwKO.js";import{h as f,f as v,u as y}from"./firebase-vendor-BC71bXmb.js";import{I as w}from"./input-C6C1u0Er.js";import{T as N,a as b,b as S,c as k}from"./tabs-DPlck8m_.js";import{L}from"./label-DdT-oWKe.js";import{B as C}from"./badge-CYghlWc2.js";import{L as F}from"./ListingCard-D6Td60Vf.js";import{E as P}from"./empty-state-BDfunuWx.js";import{C as _}from"./CouponManager-pfYFfol6.js";import{A as B,o as E,p as M,q as A,j as I,a6 as D,ab as R,S as V}from"./icons-vendor-DD8ZfUKZ.js";import"./ui-vendor-D9RGQy8n.js";import"./utils-vendor-DzY7Ay74.js";import"./maps-vendor-CYGXCXz5.js";const W=()=>{const W=j(),[O]=m(),{user:T,userRole:q,refreshUserProfile:z}=s(),[U,Y]=g.useState(null),[H,Z]=g.useState(!1),[$,G]=g.useState([]),[J,K]=g.useState([]),[Q,X]=g.useState([]),[ss,es]=g.useState([]),[is,as]=g.useState([]),[ts,ls]=g.useState([]),[rs,ns]=g.useState(O.get("tab")||"profile");g.useEffect(()=>{T&&os()},[T,q]),g.useEffect(()=>{const s=O.get("tab");s&&ns(s)},[O]),g.useEffect(()=>{T&&U&&"guest"===q?(cs(),ds(),hs()):T&&"host"===q&&hs()},[T,U,q]);const os=async()=>{if(T)try{const s=await f(v(e,"users",T.uid));if(s.exists()){const e=s.data();Y(e),es(e.favorites||[]),as(e.wishlist||[]),ls(e.coupons||[])}}catch(s){}},cs=async()=>{if(T&&U?.favorites?.length)try{const{getListing:s}=await i(async()=>{const{getListing:s}=await import("./index-BnushFQy.js").then(s=>s.W);return{getListing:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),e=await Promise.all(U.favorites.map(e=>s(e)));G(e.filter(s=>null!==s))}catch(s){G([])}else G([])},ds=async()=>{if(T&&U?.wishlist?.length)try{const{getListing:s}=await i(async()=>{const{getListing:s}=await import("./index-BnushFQy.js").then(s=>s.W);return{getListing:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),e=await Promise.all(U.wishlist.map(e=>s(e)));K(e.filter(s=>null!==s))}catch(s){K([])}else K([])},hs=async()=>{if(T)try{const s=await a("guest"===q?{guestId:T.uid}:{hostId:T.uid});X(s)}catch(s){}},us=async s=>{if(T)try{const e=await x(T.uid,s,ss);es(e),Y(s=>s?{...s,favorites:e}:null),"guest"===q&&cs(),u.success(e.includes(s)?"Added to favorites":"Removed from favorites")}catch(e){u.error("Failed to update favorites")}else u.error("Please login to manage favorites")};return U?p.jsx("div",{className:"min-h-screen bg-background",children:p.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8 max-w-4xl",children:[p.jsx(l,{variant:"ghost",size:"icon",onClick:()=>{W("host"===q?"/host/dashboard":"guest"===q?"/guest/dashboard":"/admin/dashboard")},className:"mb-6",children:p.jsx(B,{className:"h-4 w-4"})}),p.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Account Settings"}),p.jsxs(N,{value:rs,onValueChange:ns,className:"space-y-6",children:[p.jsxs(b,{className:"grid w-full "+("guest"===q?"grid-cols-6":"host"===q?"grid-cols-5":"grid-cols-4"),children:[p.jsxs(S,{value:"profile",children:[p.jsx(E,{className:"h-4 w-4 mr-2"}),"Profile"]}),"guest"===q&&p.jsxs(p.Fragment,{children:[p.jsxs(S,{value:"favorites",children:[p.jsx(M,{className:"h-4 w-4 mr-2"}),"Favorites"]}),p.jsxs(S,{value:"wishlist",children:[p.jsx(A,{className:"h-4 w-4 mr-2"}),"Wishlist"]})]}),p.jsxs(S,{value:"bookings",children:[p.jsx(I,{className:"h-4 w-4 mr-2"}),"Bookings"]}),"host"===q&&p.jsxs(S,{value:"coupons",children:[p.jsx(D,{className:"h-4 w-4 mr-2"}),"Coupons"]}),p.jsxs(S,{value:"notifications",children:[p.jsx(R,{className:"h-4 w-4 mr-2"}),"Notifications"]}),p.jsxs(S,{value:"security",children:[p.jsx(V,{className:"h-4 w-4 mr-2"}),"Security"]})]}),p.jsx(k,{value:"profile",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"Profile Information"}),p.jsx(c,{children:"Update your account details"})]}),p.jsxs(d,{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(L,{htmlFor:"fullName",children:"Full Name"}),p.jsx(w,{id:"fullName",type:"text",value:U.fullName,onChange:s=>Y({...U,fullName:s.target.value}),placeholder:"Enter your full name"})]}),p.jsxs("div",{children:[p.jsx(L,{htmlFor:"email",children:"Email"}),p.jsx(w,{id:"email",type:"email",value:U.email,disabled:!0})]}),p.jsxs("div",{children:[p.jsx(L,{htmlFor:"role",children:"Role"}),p.jsx(w,{id:"role",value:U.role,disabled:!0})]}),p.jsxs("div",{children:[p.jsx(L,{htmlFor:"points",children:"Reward Points"}),p.jsx(w,{id:"points",value:U.points,disabled:!0})]}),p.jsxs("div",{children:[p.jsx(L,{htmlFor:"balance",children:"Wallet Balance"}),p.jsx(w,{id:"balance",value:h(U.walletBalance),disabled:!0})]}),p.jsx(l,{onClick:async()=>{if(T&&U){Z(!0);try{await y(v(e,"users",T.uid),{fullName:U.fullName}),await os(),await z(),u.success("Profile updated successfully!")}catch(s){u.error("Failed to update profile")}finally{Z(!1)}}},disabled:H,children:H?"Saving...":"Save Changes"})]})]})}),"guest"===q&&p.jsx(k,{value:"favorites",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"Your Favorites"}),p.jsx(c,{children:"Listings you've liked and saved"})]}),p.jsx(d,{children:0===$.length?p.jsx(P,{icon:p.jsx(M,{className:"h-10 w-10"}),title:"No favorites yet",description:"Start exploring and add listings to your favorites!",action:p.jsx(l,{onClick:()=>W("/guest/browse"),children:"Browse Listings"})}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(s=>p.jsx(F,{listing:s,onView:()=>W("/guest/listing/"+s.id),onFavorite:()=>us(s.id),isFavorite:ss.includes(s.id)},s.id))})})]})}),"guest"===q&&p.jsx(k,{value:"wishlist",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"Your Wishlist"}),p.jsx(c,{children:"Listings you're planning to book in the future"})]}),p.jsx(d,{children:0===J.length?p.jsx(P,{icon:p.jsx(A,{className:"h-10 w-10"}),title:"No wishlist items yet",description:"Add listings to your wishlist for future trips!"}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(s=>p.jsx(F,{listing:s,onView:()=>W("/guest/listing/"+s.id),onFavorite:()=>us(s.id),isFavorite:ss.includes(s.id)},s.id))})})]})}),p.jsx(k,{value:"bookings",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"guest"===q?"My Bookings":"Host Bookings"}),p.jsx(c,{children:"guest"===q?"View your booking history":"Manage your property bookings"})]}),p.jsx(d,{children:0===Q.length?p.jsx(P,{icon:p.jsx(I,{className:"h-10 w-10"}),title:"No bookings yet",description:"guest"===q?"Start exploring amazing places to stay!":"No booking requests at this time.",action:"guest"===q?p.jsx(l,{onClick:()=>W("/guest/browse"),children:"Browse Listings"}):void 0}):p.jsx("div",{className:"space-y-4",children:Q.map(s=>p.jsxs("div",{className:"p-4 border rounded-lg",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"font-medium",children:["Booking #",s.id.slice(0,8)]}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(s.checkIn).toLocaleDateString()," - ",new Date(s.checkOut).toLocaleDateString()]})]}),p.jsx(C,{children:s.status})]}),p.jsxs("div",{className:"flex items-center justify-between mt-2",children:[p.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.guests," guest",s.guests>1?"s":""]}),p.jsx("p",{className:"font-semibold",children:h(s.totalPrice||0)})]})]},s.id))})})]})}),"host"===q&&p.jsx(k,{value:"coupons",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"Coupons"}),p.jsx(c,{children:"Manage your promotional coupons"})]}),p.jsx(d,{children:p.jsx(_,{coupons:ts,onApplyCoupon:s=>u.info(`Coupon ${s} applied`)})})]})}),p.jsx(k,{value:"notifications",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"Notification Preferences"}),p.jsx(c,{children:"Manage how you receive updates"})]}),p.jsx(d,{children:p.jsx("p",{className:"text-muted-foreground",children:"Notification settings coming soon"})})]})}),p.jsx(k,{value:"payments",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"Payment Methods"}),p.jsx(c,{children:"Manage your payment options"})]}),p.jsx(d,{children:p.jsx("p",{className:"text-muted-foreground",children:"Payment method management coming soon"})})]})}),p.jsx(k,{value:"security",children:p.jsxs(r,{children:[p.jsxs(n,{children:[p.jsx(o,{children:"Security Settings"}),p.jsx(c,{children:"Manage your account security"})]}),p.jsx(d,{children:p.jsx("p",{className:"text-muted-foreground",children:"Security settings coming soon"})})]})})]})]})}):p.jsx(t,{})};export{W as default};
