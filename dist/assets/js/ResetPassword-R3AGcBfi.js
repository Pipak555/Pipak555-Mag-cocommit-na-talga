import{r as e,u as s,l as r,j as a}from"./react-vendor-BMVo5gto.js";import{u as t,C as o,d as l,b as i,c as n,B as d,L as c,a as m,e as x}from"./index-BbQqfVom.js";import{I as p}from"./input-B93J7yYR.js";import{L as u}from"./label-CE6eI_XB.js";import{V as h}from"./video-background-0x67CGr6.js";import{T as g}from"./theme-toggle-DFp1ra6v.js";import{a as b}from"./sanitize-GsD2yBhu.js";import{f,c as j,C as w,E as v,d as y}from"./icons-vendor-D1YpcxsO.js";import"./utils-vendor-yBsXXcRr.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-Dbp4DHG_.js";import"./firebase-vendor-BtzXZj7S.js";import"./dropdown-menu-DES5sCK6.js";const N="/videos/landing-hero.mp4",k=()=>{const[k,P]=e.useState(""),[z,C]=e.useState(""),[S,q]=e.useState(!1),[R,E]=e.useState(!1),[I,L]=e.useState(!1),[T,F]=e.useState(!1),[Y,B]=e.useState(null),{resetPassword:D}=t(),G=s(),[M]=r(),O=M.get("oobCode")||M.get("code")||"";return e.useEffect(()=>{O||B("Invalid or missing reset link. Please request a new password reset.")},[O]),T?a.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[a.jsx(h,{src:N,overlay:!0,className:"z-0"}),a.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center p-6",children:a.jsxs(o,{className:"w-full max-w-md shadow-2xl border-2 border-green-500/20 bg-card/95 backdrop-blur-md relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 via-transparent to-primary/5 pointer-events-none"}),a.jsxs(l,{className:"relative z-10 p-8 text-center space-y-6",children:[a.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center",children:a.jsx(f,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:"Password Reset Successful!"}),a.jsx(n,{className:"text-base",children:"Your password has been reset successfully. You can now sign in with your new password."})]}),a.jsx(d,{onClick:()=>G("/guest/login"),className:"w-full bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300",children:"Go to Login"})]})]})})]}):a.jsxs("div",{className:"min-h-screen bg-background flex flex-col relative",children:[a.jsx(h,{src:N,overlay:!0,className:"z-0"}),a.jsx("header",{className:"relative z-10 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:a.jsxs("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[a.jsx(c,{size:"sm"}),a.jsx(g,{})]})}),a.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center p-6",children:a.jsxs(o,{className:"w-full max-w-md shadow-2xl border-2 border-primary/20 bg-card/95 backdrop-blur-md relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-secondary/5 pointer-events-none"}),a.jsxs(m,{className:"space-y-4 text-center pb-8 relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto rounded-3xl bg-gradient-to-br from-primary via-primary/80 to-secondary/60 flex items-center justify-center shadow-lg ring-4 ring-primary/20 animate-in fade-in zoom-in duration-500",children:a.jsx(j,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(i,{className:"text-4xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Reset Password"}),a.jsx(n,{className:"text-base mt-2 font-medium",children:"Enter your new password below"})]})]}),a.jsxs(l,{className:"relative z-10",children:[Y&&a.jsx("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-800 rounded-xl",children:a.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200 flex items-center gap-2",children:[a.jsx(w,{className:"h-4 w-4 flex-shrink-0"}),Y]})}),!O&&a.jsx("div",{className:"mb-6 p-4 bg-orange-100 dark:bg-orange-900/20 border-2 border-orange-300 dark:border-orange-800 rounded-xl",children:a.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 flex items-center gap-2",children:[a.jsx(w,{className:"h-4 w-4 flex-shrink-0"}),"Invalid or missing reset link. Please request a new password reset."]})}),a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),B(null),!k||!z)return void B("Please fill in all fields");if(k!==z)return void B("Passwords do not match");const s=8>k.length?"Password must be at least 8 characters long":null;if(s)B(s);else if(O){L(!0);try{const e=b(k);await D(O,e),F(!0),x.success("Password reset successfully! Redirecting to login..."),setTimeout(()=>{G("/guest/login")},2e3)}catch(r){const e=r.message||"Failed to reset password. The link may have expired.";B(e),x.error(e)}finally{L(!1)}}else B("Invalid reset link. Please request a new password reset.")},className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(u,{htmlFor:"password",className:"text-base font-semibold",children:"New Password"}),a.jsxs("div",{className:"relative group",children:[a.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(p,{id:"password",type:S?"text":"password",placeholder:"Enter new password",value:k,onChange:e=>P(e.target.value),required:!0,className:"pl-10 pr-10 h-12 border-2 transition-all"}),a.jsx("button",{type:"button",onClick:()=>q(!S),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:S?a.jsx(v,{className:"h-5 w-5"}):a.jsx(y,{className:"h-5 w-5"})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(u,{htmlFor:"confirmPassword",className:"text-base font-semibold",children:"Confirm New Password"}),a.jsxs("div",{className:"relative group",children:[a.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary group-focus-within:text-primary transition-colors"}),a.jsx(p,{id:"confirmPassword",type:R?"text":"password",placeholder:"Confirm new password",value:z,onChange:e=>C(e.target.value),required:!0,className:"pl-10 pr-10 h-12 border-2 transition-all"}),a.jsx("button",{type:"button",onClick:()=>E(!R),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-primary transition-colors",children:R?a.jsx(v,{className:"h-5 w-5"}):a.jsx(y,{className:"h-5 w-5"})})]})]}),a.jsx(d,{type:"submit",className:"w-full h-12 text-base font-semibold bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300",disabled:I||!O,children:I?"Resetting Password...":"Reset Password"}),a.jsx("div",{className:"text-center",children:a.jsx(d,{type:"button",variant:"ghost",onClick:()=>G("/guest/login"),className:"text-sm",children:"Back to Login"})})]})]})]})})]})};export{k as default};
