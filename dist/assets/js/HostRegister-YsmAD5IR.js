import{u as e,r as s,j as a}from"./react-vendor-Ve3SFwKO.js";import{u as t,B as l,C as r,a as c,b as i,d as n,c as o,i as d,e as m}from"./index-DaMaslBo.js";import{getAvailablePlans as x}from"./billingService-fa-KtGBm.js";import{H as h,X as u,Z as p,h as j,ae as g,A as f,o as N}from"./icons-vendor-Dhca6XHc.js";import"./utils-vendor-DzY7Ay74.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-D9RGQy8n.js";import"./firebase-vendor-BC71bXmb.js";const v=()=>{const v=e(),{user:y,signUp:w,signInWithGoogle:b}=t(),[C,S]=s.useState("plan"),[P,k]=s.useState(null),[A,I]=s.useState(!1),H=x();s.useEffect(()=>{sessionStorage.getItem("hostPolicyAccepted")||v("/host/policies",{state:{returnTo:"/host/register",planId:new URLSearchParams(window.location.search).get("planId")}})},[v]);const z=e=>{k(e),S("account")},Y=()=>{P?v("/host/payment?planId="+P.id):(m.error("Please select a plan first"),S("plan"))};y&&P&&"account"===C&&Y();const B=()=>{"account"===C?(S("plan"),k(null)):"payment"===C&&S("account")};return a.jsx("div",{className:"min-h-screen bg-background",children:a.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs(l,{variant:"ghost",onClick:()=>v("/"),className:"gap-2",children:[a.jsx(h,{className:"h-4 w-4"}),"Back to Home"]}),a.jsxs(l,{variant:"ghost",onClick:()=>{window.confirm("Are you sure you want to exit registration? Your progress will be saved.")&&v("/")},className:"gap-2 text-muted-foreground hover:text-destructive",children:[a.jsx(u,{className:"h-4 w-4"}),"Exit"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(r,{children:[a.jsx(c,{children:a.jsx(i,{className:"text-lg",children:"Registration Progress"})}),a.jsxs(n,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:a.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-primary",children:"plan"!==C?a.jsx(p,{className:"h-4 w-4 text-primary-foreground"}):a.jsx("span",{className:"text-xs font-bold text-primary-foreground",children:"1"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:"1. Choose Plan"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Select your hosting package."})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:a.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center "+("account"===C||"payment"===C?"bg-primary":"bg-muted"),children:"payment"===C?a.jsx(p,{className:"h-4 w-4 text-primary-foreground"}):"account"===C?a.jsx("span",{className:"text-xs font-bold text-primary-foreground",children:"2"}):a.jsx("span",{className:"text-xs font-bold text-muted-foreground",children:"2"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:"2. Create Account"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Set up your host profile."})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:a.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center "+("payment"===C?"bg-primary":"bg-muted"),children:"payment"===C?a.jsx(j,{className:"h-4 w-4 text-primary-foreground"}):a.jsx("span",{className:"text-xs font-bold text-muted-foreground",children:"3"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:"3. Payment"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Connect PayPal & pay."})]})]}),a.jsxs("div",{className:"pt-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Progress"}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:"plan"===C?"33%":"account"===C?"66%":"100%"}})}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:"plan"===C?"33%":"account"===C?"66%":"100%"})]})]})]})}),a.jsxs("div",{className:"lg:col-span-2",children:["plan"===C&&a.jsxs(r,{children:[a.jsxs(c,{children:[a.jsx(i,{children:"Choose Your Plan"}),a.jsx(o,{children:"Select a hosting package that fits your needs"})]}),a.jsx(n,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:H.map(e=>a.jsxs(r,{className:"cursor-pointer transition-all hover:border-primary "+(P?.id===e.id?"border-primary border-2":""),onClick:()=>z(e),children:[a.jsxs(c,{children:[a.jsx(i,{className:"text-xl",children:e.name}),a.jsx(o,{children:e.description})]}),a.jsxs(n,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("span",{className:"text-3xl font-bold",children:d(e.price)}),a.jsxs("span",{className:"text-muted-foreground",children:["/",e.billingCycle]})]}),a.jsx("ul",{className:"space-y-2 mb-4",children:e.features.map((e,s)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(p,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:e})]},s))}),a.jsxs(l,{className:"w-full",variant:P?.id===e.id?"default":"outline",onClick:()=>z(e),children:["Select Plan",a.jsx(g,{className:"h-4 w-4 ml-2"})]})]})]},e.id))})})]}),"account"===C&&a.jsxs(r,{children:[a.jsx(c,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(i,{children:"Create Your Account"}),a.jsx(o,{children:"Sign up to start hosting. You can also sign in if you already have an account."})]}),a.jsx(l,{variant:"ghost",size:"icon",onClick:B,className:"ml-auto",children:a.jsx(f,{className:"h-4 w-4"})})]})}),a.jsxs(n,{className:"space-y-4",children:[a.jsxs(l,{variant:"ghost",onClick:B,className:"mb-4 -ml-2",children:[a.jsx(f,{className:"h-4 w-4 mr-2"}),"Back to Plan Selection"]}),a.jsxs("div",{className:"text-center py-8",children:[a.jsx(N,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ready to Start Hosting?"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:P&&`You've selected the ${P.name} plan (${d(P.price)}/${P.billingCycle}).`}),a.jsxs("div",{className:"space-y-3 max-w-md mx-auto",children:[a.jsxs(l,{className:"w-full",onClick:()=>v("/host/login",{state:{showSignup:!0,planId:P?.id}}),children:["Create Account",a.jsx(g,{className:"h-4 w-4 ml-2"})]}),a.jsxs(l,{variant:"outline",className:"w-full",onClick:async()=>{if(!sessionStorage.getItem("hostPolicyAccepted"))return m.error("To create a host account, you must first read and accept our policies and compliance terms. Please review them and accept before continuing."),void v("/host/policies",{state:{returnTo:"/host/register",planId:P?.id}});I(!0);try{const e=sessionStorage.getItem("hostPolicyAcceptedDate")||(new Date).toISOString();await b("host",{policyAccepted:!0,policyAcceptedDate:e}),sessionStorage.removeItem("hostPolicyAccepted"),sessionStorage.removeItem("hostPolicyAcceptedDate"),Y()}catch(e){m.error(e.message||"Failed to sign up with Google")}finally{I(!1)}},disabled:A,children:[a.jsxs("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsxs("div",{className:"text-sm text-muted-foreground text-center pt-4",children:["Already have an account?"," ",a.jsx(l,{variant:"link",className:"p-0 h-auto",onClick:()=>v("/host/login",{state:{planId:P?.id}}),children:"Sign in"})]})]})]})]})]})]})]})]})})};export{v as default};
