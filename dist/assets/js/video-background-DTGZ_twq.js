import{r as e,j as t}from"./react-vendor-Ve3SFwKO.js";const n=({src:n,className:r="",overlay:a=!0,fallbackImage:o,style:s})=>{const i=e.useRef(null),c=e.useRef(null),[d,l]=e.useState(!1),[u,b]=e.useState(!1),[v,g]=e.useState(!1),[m,p]=e.useState(!1);return e.useEffect(()=>{const e=()=>{l(768>window.innerWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e.useEffect(()=>{if(u)return;if(!c.current){const e=setTimeout(()=>{if(c.current){const e=c.current.getBoundingClientRect();e.top<window.innerHeight+200&&e.bottom>-200&&g(!0)}},100);return()=>clearTimeout(e)}const e=c.current.getBoundingClientRect();if(e.top<window.innerHeight+200&&e.bottom>-200)return void g(!0);const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(g(!0),t.disconnect())})},{rootMargin:d?"100px":"200px"});return t.observe(c.current),()=>t.disconnect()},[u,d]),e.useEffect(()=>{if(i.current&&!u&&v){const e=i.current;e.playbackRate=d?1:.8,e.load();const t=()=>{const t=e.play();void 0!==t?t.then(()=>{p(!0)}).catch(e=>{p(!0)}):p(!0)},n=()=>{const t=e.play();void 0!==t?t.then(()=>{p(!0)}).catch(()=>{p(!0)}):p(!0)};if(e.addEventListener("canplay",t,{once:!0}),e.addEventListener("loadeddata",n,{once:!0}),e.readyState>=2){const t=e.play();void 0!==t?t.then(()=>p(!0)).catch(()=>p(!0)):p(!0)}return()=>{e.removeEventListener("canplay",t),e.removeEventListener("loadeddata",n)}}},[d,u,v]),u?t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat "+r,style:{backgroundImage:o?`url(${o})`:void 0,backgroundColor:o?void 0:"hsl(var(--background))"},children:a&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/50 via-black/30 to-black/50"})}):t.jsxs("div",{ref:c,className:"absolute inset-0 overflow-hidden "+r,style:s,children:[!m&&o&&t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-500",style:{backgroundImage:`url(${o})`,opacity:m?0:1,zIndex:1}}),v&&t.jsxs("video",{ref:i,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",transform:"scale(1) translateZ(0)",willChange:"auto",objectFit:"cover",objectPosition:"center center",minWidth:"100%",minHeight:"100%",maxWidth:"100%",maxHeight:"100%",pointerEvents:"none",opacity:m?1:0,zIndex:2},preload:"metadata",poster:o,onError:()=>{b(!0)},onLoadedMetadata:()=>{i.current&&i.current.play().catch(()=>{})},children:[t.jsx("source",{src:n,type:"video/mp4"}),"Your browser does not support the video tag."]}),a&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background/30 dark:from-black/50 via-background/15 dark:via-black/30 to-background/30 dark:to-black/50 z-10"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/40 dark:from-black/60 via-transparent to-transparent z-10"})]})]})};export{n as V};
