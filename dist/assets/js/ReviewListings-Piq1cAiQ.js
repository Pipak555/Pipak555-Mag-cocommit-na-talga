const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/hostPointsService-BCZ7eKj5.js","assets/js/firebase-vendor-BC71bXmb.js","assets/js/index-BnushFQy.js","assets/js/react-vendor-Ve3SFwKO.js","assets/js/utils-vendor-DzY7Ay74.js","assets/js/maps-vendor-CYGXCXz5.js","assets/maps-vendor-Dgihpmma.css","assets/js/ui-vendor-D9RGQy8n.js","assets/js/icons-vendor-DD8ZfUKZ.js","assets/index-CZT-s-DH.css"])))=>i.map(i=>d[i]);
import{o as e,a as s,v as a,B as i,i as l,A as t,l as r,m as n,_ as o,H as c}from"./index-BnushFQy.js";import{u as d,r as m,j as h}from"./react-vendor-Ve3SFwKO.js";import{L as x}from"./ListingCard-D6Td60Vf.js";import{B as g}from"./BackButton-DohCcac0.js";import{A as p,a as u,b as j,c as f,d as b,e as v,f as N,g as w}from"./alert-dialog-Bv7bA0QL.js";import{D as y,a as k,b as C,c as A,d as z}from"./dialog-B475KvSN.js";import{B as S}from"./badge-CYghlWc2.js";import{S as L}from"./separator-ChZB0NG6.js";import{a3 as I,a4 as P,a5 as F,o as B,M as R,w as E,m as H,U as _,y as O,z as $,H as T,X as U}from"./icons-vendor-DD8ZfUKZ.js";import"./ui-vendor-D9RGQy8n.js";import"./utils-vendor-DzY7Ay74.js";import"./firebase-vendor-BC71bXmb.js";import"./maps-vendor-CYGXCXz5.js";const D=()=>{d();const[D,V]=m.useState([]),[G,M]=m.useState(!0),[X,q]=m.useState(!1),[J,K]=m.useState(!1),[Q,W]=m.useState(null),[Y,Z]=m.useState(null),[ee,se]=m.useState(null),[ae,ie]=m.useState(!1),[le,te]=m.useState(!1),[re,ne]=m.useState(0),[oe,ce]=m.useState(!1),[de,me]=m.useState(0);m.useEffect(()=>{he()},[]);const he=async()=>{try{M(!0);const s=await e({status:"pending"});V(s)}catch(a){s.error("Failed to load pending listings: "+(a.message||"Unknown error"))}finally{M(!1)}},xe=e=>{W(e),q(!0)},ge=e=>{W(e),K(!0)};return h.jsxs("div",{className:"min-h-screen bg-background p-6",children:[h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsx(g,{to:"/admin/dashboard",className:"mb-6"}),h.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Review Pending Listings"}),G?h.jsx(a,{}):0===D.length?h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-muted-foreground",children:"No pending listings"})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(e=>h.jsxs("div",{className:"cursor-pointer",onClick:()=>(async e=>{if(Z(e),ie(!0),ne(0),te(!0),e.hostId)try{const s=await t(e.hostId);se(s?{fullName:s.fullName||"N/A",email:s.email||"N/A"}:{fullName:"N/A",email:"N/A"})}catch(s){se({fullName:"Error loading",email:"Error loading"})}finally{te(!1)}else se({fullName:"N/A",email:"N/A"}),te(!1)})(e),children:[h.jsx(x,{listing:e}),h.jsxs("div",{className:"mt-2 flex gap-2",onClick:e=>e.stopPropagation(),children:[h.jsx(i,{variant:"default",size:"sm",className:"flex-1",onClick:()=>xe(e.id),children:"Approve"}),h.jsx(i,{variant:"destructive",size:"sm",className:"flex-1",onClick:()=>ge(e.id),children:"Reject"})]})]},e.id))})]}),h.jsx(p,{open:X,onOpenChange:q,children:h.jsxs(u,{children:[h.jsxs(j,{children:[h.jsx(f,{children:"Approve Listing?"}),h.jsx(b,{children:"Are you sure you want to approve this listing? It will be published and visible to all users."})]}),h.jsxs(v,{children:[h.jsx(N,{onClick:()=>W(null),children:"Cancel"}),h.jsx(w,{onClick:async()=>{if(Q)try{const i=await r(Q);if(!i)return void s.error("Listing not found");if(await n(Q,{status:"approved"}),i.hostId)try{const{awardHostPointsForListingApproval:e}=await o(async()=>{const{awardHostPointsForListingApproval:e}=await import("./hostPointsService-BCZ7eKj5.js");return{awardHostPointsForListingApproval:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));await e(i.hostId,Q)}catch(e){}if(i.hostId)try{await c(i.hostId,Q,i.title)}catch(a){}s.success("Listing approved"),he(),W(null)}catch(i){s.error("Failed to approve listing: "+(i.message||"Unknown error"))}finally{q(!1)}},children:"Approve"})]})]})}),h.jsx(p,{open:J,onOpenChange:K,children:h.jsxs(u,{children:[h.jsxs(j,{children:[h.jsx(f,{children:"Reject Listing?"}),h.jsx(b,{children:"Are you sure you want to reject this listing? The host will be notified and the listing will not be published."})]}),h.jsxs(v,{children:[h.jsx(N,{onClick:()=>W(null),children:"Cancel"}),h.jsx(w,{onClick:async()=>{if(Q)try{await n(Q,{status:"rejected"}),s.success("Listing rejected"),he(),W(null)}catch(e){s.error("Failed to reject listing: "+(e.message||"Unknown error"))}finally{K(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Reject"})]})]})}),h.jsx(y,{open:ae,onOpenChange:ie,children:h.jsxs(k,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsxs(C,{children:[h.jsx(A,{className:"text-2xl",children:Y?.title}),h.jsx(z,{children:"Review full listing details and host information"})]}),Y&&h.jsxs("div",{className:"space-y-6",children:[Y.images&&Y.images.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"relative w-full h-[400px] rounded-lg overflow-hidden group bg-muted cursor-pointer",onClick:()=>{me(re),ce(!0)},children:[h.jsx("div",{className:"flex transition-transform duration-500 ease-in-out h-full",style:{transform:`translateX(-${100*re}%)`},children:Y.images.map((e,s)=>h.jsx("div",{className:"min-w-full h-full flex-shrink-0 relative",children:h.jsx("img",{src:e||"/placeholder.svg",alt:`${Y.title} - Image ${s+1}`,className:"w-full h-full object-cover"})},s))}),Y.images.length>1&&h.jsxs(h.Fragment,{children:[h.jsx(i,{variant:"secondary",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 opacity-80 hover:opacity-100 transition-opacity bg-black/70 hover:bg-black/90 text-white border-none z-10 shadow-lg backdrop-blur-sm h-10 w-10",onClick:e=>{e.stopPropagation(),ne(e=>0===e?Y.images.length-1:e-1)},"aria-label":"Previous image",children:h.jsx(I,{className:"h-5 w-5"})}),h.jsx(i,{variant:"secondary",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-80 hover:opacity-100 transition-opacity bg-black/70 hover:bg-black/90 text-white border-none z-10 shadow-lg backdrop-blur-sm h-10 w-10",onClick:e=>{e.stopPropagation(),ne(e=>e===Y.images.length-1?0:e+1)},"aria-label":"Next image",children:h.jsx(P,{className:"h-5 w-5"})}),h.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-sm z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(F,{className:"h-3 w-3 inline mr-1"}),"Click to zoom"]}),h.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white px-4 py-1.5 rounded-full text-sm font-medium backdrop-blur-sm z-10",children:[re+1," / ",Y.images.length]})]})]}),Y.images.length>1&&h.jsx("div",{className:"relative",children:h.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2 snap-x snap-mandatory",children:Y.images.map((e,s)=>h.jsx("button",{onClick:()=>ne(s),className:"relative flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all snap-start "+(re===s?"border-primary ring-2 ring-primary/50 scale-105":"border-transparent hover:border-border opacity-70 hover:opacity-100"),children:h.jsx("img",{src:e,alt:"Thumbnail "+(s+1),className:"w-full h-full object-cover"})},s))})})]}),h.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[h.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[h.jsx(B,{className:"h-5 w-5"}),"Host Information"]}),le?h.jsx("p",{className:"text-muted-foreground",children:"Loading host information..."}):h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"font-medium",children:"Name:"}),h.jsx("span",{children:ee?.fullName||"N/A"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"font-medium",children:"Email:"}),h.jsx("a",{href:"mailto:"+(ee?.email||""),className:"text-primary hover:underline",children:ee?.email||"N/A"})]})]})]}),h.jsx(L,{}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[h.jsx(E,{className:"h-5 w-5"}),"Location"]}),h.jsx("p",{className:"text-muted-foreground",children:Y.location})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),h.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:Y.description})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(H,{className:"h-5 w-5 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),h.jsxs("p",{className:"font-semibold",children:[l(Y.price),"/night"]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_,{className:"h-5 w-5 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Max Guests"}),h.jsx("p",{className:"font-semibold",children:Y.maxGuests})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(O,{className:"h-5 w-5 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Bedrooms"}),h.jsx("p",{className:"font-semibold",children:Y.bedrooms||"N/A"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($,{className:"h-5 w-5 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Bathrooms"}),h.jsx("p",{className:"font-semibold",children:void 0!==Y.bathrooms?Y.bathrooms:"N/A"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(T,{className:"h-5 w-5 text-muted-foreground"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),h.jsx(S,{variant:"secondary",children:Y.category})]})]}),Y.amenities&&Y.amenities.length>0&&h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Amenities"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Y.amenities.map((e,s)=>h.jsx(S,{variant:"outline",children:e},s))})]})]}),h.jsx(L,{}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx(i,{variant:"outline",onClick:()=>ie(!1),children:"Close"}),h.jsx(i,{variant:"destructive",onClick:()=>{ie(!1),ge(Y.id)},children:"Reject"}),h.jsx(i,{onClick:()=>{ie(!1),xe(Y.id)},children:"Approve"})]})]})]})}),h.jsx(y,{open:oe,onOpenChange:ce,children:h.jsxs(k,{className:"max-w-[98vw] max-h-[98vh] w-auto h-auto p-0 bg-black/95 border-none m-1",children:[h.jsx(A,{className:"sr-only",children:"View Full Size Image"}),h.jsxs(z,{className:"sr-only",children:["Viewing image ",de+1," of ",Y?.images?.length||0," for ",Y?.title]}),h.jsx("div",{className:"relative w-full h-full flex items-center justify-center min-h-[400px]",children:Y?.images&&Y.images.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(i,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-50 bg-black/70 hover:bg-black/90 text-white border-none h-8 w-8 sm:h-10 sm:w-10",onClick:()=>ce(!1),children:h.jsx(U,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),h.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-black/70 text-white px-3 py-1.5 rounded-full text-xs sm:text-sm font-medium backdrop-blur-sm z-50",children:[de+1," / ",Y.images.length]}),h.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 sm:p-4 pt-12 pb-20 sm:pb-24",children:h.jsx("img",{src:Y.images[de]||"/placeholder.svg",alt:`${Y.title} - Image ${de+1}`,className:"max-w-full max-h-[calc(98vh-160px)] object-contain"})}),Y.images.length>1&&h.jsxs(h.Fragment,{children:[h.jsx(i,{variant:"ghost",size:"icon",className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-50 bg-black/70 hover:bg-black/90 text-white border-none h-8 w-8 sm:h-12 sm:w-12",onClick:()=>me(e=>0===e?Y.images.length-1:e-1),children:h.jsx(I,{className:"h-4 w-4 sm:h-6 sm:w-6"})}),h.jsx(i,{variant:"ghost",size:"icon",className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-50 bg-black/70 hover:bg-black/90 text-white border-none h-8 w-8 sm:h-12 sm:w-12",onClick:()=>me(e=>e===Y.images.length-1?0:e+1),children:h.jsx(P,{className:"h-4 w-4 sm:h-6 sm:w-6"})})]}),Y.images.length>1&&h.jsx("div",{className:"absolute bottom-2 sm:bottom-4 left-1/2 -translate-x-1/2 bg-black/70 backdrop-blur-sm rounded-lg p-2 sm:p-3 z-50 max-w-[calc(98vw-32px)]",children:h.jsx("div",{className:"flex gap-2 sm:gap-3 overflow-x-auto scrollbar-hide px-1",children:Y.images.map((e,s)=>h.jsx("button",{onClick:()=>me(s),className:"relative flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 rounded transition-all "+(de===s?"scale-110 shadow-lg shadow-primary/50":"opacity-70 hover:opacity-100"),children:h.jsx("div",{className:"absolute inset-0 rounded overflow-hidden border-2 "+(de===s?"border-primary ring-2 ring-primary/50 ring-offset-2 ring-offset-black/70":"border-transparent hover:border-white/50"),children:h.jsx("img",{src:e,alt:"Thumbnail "+(s+1),className:"w-full h-full object-cover transition-opacity "+(de===s?"opacity-100":"opacity-70")})})},s))})})]})})]})})]})};export{D as default};
