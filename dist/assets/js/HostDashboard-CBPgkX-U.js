import{u as e,r as s,j as t}from"./react-vendor-Ve3SFwKO.js";import{u as a,h as r,L as o,B as i,C as n,d as l,a as c,b as d,i as m,e as h,c as x,j as u}from"./index-DaMaslBo.js";import{N as g}from"./NotificationBell-D2XQODdv.js";import{getUserSubscription as p}from"./billingService-fa-KtGBm.js";import{B as j}from"./badge-BSgvUoVt.js";import{V as b}from"./video-background-DTGZ_twq.js";import{T as w}from"./theme-toggle-Djm4W2SX.js";import{l as f,q as v,w as N,d as k}from"./firebase-vendor-BC71bXmb.js";import{h as y}from"./hero-home-D5ap7Mum.js";import{A as C,a as D,b as S,c as T,d as I,e as L,f as B,g as H}from"./alert-dialog-DLw-Qa8s.js";import{H as O,C as z,h as P,i as q,P as E,j as M,k as V,l as A,m as Y,n as R}from"./icons-vendor-Dhca6XHc.js";import"./utils-vendor-DzY7Ay74.js";import"./maps-vendor-CYGXCXz5.js";import"./ui-vendor-D9RGQy8n.js";import"./input-D5hloL4G.js";import"./scroll-area-Dps723Uf.js";import"./select-CXm8ONYg.js";import"./switch-CSe7-F5W.js";import"./label-B2t2XnWQ.js";import"./dropdown-menu-DVnKNEtJ.js";const W=()=>{const{user:r}=a(),[o,i]=s.useState([]),h=e();return s.useEffect(()=>{if(!r)return;const e=new Date;e.setHours(0,0,0,0);const s=new Date(e);s.setDate(s.getDate()+1);const t=f(v(k(u,"bookings"),N("hostId","==",r.uid)),s=>{const t=s.docs.map(e=>({id:e.id,...e.data()})).filter(s=>{const t=new Date(s.checkIn);t.setHours(0,0,0,0);const a=new Date(s.checkOut);return a.setHours(0,0,0,0),!(t.getTime()!==e.getTime()&&a.getTime()!==e.getTime()||"confirmed"!==s.status&&"pending"!==s.status)}).sort((e,s)=>new Date(e.checkIn).getTime()-new Date(s.checkIn).getTime());i(t)});return()=>t()},[r]),t.jsxs(n,{className:"shadow-medium",children:[t.jsxs(c,{children:[t.jsx(d,{children:"Today's Schedule"}),t.jsx(x,{children:o.length>0?`${o.length} booking${o.length>1?"s":""} today`:"No bookings scheduled for today"})]}),t.jsx(l,{children:0===o.length?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(M,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"You're all set! No check-ins or check-outs today."})]}):t.jsx("div",{className:"space-y-3",children:o.map(e=>{const s=new Date(e.checkIn),a=new Date(e.checkOut),r=s.toDateString()===(new Date).toDateString(),o=a.toDateString()===(new Date).toDateString();return t.jsx("div",{className:"p-4 border rounded-lg hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>h("/host/bookings"),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:r&&o?"Check-in & Check-out":r?"Check-in":"Check-out"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.toLocaleDateString()," - ",a.toLocaleDateString()]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.guests," guest",e.guests>1?"s":""," â€¢ ",m(e.totalPrice||0)]})]}),t.jsx(j,{children:e.status})]})},e.id)})})})]})},$=()=>{const{user:j,userRole:$,userProfile:U,signOut:X,hasRole:Z}=a(),F=e(),[G,J]=s.useState({activeListings:0,upcomingBookings:0,totalEarnings:0}),[K,Q]=s.useState(!1),[_,ee]=s.useState(null),[se,te]=s.useState(null);s.useEffect(()=>{if(!j||!Z("host"))return void F("/host/login");(async()=>{try{const e=await p(j.uid);if(e){te(e);const s=e.endDate?new Date(e.endDate)>new Date:"active"===e.status;ee(s)}else ee(!1),te(null)}catch(e){ee(!1),te(null)}})(),ae();const e=f(v(k(u,"listing"),N("hostId","==",j.uid)),e=>{const s=e.docs.filter(e=>"approved"===e.data().status).length;J(e=>({...e,activeListings:s}))}),s=f(v(k(u,"bookings"),N("hostId","==",j.uid)),e=>{const s=new Date,t=e.docs.filter(e=>{const t=e.data();return new Date(t.checkIn)>=s&&"confirmed"===t.status}).length,a=e.docs.filter(e=>"confirmed"===e.data().status||"completed"===e.data().status).reduce((e,s)=>e+(s.data().totalPrice||0),0);J(e=>({...e,upcomingBookings:t,totalEarnings:a}))});return()=>{e(),s()}},[j,$,F]);const ae=async()=>{if(j)try{const e=await r({hostId:j.uid}),s=new Date;s.setHours(0,0,0,0),e.filter(e=>{const t=new Date(e.checkIn);return t.setHours(0,0,0,0),t.getTime()===s.getTime()})}catch(e){}};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 shadow-soft",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center gap-2 sm:gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[t.jsx(o,{size:"sm"}),t.jsx("div",{className:"hidden sm:block p-2 rounded-lg bg-primary/10",children:t.jsx(O,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("h1",{className:"text-base sm:text-lg font-bold truncate",children:["Welcome, ",U?.fullName||"Host","!"]}),t.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"Manage your properties"})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[t.jsx(g,{}),t.jsx(w,{}),t.jsxs(i,{variant:"outline",onClick:()=>Q(!0),className:"h-9 sm:h-auto text-xs sm:text-sm px-2 sm:px-4 touch-manipulation",children:[t.jsx("span",{className:"hidden sm:inline",children:"Sign Out"}),t.jsx("span",{className:"sm:hidden",children:"Out"})]})]})]})}),t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[!1===_&&t.jsx(n,{className:"mb-6 border-yellow-500/50 bg-yellow-500/10",children:t.jsx(l,{className:"pt-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(z,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold mb-1",children:"Subscription Required"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"You need an active subscription to create and manage listings. Subscribe now to unlock all features."}),t.jsxs(i,{size:"sm",onClick:()=>F("/host/register"),children:[t.jsx(P,{className:"h-4 w-4 mr-2"}),"Subscribe Now"]})]})]})})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-6 sm:mb-8",children:[t.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer hover:scale-105 active:scale-100",onClick:()=>F("/host/listings"),children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-secondary to-accent"}),t.jsx(c,{className:"pb-3",children:t.jsx(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Active Listings"})}),t.jsx(l,{children:t.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-primary to-primary-glow bg-clip-text text-transparent",children:G.activeListings})})]}),t.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer hover:scale-105 active:scale-100",onClick:()=>F("/host/bookings"),children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-blue-400 to-blue-300"}),t.jsx(c,{className:"pb-3",children:t.jsx(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Upcoming Bookings"})}),t.jsx(l,{children:t.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-blue-500 to-blue-600 bg-clip-text text-transparent",children:G.upcomingBookings})})]}),t.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer",onClick:()=>F("/host/payments"),children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-secondary via-primary to-accent"}),t.jsx(c,{className:"pb-3",children:t.jsx(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Total Earnings"})}),t.jsx(l,{children:t.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-secondary to-secondary/80 bg-clip-text text-transparent",children:m(G.totalEarnings)})})]}),t.jsxs(n,{className:"relative overflow-hidden border-0 shadow-md hover:shadow-xl transition-all duration-300 group cursor-pointer",onClick:()=>F("/host/rewards"),children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-yellow-500 via-yellow-400 to-yellow-300"}),t.jsx(c,{className:"pb-3",children:t.jsxs(d,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[t.jsx(q,{className:"h-4 w-4"}),"Points"]})}),t.jsx(l,{children:t.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-yellow-500 to-yellow-600 bg-clip-text text-transparent",children:U?.hostPoints||0})})]})]}),t.jsxs("div",{className:"relative mb-8 rounded-xl overflow-hidden h-64 md:h-80 lg:h-96 shadow-lg",children:[t.jsx(b,{src:"/videos/landing-hero.mp4",overlay:!0,fallbackImage:y}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/60 via-black/40 to-black/60 z-10"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent z-10"}),t.jsxs("div",{className:"relative z-20 h-full flex flex-col items-center justify-center text-center px-6",children:[t.jsxs("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 text-white drop-shadow-2xl",children:["Welcome back, ",U?.fullName||"Host","!"]}),t.jsx("p",{className:"text-lg md:text-xl text-white/90 mb-6 max-w-2xl drop-shadow-lg",children:"Manage your properties and track your performance"}),t.jsx(i,{size:"lg",className:"h-12 px-8 text-lg bg-primary hover:bg-primary/90 shadow-2xl hover:shadow-2xl hover:scale-105 transition-all",onClick:()=>{_?F("/host/create-listing"):(h.error("Subscription required to create listings"),F("/host/register"))},children:"Create New Listing"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-6 sm:mb-8",children:[t.jsx(n,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer "+(_?"":"opacity-60"),onClick:()=>{_?F("/host/create-listing"):(h.error("Subscription required to create listings"),F("/host/register"))},children:t.jsxs(c,{children:[t.jsx(E,{className:"w-8 h-8 text-primary mb-2"}),t.jsx(d,{children:"Create New Listing"}),t.jsx(x,{children:_?"Add a new property, experience, or service":"Subscribe to create listings"})]})}),t.jsx(n,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>F("/host/listings"),children:t.jsxs(c,{children:[t.jsx(O,{className:"w-8 h-8 text-secondary mb-2"}),t.jsx(d,{children:"My Listings"}),t.jsx(x,{children:"View and manage your active listings"})]})}),t.jsx(n,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>F("/host/bookings"),children:t.jsxs(c,{children:[t.jsx(M,{className:"w-8 h-8 text-accent mb-2"}),t.jsx(d,{children:"Bookings"}),t.jsx(x,{children:"Manage booking requests"})]})}),t.jsx(n,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>F("/host/calendar"),children:t.jsxs(c,{children:[t.jsx(V,{className:"w-8 h-8 text-primary mb-2"}),t.jsx(d,{children:"Calendar"}),t.jsx(x,{children:"View bookings schedule"})]})}),t.jsx(n,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>F("/host/messages"),children:t.jsxs(c,{children:[t.jsx(A,{className:"w-8 h-8 text-secondary mb-2"}),t.jsx(d,{children:"Messages"}),t.jsx(x,{children:"Chat with guests and respond to inquiries"})]})}),t.jsx(n,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>F("/host/payments"),children:t.jsxs(c,{children:[t.jsx(Y,{className:"w-8 h-8 text-accent mb-2"}),t.jsx(d,{children:"Payments"}),t.jsx(x,{children:"View earnings and payment methods"})]})}),t.jsx(n,{className:"shadow-medium hover:shadow-hover transition-smooth cursor-pointer",onClick:()=>F("/host/settings?tab=subscription"),children:t.jsxs(c,{children:[t.jsx(R,{className:"w-8 h-8 text-muted-foreground mb-2"}),t.jsx(d,{children:"Settings"}),t.jsx(x,{children:"Manage your account and subscription"})]})})]}),t.jsx(W,{})]}),t.jsx(C,{open:K,onOpenChange:Q,children:t.jsxs(D,{children:[t.jsxs(S,{children:[t.jsx(T,{children:"Sign Out"}),t.jsx(I,{children:"Are you sure you want to sign out? You'll need to sign in again to access your account."})]}),t.jsxs(L,{children:[t.jsx(B,{children:"Cancel"}),t.jsx(H,{onClick:async()=>{await X(),F("/")},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})})]})};export{$ as default};
